!function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],d=0,p=[];d<s.length;d++)i=s[d],o[i]&&p.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);p.length;)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={1:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;a.push(["./index.tsx",0]),n()}({"./index.tsx":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-dom/index.js"),a=n("./src/ChellVizApp.tsx");o.render(r.createElement(a.ChellVizApp,null),document.getElementById("root"))},"./src/ChellVizApp.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),u=n("./src/container/VizPanelContainer.tsx"),l=n("./src/data/chell-data.ts"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){return s.createElement("div",{id:"ChellVizApp"},s.createElement(c.Grid,{centered:!0,divided:"vertically"},s.createElement(c.GridRow,null,s.createElement(u.default,{dataDirs:i(["1","2","3"].map(function(t){return"assets/contact_map/example"+t}),["assets/beta_lactamase"]),supportedVisualizations:[l.VIZ_TYPE.CONTACT_MAP,l.VIZ_TYPE.NGL],initialVisualizations:[l.VIZ_TYPE.CONTACT_MAP,l.VIZ_TYPE.NGL],numPanels:2})),s.createElement(c.GridRow,null,s.createElement(u.default,{dataDirs:i(["1","2","3"].map(function(t){return"assets/contact_map/example"+t}),["assets/beta_lactamase"]),supportedVisualizations:[l.VIZ_TYPE.CONTACT_MAP,l.VIZ_TYPE.NGL],initialVisualizations:[l.VIZ_TYPE.CONTACT_MAP,l.VIZ_TYPE.NGL],numPanels:2}))))},e}(s.Component);e.ChellVizApp=d},"./src/component/ContactMap.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n("./node_modules/react/index.js"),l=n("./node_modules/semantic-ui-react/dist/es/index.js"),d=n("./src/context/ResidueContext.ts"),p=n("./src/context/SecondaryStructureContext.tsx"),f=n("./src/data/chell-data.ts"),h=n("./src/helper/ReactHelper.ts"),y=n("./src/component/chart/ContactMapChart.tsx"),v=n("./src/component/widget/ChellRadioGroup.tsx"),m=n("./src/component/widget/ChellSlider.tsx");e.defaultContactMapProps=a({chainLength:59,configurations:new Array,data:{computedPoints:new Array,secondaryStructures:new Array},enableSliders:!0,height:400,highlightColor:"#ff8800"},d.initialResidueContext,p.initialSecondaryStructureContext,{onBoxSelection:void 0,padding:0,width:400}),e.initialContactMapState={pointsToPlot:new Array,showConfiguration:!1};var g=function(t){function n(n){var r=t.call(this,n)||this;return r.state=e.initialContactMapState,r.onNodeSizeChange=function(t){return function(e){var n=r.state.pointsToPlot;r.setState({pointsToPlot:s(n.slice(0,t),[a({},n[t],{nodeSize:e})],n.slice(t+1))})}},r.onShowConfigurationToggle=function(){return function(){return r.setState({showConfiguration:!r.state.showConfiguration})}},r.onMouseEnter=function(t){return function(e){var n=e.points;n[0].data&&("y2"===n[0].data.yaxis||"x2"===n[0].data.xaxis)||t([n[0].x,n[0].y])}},r.onMouseClick=function(t){return function(e){var n,o,a,i,s=e.points,u=s[0].data&&"x2"===s[0].data.xaxis,l=s[0].data&&"y2"===s[0].data.yaxis;if(u||l){var d=r.props,p=d.toggleSecondaryStructure,f=d.data;try{for(var h=c(f.secondaryStructures),y=h.next();!y.done;y=h.next()){var v=y.value;try{for(var m=c(v),g=m.next();!g.done;g=m.next()){var C=g.value;l&&s[0].x>=C.start&&s[0].x<=C.end?p(C):u&&s[0].y>=C.start&&s[0].y<=C.end&&p(C)}}catch(t){a={error:t}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}}}catch(t){n={error:t}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}else t([s[0].x,s[0].y])}},r.onMouseSelect=function(t){return function(e){void 0===e&&(e={points:[]});r.props;var n=e.points;t&&t(n.map(function(t){return t.x}))}},r}return o(n,t),n.prototype.componentDidMount=function(){this.setupPointsToPlot(this.props.data.computedPoints)},n.prototype.componentDidUpdate=function(t){var e=this.props,n=e.data,r=e.lockedResiduePairs;n!==t.data?(this.props.clearAllResidues(),this.props.clearSecondaryStructure(),this.setupPointsToPlot(n.computedPoints)):r!==t.lockedResiduePairs&&this.setupPointsToPlot(n.computedPoints,r)},n.prototype.render=function(){var t=this.props,e=t.enableSliders,n=t.padding,r=t.width,o=this.state.pointsToPlot,a={width:.9*r};return u.createElement("div",{id:"ContactMapComponent",style:{padding:n}},this.renderContactMapChart(o),e&&this.renderConfigSliders(a,o))},n.prototype.setupPointsToPlot=function(t,e){void 0===e&&(e=new Map);var n=this.props.highlightColor,r=this.state.pointsToPlot,o=r.length,i=o>=2&&r[o-1]?r[o-1].nodeSize:6,c=y.generateChartDataEntry("none",n,"Selected Res. Pairs","",i,Array.from(e.keys()).filter(function(t){return 2===e.get(t).length}).map(function(t){return{i:e.get(t)[0],j:e.get(t)[1],dist:0}}),{marker:{color:n,line:{color:n,width:3},symbol:"circle-open"}});this.setState(a({},this.state,{pointsToPlot:s(t,[c])}))},n.prototype.renderContactMapChart=function(t){var e=this.props,n=e.addHoveredResidues,r=e.candidateResidues,o=e.chainLength,a=e.data,i=e.onBoxSelection,s=e.toggleLockedResiduePair;return u.createElement(y.default,{candidateResidues:r,contactData:t,onClickCallback:this.onMouseClick(s),onHoverCallback:this.onMouseEnter(n),onSelectedCallback:this.onMouseSelect(i),range:o+5,secondaryStructures:a.secondaryStructures})},n.prototype.renderConfigSliders=function(t,e){var n=this.state.showConfiguration;return u.createElement(l.Accordion,{fluid:!0,styled:!0},u.createElement(l.Accordion.Title,{active:n,className:"contact-map-configuration-toggle",index:1,onClick:this.onShowConfigurationToggle()},u.createElement(l.Icon,{name:"dropdown"}),"Configuration"),u.createElement(l.Accordion.Content,{active:n},this.renderNodeSizeSliders(e,t),this.renderConfigurations(this.props.configurations,t)))},n.prototype.renderNodeSizeSliders=function(t,e){var n=this;return t.map(function(t,r){var o="node-size-slider-"+r;return u.createElement(m.default,{className:o,key:o,value:t.nodeSize,label:t.name+" - Node Size",max:20,min:1,onChange:n.onNodeSizeChange(r),style:e})})},n.prototype.renderConfigurations=function(t,e){var n,r,o=[];try{for(var a=c(t),i=a.next();!i.done;i=a.next()){var s=i.value,u=s.name.toLowerCase().split(" ").join("-");switch(s.type){case f.CONFIGURATION_COMPONENT_TYPE.SLIDER:o.push(this.renderConfigurationSlider(s,u,e));break;case f.CONFIGURATION_COMPONENT_TYPE.RADIO:o.push(this.renderConfigurationRadioButton(s,u))}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},n.prototype.renderConfigurationSlider=function(t,e,n){return u.createElement(m.default,{className:e,key:e,value:t.values.current,label:t.name,max:t.values.max,min:t.values.min,onChange:t.onChange,style:n})},n.prototype.renderConfigurationRadioButton=function(t,e){return u.createElement(v.default,{key:"radio-group-"+e,id:e,options:t.values.options,onChange:t.onChange})},n}(u.Component);e.ContactMapClass=g,e.ContactMapWithDefaultProps=h.withDefaultProps(e.defaultContactMapProps,g);var C=function(t){return u.createElement(p.SecondaryStructureContext.Consumer,null,function(n){return u.createElement(d.default.Consumer,null,function(r){return u.createElement(e.ContactMapWithDefaultProps,a({},t,r,n))})})};e.ContactMap=C,e.default=C},"./src/component/NGLComponent.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n("./node_modules/ngl/dist/ngl.esm.js"),l=n("./node_modules/react/index.js"),d=n("./node_modules/semantic-ui-react/dist/es/index.js"),p=n("./src/context/ResidueContext.ts"),f=n("./src/context/SecondaryStructureContext.tsx"),h=n("./src/helper/NGLHelper.ts"),y=n("./src/helper/ReactHelper.ts");e.defaultNGLProps=a({data:void 0,height:400},p.initialResidueContext,f.initialSecondaryStructureContext,{padding:0,width:400}),e.initialNGLState={activeRepresentations:new Array,residueOffset:0,stage:void 0,structureComponent:void 0};var v=function(t){function n(n){var r=t.call(this,n)||this;return r.state=e.initialNGLState,r.canvas=null,r.onClick=function(t){var e=r.props,n=e.addCandidateResidues,o=e.addLockedResiduePair,a=e.candidateResidues,i=e.removeCandidateResidues,c=e.removeNonLockedResidues,u=e.removeLockedResiduePair,l=r.state.structureComponent;if(t&&l){if(t.picker&&"distance"===t.picker.type)u([t.distance.atom1.resno+r.state.residueOffset,t.distance.atom2.resno+r.state.residueOffset]);else if(t.atom||t.closestBondAtom){var d=(t.atom||t.closestBondAtom).resno+r.state.residueOffset;a.length>=1?(o(s(a,[d])),i()):n([d])}}else c()},r.onCanvasLeave=function(){(0,r.props.removeNonLockedResidues)()},r}return o(n,t),n.prototype.componentDidMount=function(){if(this.canvas){var t=new u.Stage(this.canvas);this.setState({stage:t});var e=this.props.data;e&&this.addStructureToStage(e,t)}},n.prototype.componentWillUnmount=function(){var t=this.state.stage;t&&(t.dispose(),this.setState({activeRepresentations:[],stage:void 0}))},n.prototype.componentDidUpdate=function(t,e){var n,r,o=this.props.data,a=this.state,i=a.stage,u=a.structureComponent,l=o&&o!==t.data;if(o&&i&&l)i.removeAllComponents(),this.addStructureToStage(o,i);else if(i&&u){var d=this.props,p=d.candidateResidues,f=d.hoveredResidues,h=d.lockedResiduePairs,y=d.selectedSecondaryStructures;if(f!==t.hoveredResidues||p!==t.candidateResidues||h!==t.lockedResiduePairs||y!==t.selectedSecondaryStructures){try{for(var v=c(this.state.activeRepresentations),m=v.next();!m.done;m=v.next()){var g=m.value;u.removeRepresentation(g)}}catch(t){n={error:t}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}this.setState({activeRepresentations:s(this.highlightCandidateResidues(u,s(p,f).filter(function(t,e,n){return n.indexOf(t)===e}).sort()),this.highlightLockedDistancePairs(u,h),this.highlightSecondaryStructures(u))})}i.viewer.requestRender()}},n.prototype.render=function(){var t=this,e=this.props,n=e.height,r=e.padding,o=e.width;return l.createElement("div",{className:"NGLComponent",style:{padding:r}},l.createElement("div",{className:"NGLCanvas",ref:function(e){return t.canvas=e},style:{height:n,width:o},onMouseLeave:this.onCanvasLeave}),l.createElement(d.GridRow,null,l.createElement(d.Button,{onClick:this.props.removeAllLockedResiduePairs},"Remove All Locked Distance Pairs")))},n.prototype.addStructureToStage=function(t,e){var n=this,r=e.addComponentFromObject(t);this.setState({residueOffset:t.residueStore.resno[0],structureComponent:r}),e.defaultFileRepresentation(r),r.stage.mouseControls.add("hoverPick",function(t,e){return n.onHover(t,e)}),e.signals.clicked.add(this.onClick)},n.prototype.onHover=function(t,e){var n=this.props,r=n.addHoveredResidues,o=n.candidateResidues,a=n.hoveredResidues,i=n.removeHoveredResidues;this.state.structureComponent&&(e&&(e.atom||e.closestBondAtom)?r([(e.atom||e.closestBondAtom).resno+this.state.residueOffset]):0===o.length&&0!==a.length&&i())},n.prototype.highlightCandidateResidues=function(t,e){var n=new Array;if(e.length>=1){var r=this.state.residueOffset,o=e.map(function(t){return t-r});if(n.push(h.createBallStickRepresentation(t,o)),o.length>=2){var a=o.join(".CA, ")+".CA";n.push(h.createDistanceRepresentation(t,a))}}return n},n.prototype.highlightLockedDistancePairs=function(t,e){var n=this.state.residueOffset,r=new Array;return e.forEach(function(e){var o=e.map(function(t){return t-n});if(r.push(h.createBallStickRepresentation(t,o)),o.length>=2){var a=o.join(".CA, ")+".CA";r.push(h.createDistanceRepresentation(t,a))}}),r},n.prototype.highlightSecondaryStructures=function(t){var e,n,r=this.props.selectedSecondaryStructures,o=new Array;try{for(var a=c(r),i=a.next();!i.done;i=a.next()){var s=i.value;o.push(h.createSecStructRepresentation(t,s))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o},n}(l.Component);e.NGLComponentClass=v,e.NGLComponentWithDefaultProps=y.withDefaultProps(e.defaultNGLProps,v);var m=function(t){return l.createElement(f.SecondaryStructureContext.Consumer,null,function(n){return l.createElement(p.default.Consumer,null,function(r){return l.createElement(e.NGLComponentWithDefaultProps,a({},t,r,n))})})};e.NGLComponent=m,e.default=m},"./src/component/PredictedContactMap.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./src/context/ResidueContext.ts"),u=n("./src/data/chell-data.ts"),l=n("./src/data/CouplingContainer.ts"),d=n("./src/helper/ReactHelper.ts"),p=n("./src/component/chart/ContactMapChart.tsx"),f=n("./src/component/ContactMap.tsx");e.defaultPredictedContactMapProps=a({correctColor:"#ff0000",data:{couplingScores:new l.CouplingContainer},height:400,incorrectColor:"#000000"},c.initialResidueContext,{observedColor:"#0000ff",padding:0,width:400}),e.initialPredictedContactMapState={chainLength:-1,linearDistFilter:5,measuredContactDistFilter:5,measuredProximity:u.CONTACT_DISTANCE_PROXIMITY.CLOSEST,numPredictionsToShow:-1,pointsToPlot:[]};var h=function(t){function n(n){var r=t.call(this,n)||this;return r.state=e.initialPredictedContactMapState,r.onLinearDistFilterChange=function(){return function(t){r.setState({linearDistFilter:t})}},r.onNumPredictionsToShowChange=function(){return function(t){r.setState({numPredictionsToShow:t})}},r.onMeasuredProximityChange=function(){return function(t){r.setState({measuredProximity:Object.values(u.CONTACT_DISTANCE_PROXIMITY)[t]})}},r.getContactMapConfigs=function(){return[{name:"Calculate Distance: Closest Atom - C-Alpha",onChange:r.onMeasuredProximityChange(),type:u.CONFIGURATION_COMPONENT_TYPE.RADIO,values:{current:Object.keys(u.CONTACT_DISTANCE_PROXIMITY).indexOf(r.state.measuredProximity),max:1,min:0,options:Object.values(u.CONTACT_DISTANCE_PROXIMITY)}},{name:"Linear Distance Filter (|i - j|)",onChange:r.onLinearDistFilterChange(),type:u.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:r.state.linearDistFilter,max:10,min:1}},{name:"Top N Predictions to Show",onChange:r.onNumPredictionsToShowChange(),type:u.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:r.state.numPredictionsToShow,max:r.state.chainLength,min:1}}]},r}return o(n,t),n.prototype.componentDidUpdate=function(t,e){var n=this.props,r=n.correctColor,o=n.data,a=n.incorrectColor,i=n.observedColor,s=this.state,c=s.linearDistFilter,u=s.measuredContactDistFilter,d=s.measuredProximity,f=s.numPredictionsToShow;if(o.couplingScores!==t.data.couplingScores||c!==e.linearDistFilter||u!==e.measuredContactDistFilter||d!==e.measuredProximity||f!==e.numPredictionsToShow){var h=o.pdbData?o.pdbData.generateCouplingsAmendedWithPDB(o.couplingScores.rankedContacts,d):new l.CouplingContainer(o.couplingScores.rankedContacts),y=h.chainLength,v=h.getObservedContacts(u,c),m=h.getPredictedContacts(f,c),g=(m.correct.length/m.predicted.length*100).toFixed(2),C=[p.generateChartDataEntry("x+y",{start:i,end:"rgb(100,177,200)"},"Known Structure Contact","(from PDB structure)",4,v),p.generateChartDataEntry("x+y",a,"Predicted Contact","(N="+f+", L="+y+")",4,m.predicted),p.generateChartDataEntry("x+y",r,"Correct Prediction","(N="+m.correct.length+", "+g+"%)",6,m.correct)];this.setState({chainLength:y,numPredictionsToShow:o.couplingScores!==t.data.couplingScores?Math.floor(y/2):f,pointsToPlot:C})}},n.prototype.render=function(){var t=this.props,e=t.data,n=i(t,["data"]),r=this.state,o=r.chainLength,c=r.pointsToPlot;return s.createElement("div",{id:"PredictedContactMapComponent"},s.createElement(f.default,a({chainLength:o,configurations:this.getContactMapConfigs(),data:{computedPoints:c,secondaryStructures:e.pdbData?[e.pdbData.secondaryStructureSections]:[]}},n)))},n}(s.Component);e.PredictedContactMapClass=h,e.PredictedContactMap=d.withDefaultProps(e.defaultPredictedContactMapProps,h),e.default=e.PredictedContactMap},"./src/component/SpringComponent.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("./node_modules/d3/index.js"),c=n("./node_modules/pixi.js/lib/index.js"),u=n("./node_modules/react/index.js"),l=n("./src/context/CellContext.ts"),d=n("./src/helper/ReactHelper.ts");e.defaultSpringProps=a({canvasBackgroundColor:13421772,data:{links:[],nodes:[]},height:450},l.initialCellContext,{padding:0,selectedCategory:"",width:450}),e.SpringComponentWithDefaultProps=d.withDefaultProps(e.defaultSpringProps,function(t){function e(e){var n=t.call(this,e)||this;return n.pixiApp=new c.Application,n.nodeSprites=new c.Container,n.edgeSprites=new c.Container,n.state=a({},n.state),n}return o(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.height,n=t.width;this.pixiApp=new c.Application(n,e,{backgroundColor:this.props.canvasBackgroundColor,view:this.canvasElement});var r=this.pixiApp,o=this.props,a=o.data,i=o.selectedCategory;a&&(r.stage.removeChildren(),this.nodeSprites=new c.Container,this.edgeSprites=new c.Container,this.generateNodeSprites(a.nodes,this.nodeSprites,i),this.generateLinesSprite(a.links,this.edgeSprites,i),this.centerCanvas(a),r.stage.addChild(this.edgeSprites),r.stage.addChild(this.nodeSprites))},e.prototype.componentDidUpdate=function(t,e){var n=this,r=this.props,o=r.data,a=r.selectedCategory;if(o&&o!==t.data){var i=this.pixiApp;i.stage.removeChildren(),this.nodeSprites=new c.Container,this.edgeSprites=new c.Container,this.generateNodeSprites(o.nodes,this.nodeSprites,a),this.generateLinesSprite(o.links,this.edgeSprites,a),this.centerCanvas(o),i.stage.addChild(this.edgeSprites),i.stage.addChild(this.nodeSprites)}else a!==t.selectedCategory?(this.updateNodeSprites(o.nodes,this.nodeSprites,function(t){return t.category===a}),this.edgeSprites.removeChildren(),this.generateLinesSprite(o.links,this.edgeSprites,a),this.centerCanvas(o)):this.props.currentCells!==t.currentCells&&(this.updateNodeSprites(o.nodes,this.nodeSprites,function(t){return-1!==n.props.currentCells.indexOf(t.number)}),this.edgeSprites.removeChildren(),this.generateLinesSprite(o.links,this.edgeSprites,a),this.centerCanvas(o))},e.prototype.render=function(){var t=this,e=this.props,n=e.height,r=e.padding,o=e.width;return u.createElement("div",{id:"SpringComponent",style:{padding:r}},u.createElement("canvas",{ref:function(e){return t.canvasElement=e||void 0},style:{height:n,width:o}}))},e.prototype.generateLinesSprite=function(t,e,n){var r,o;void 0===t&&(t=[]);var a=new c.Graphics,s=this.props,u=s.height,l=s.width;try{for(var d=i(t),p=d.next();!p.done;p=d.next()){var f=p.value,h=f.source,y=f.target;n&&h.category!==n&&y.category!==n||(a.lineStyle(5,16711680,1),a.moveTo(h.x,h.y),a.lineTo(y.x,y.y))}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var v=a.getBounds(),m=new c.Rectangle(v.x,v.y,Math.max(l,v.width),Math.max(u,v.height)),g=this.pixiApp.renderer.generateTexture(a,c.SCALE_MODES.LINEAR,l/u,m),C=new c.Sprite(g);C.x=m.x,C.y=m.y,e.addChild(C)},e.prototype.generateNodeSprites=function(t,e,n){var r,o;void 0===t&&(t=[]);try{for(var a=i(t),s=a.next();!s.done;s=a.next()){var u=s.value,l=new c.Graphics;l.beginFill(u.colorHex),l.drawCircle(0,0,16),l.endFill();var d=new c.Sprite(this.pixiApp.renderer.generateTexture(l));d.x=u.x,d.y=u.y,n&&u.category!==n&&(d.alpha=.1),d.anchor.set(.5,.5),d.interactive=!0,d.scale.set(.5),e.addChild(d)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}},e.prototype.updateNodeSprites=function(t,e,n){void 0===t&&(t=[]);for(var r=0;r<e.children.length;++r){var o=t[r],a=e.children[r];n(o)?a.alpha=1:a.alpha=.1}},e.prototype.centerCanvas=function(t){var e=this.edgeSprites,n=this.nodeSprites,r=this.props,o=r.height,a=r.width,i=t.nodes.map(function(t){return t.x}),c=t.nodes.map(function(t){return t.y}),u=s.max(i),l=s.max(c),d=s.min(i),p=s.min(c),f=u-d+50,h=l-p+50,y=.85/Math.max(f/a,h/o),v=y-this.nodeSprites.scale.x,m=a/2-(u+d)/2*y-n.position.x,g=o/2+30-(l+p)/2*y-n.position.y;n.position.x+=m,n.position.y+=g,n.scale.x+=v,n.scale.y+=v,e.position=n.position,e.scale=n.scale},e}(u.Component));var p=function(t){return u.createElement(l.default.Consumer,null,function(n){var r=n.currentCells;return u.createElement(e.SpringComponentWithDefaultProps,a({},t,{currentCells:r}))})};e.SpringComponent=p,e.default=p},"./src/component/TComponent.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),s=n("./src/context/CellContext.ts"),c=n("./src/helper/ReactHelper.ts"),u=n("./src/component/chart/PlotlyChart.tsx"),l=n("./src/component/chart/PlotlyChart.tsx");e.defaultTComponentProps={data:[[0],[0]],height:400,padding:0,pointColor:"#000000",width:400};var d=c.withDefaultProps(e.defaultTComponentProps,function(t){function e(e){var n=t.call(this,e)||this;return n.onMouseSelect=function(t){return function(e){e.points&&t(e.points.map(function(t){return t.pointNumber}))}},n.state=a({},n.state),n}return o(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.data,r=e.height,o=e.padding,c=e.pointColor,d=e.width;return i.createElement("div",{id:"TComponent",style:{padding:o}},i.createElement(s.default.Consumer,null,function(e){var o=e.addCells;return i.createElement(l.default,{config:a({},u.defaultPlotlyConfig,{modeBarButtons:[["zoomOut2d","zoomIn2d"],["resetScale2d","autoScale2d"],["select2d","pan2d"]]}),data:[{marker:{color:c},mode:"markers",type:"scatter",x:n.map(function(t){return t[0]}),xaxis:"x",y:n.map(function(t){return t[1]}),yaxis:"y"}],layout:a({},u.defaultPlotlyLayout,{height:r,width:d,yaxis:{autorange:!0}}),onSelectedCallback:t.onMouseSelect(o)})}))},e}(i.Component));e.TComponent=d,e.default=d},"./src/component/VizSelectorPanel.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),i=n("./node_modules/semantic-ui-react/dist/es/index.js"),s=n("./src/data/chell-data.ts"),c=n("./src/helper/ReactHelper.ts"),u=n("./src/component/NGLComponent.tsx"),l=n("./src/component/PredictedContactMap.tsx"),d=n("./src/component/SpringComponent.tsx"),p=n("./src/component/TComponent.tsx");e.defaultVizPanelProps={data:{},height:450,initialViz:s.VIZ_TYPE["T-SNE"],padding:15,supportedVisualizations:[],width:450},e.initialVizPanelState={selectedViz:e.defaultVizPanelProps.initialViz};var f=c.withDefaultProps(e.defaultVizPanelProps,function(t){function n(n){var r=t.call(this,n)||this;return r.state=e.initialVizPanelState,r.onVizSelect=function(t,e){r.setState({selectedViz:e.value})},r.generateDropdownItems=function(t){return t.map(function(t){return{key:t,text:t,value:t}}).sort(function(t,e){return t.key.localeCompare(e.key)})},r.state={selectedViz:n.initialViz},r}return o(n,t),n.prototype.render=function(){var t=this.props,e=t.data,n=t.supportedVisualizations,r=t.width;return a.createElement("div",{className:"VizSelectorPanel",style:{width:r}},a.createElement(i.Dropdown,{options:this.generateDropdownItems(n),fluid:!0,onChange:this.onVizSelect,defaultValue:this.props.initialViz}),a.createElement(i.Card,{fluid:!0,raised:!0},this.renderVizContainer(this.state.selectedViz,e)))},n.prototype.renderVizContainer=function(t,e){var n=this.props.padding,r=this.props.height-2*n,o=this.props.width-2*n;switch(t){case s.VIZ_TYPE["T-SNE"]:return a.createElement(p.default,{data:e["T-SNE"],height:r,padding:n,width:o});case s.VIZ_TYPE.SPRING:return a.createElement(d.default,{data:e.Spring,height:r,padding:n,width:o});case s.VIZ_TYPE.NGL:return a.createElement(u.default,{data:e.NGL,height:r,padding:n,width:o});case s.VIZ_TYPE.CONTACT_MAP:return a.createElement(l.default,{data:e["Contact Map"],height:r,padding:n,width:o});default:throw new Error("Unknown viz: "+t)}},n}(a.Component));e.VizSelectorPanel=f,e.default=f},"./src/component/chart/ContactMapChart.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n},s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},c=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var u=n("./node_modules/react/index.js"),l=n("./src/data/SecondaryStructureAxis.ts"),d=n("./src/helper/PlotlyHelper.ts"),p=n("./src/helper/ReactHelper.ts"),f=n("./src/component/chart/PlotlyChart.tsx"),h={candidateResidues:new Array,dataTransformFn:d.generateScatterGLData,heightModifier:.3,legendModifiers:{y:-.1},marginModifiers:{b:40},range:100,secondaryStructures:[]};e.generateChartDataEntry=function(t,e,n,r,o,i,s){return void 0===s&&(s={}),a({hoverinfo:t,marker:"string"==typeof e?{color:e}:{colorscale:[[0,"rgb(12,50,102)"],[.1,"rgb(17,83,150)"],[.2,"rgb(40,114,175)"],[.3,"rgb(71,147,193)"],[.4,"rgb(111,175,209)"],[.5,"rgb(160,202,222)"],[.6,"rgb(200,219,237)"],[.7,"rgb(224,235,246)"],[.8,"rgb(247,251,255)"],[.9,"rgb(249,253,255)"],[1,"rgb(255,255,255)"]]},name:n,nodeSize:o,points:i,subtitle:r},s)};var y=function(t){function e(e){var n=t.call(this,e)||this;return n.state={plotlyData:[]},n}return o(e,t),e.prototype.componentDidUpdate=function(t){var e=this.props,n=e.contactData,r=e.dataTransformFn,o=e.secondaryStructures;if(t.contactData!==n||t.secondaryStructures!==o){var a=c(n.map(function(t){return r(t,!0)}));o.forEach(function(t,e){var n=new l.default(t,e).axis,r=Array.from(n.values()).reduce(function(t,e){return t.push.apply(t,c([e.x,e.y])),t},new Array);a.push.apply(a,c(r))}),this.setState({plotlyData:a})}},e.prototype.render=function(){var t=this.props,e=t.contactData,n=t.heightModifier,r=t.legendModifiers,o=t.marginModifiers,s=t.range,c=i(t,["contactData","heightModifier","legendModifiers","marginModifiers","range"]),l=this.state.plotlyData;return u.createElement(f.default,a({data:l,layout:{height:f.defaultPlotlyLayout.height+f.defaultPlotlyLayout.height*n,legend:{orientation:"h",y:r.y*e.length,yanchor:"bottom"},margin:{b:e.length*o.b},showlegend:!0,xaxis:{autorange:!1,nticks:10,range:[1,s],showline:!0,tickmode:"auto",title:"Residue #"},yaxis:{autorange:!1,nticks:10,range:[1,s].reverse(),showline:!0,tickmode:"auto",title:"Residue #"}}},c))},e}(u.Component);e.ContactMapChart=p.withDefaultProps(h,y),e.default=e.ContactMapChart},"./src/component/chart/PlotlyChart.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},l=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var d=n("./node_modules/deep-equal/index.js"),p=n("./node_modules/immutable/dist/immutable.js"),f=n("./node_modules/react/index.js"),h=n("./node_modules/plotly.js/dist/plotly.js"),y=n("./src/helper/ReactHelper.ts");!function(t){t.bar="bar",t.pointcloud="pointcloud",t.scatter="scatter",t.scattergl="scattergl",t.scatter3d="scatter3d"}(e.PLOTLY_CHART_TYPE||(e.PLOTLY_CHART_TYPE={})),e.defaultPlotlyConfig={displayModeBar:!1,scrollZoom:!0},e.defaultPlotlyLayout={autosize:!0,dragmode:"zoom",height:400,hovermode:"closest",legend:{},margin:{b:10,l:40,r:10,t:10},showlegend:!1,title:"",width:400},e.defaultPlotlyChartProps={config:{},data:[],layout:{}};var v=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.plotlyCanvas=null,n.plotlyFormattedData=[],n.canvasRef=null,n.resize=function(){n.plotlyCanvas&&h.Plots.resize(n.plotlyCanvas)},n.draw=function(){return i(n,void 0,void 0,function(){var t,e,n,r;return s(this,function(o){switch(o.label){case 0:return t=this.props,e=t.layout,n=t.config,this.plotlyFormattedData=u(this.plotlyFormattedData),this.plotlyCanvas?(r=this,[4,h.react(this.plotlyCanvas,this.plotlyFormattedData,this.getMergedLayout(e,this.plotlyFormattedData),this.getMergedConfig(n))]):[3,2];case 1:r.plotlyCanvas=o.sent(),o.label=2;case 2:return[2]}})})},n.generatePlotlyAxis=function(t){return Array.from(t.values()).filter(function(t){return t.length>=2}).map(function(t){var e,n=t.substr(0,1),r=Number.parseInt(t.substr(1));return(e={})[n+"axis"+r]={domain:[1-.05*(r-1),1-.05*(r-2)],visible:!1},e}).reduce(function(t,e){return Object.assign(t,a({},e))},{})},n.getMergedConfig=function(t){return void 0===t&&(t={}),Object.assign({},p.fromJS(Object.assign({},e.defaultPlotlyConfig)).mergeDeep(p.fromJS(Object.assign({},t))).toJS())},n.getMergedLayout=function(t,r){return void 0===t&&(t={}),void 0===r&&(r=[]),Object.assign({},p.fromJS(Object.assign({},a({},e.defaultPlotlyLayout,n.deriveAxisParams(r)))).mergeDeep(p.fromJS(Object.assign({},t))).toJS())},n.onClick=function(t){var e=n.props.onClickCallback;e&&e(t)},n.onHover=function(t){var e=n.props.onHoverCallback;e&&e(t)},n.onSelect=function(t){var e=n.props.onSelectedCallback;e&&e(t)},n.onUnHover=function(t){var e=n.props.onUnHoverCallback;e&&e(t)},n}return o(n,t),n.prototype.attachListeners=function(){this.plotlyCanvas&&(this.plotlyCanvas.on("plotly_click",this.onClick),this.plotlyCanvas.on("plotly_selected",this.onSelect),this.plotlyCanvas.on("plotly_hover",this.onHover),this.plotlyCanvas.on("plotly_unhover",this.onUnHover)),window.removeEventListener("resize",this.resize),window.addEventListener("resize",this.resize)},n.prototype.componentDidUpdate=function(t){var e=this.props,n=e.data,r=e.layout,o=e.config;JSON.stringify(n)===JSON.stringify(t.data)&&d(r,t.layout)&&d(o,t.config)||(this.plotlyFormattedData=p.fromJS(n).toJS(),this.draw())},n.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var t,e,n,r,o;return s(this,function(a){switch(a.label){case 0:return!this.canvasRef||this.plotlyCanvas?[3,2]:(t=this.props,e=t.data,n=t.layout,r=t.config,this.plotlyFormattedData=p.fromJS(e).toJS(),o=this,[4,h.react(this.canvasRef,this.plotlyFormattedData,this.getMergedLayout(n,this.plotlyFormattedData),this.getMergedConfig(r))]);case 1:o.plotlyCanvas=a.sent(),this.attachListeners(),this.draw(),a.label=2;case 2:return[2]}})})},n.prototype.componentWillUnmount=function(){this.plotlyCanvas&&(h.purge(this.plotlyCanvas),this.plotlyCanvas=null),window.removeEventListener("resize",this.resize)},n.prototype.render=function(){var t=this;return f.createElement("div",{className:"plotly-chart",ref:function(e){return t.canvasRef=e||null},style:{marginBottom:5}})},n.prototype.deriveAxisParams=function(t){var e,n,r=new Set,o=new Set;try{for(var i=l(t),s=i.next();!s.done;s=i.next()){var c=s.value,u=c.xaxis,d=c.yaxis;u&&r.add(u),d&&o.add(d)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return a({},this.generatePlotlyAxis(r),this.generatePlotlyAxis(o),{xaxis:{domain:[0,1-.05*r.size],range:[30]},yaxis:{domain:[0,1-.05*r.size],range:[30]}})},n}(f.Component);e.PlotlyChartClass=v;var m=y.withDefaultProps(e.defaultPlotlyChartProps,v);e.PlotlyChart=m,e.default=m},"./src/component/widget/ChellRadioGroup.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),i=n("./node_modules/semantic-ui-react/dist/es/index.js"),s=function(t){function e(e){var n=t.call(this,e)||this;return n.handleChange=function(t){return function(e,r){n.setState({selectedIndex:t}),n.props.onChange&&n.props.onChange(t)}},n.state={selectedIndex:0},n}return o(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.id,r=e.options;return a.createElement(i.Form,null,a.createElement(i.Form.Field,null,"How to calculate distance between two residues:"),r.map(function(e,r){return a.createElement(i.Form.Field,{key:n+"-"+e},a.createElement(i.Radio,{label:e.toLocaleLowerCase(),name:e,value:r,checked:t.state.selectedIndex===r,onChange:t.handleChange(r)}))}))},e}(a.Component);e.ChellRadioGroup=s,e.default=s},"./src/component/widget/ChellSlider.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/rc-slider/es/index.js"),s=n("./node_modules/react/index.js");n("./node_modules/rc-slider/assets/index.css");var c=function(t){function e(e){var n=t.call(this,e)||this;return n.onAfterChange=function(t){return function(e){t&&t(e),n.setState({value:e})}},n.onChange=function(t){return function(e){t&&t(e),n.setState({value:e})}},n.state={value:e.value},n}return o(e,t),e.prototype.componentDidUpdate=function(t,e){var n=this.props.value;n!==this.state.value&&this.setState({value:n})},e.prototype.render=function(){var t=this.props,e=t.className,n=t.value,r=t.hideLabelValue,o=t.max,c=t.min,u=t.label,l=t.onAfterChange,d=t.onChange,p=t.sliderProps,f=t.style;return s.createElement("div",{className:e,style:{padding:20}},!r&&s.createElement("p",null,u+": "+this.state.value),s.createElement(i.default,a({max:o,min:c,onAfterChange:this.onAfterChange(l),onChange:this.onChange(d),style:f,value:n},p)))},e}(s.Component);e.ChellSlider=c,e.default=c},"./src/container/VizPanelContainer.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}c((r=r.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},u=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},l=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var d=n("./node_modules/react/index.js"),p=n("./node_modules/semantic-ui-react/dist/es/index.js"),f=n("./src/component/VizSelectorPanel.tsx"),h=n("./src/context/ChellContext.tsx"),y=n("./src/helper/DataHelper.ts"),v=n("./src/helper/ReactHelper.ts");e.defaultVizPanelProps={initialVisualizations:[],numPanels:1},e.initialVizPanelState={currentDataDir:"",data:{}};var m=function(t){function n(n){var r=t.call(this,n)||this;return r.state=e.initialVizPanelState,r.onDataDirChange=function(t,e){r.setState({currentDataDir:e.value})},r.state=a({},r.state,{currentDataDir:n.dataDirs[0]}),r}return o(n,t),n.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var t,e,n,r,o,i,u,l,d;return s(this,function(s){switch(s.label){case 0:n={},s.label=1;case 1:s.trys.push([1,6,7,8]),r=c(this.props.supportedVisualizations),o=r.next(),s.label=2;case 2:return o.done?[3,5]:(i=o.value,u=n,l=i,[4,y.fetchAppropriateData(i,this.state.currentDataDir)]);case 3:u[l]=s.sent(),s.label=4;case 4:return o=r.next(),[3,2];case 5:return[3,8];case 6:return d=s.sent(),t={error:d},[3,8];case 7:try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}return[7];case 8:return[4,this.setState({data:a({},n)})];case 9:return s.sent(),[2]}})})},n.prototype.componentDidUpdate=function(t,e){return i(this,void 0,void 0,function(){var t,n,r,o,i,u,l,d,p;return s(this,function(s){switch(s.label){case 0:if(e.currentDataDir===this.state.currentDataDir)return[3,10];r={},s.label=1;case 1:s.trys.push([1,6,7,8]),o=c(this.props.supportedVisualizations),i=o.next(),s.label=2;case 2:return i.done?[3,5]:(u=i.value,l=r,d=u,[4,y.fetchAppropriateData(u,this.state.currentDataDir)]);case 3:l[d]=s.sent(),s.label=4;case 4:return i=o.next(),[3,2];case 5:return[3,8];case 6:return p=s.sent(),t={error:p},[3,8];case 7:try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}return[7];case 8:return[4,this.setState({data:a({},r)})];case 9:s.sent(),s.label=10;case 10:return[2]}})})},n.prototype.render=function(){return d.createElement(p.Grid,{className:"VizPanelContainer",columns:this.props.numPanels,centered:!0,relaxed:!0},d.createElement(p.GridRow,{columns:1,centered:!0},d.createElement(p.Dropdown,{className:"viz-panel-container-dropdown",onChange:this.onDataDirChange,options:l(this.props.dataDirs.map(function(t){return{key:t,text:t,value:t}})),placeholder:"Select Data Directory",search:!0})),d.createElement(h.default,null,this.renderPanels(this.props.numPanels,this.state.data,this.props.initialVisualizations).map(function(t,e){return d.createElement(p.GridColumn,{key:e},t)})))},n.prototype.renderPanels=function(t,e,n){for(var r=[],o=0;o<t;++o)r.push(d.createElement(f.default,{data:e,initialViz:n[o],supportedVisualizations:this.props.supportedVisualizations}));return r},n}(d.Component);e.VizPanelContainerClass=m;var g=v.withDefaultProps(e.defaultVizPanelProps,m);e.VizPanelContainer=g,e.default=g},"./src/context/CellContext.ts":function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/react/index.js");e.initialCellContext={addCells:function(t){},currentCells:[],removeAllCells:function(t){},removeCells:function(t){}};var a=o.createContext(r({},e.initialCellContext));e.CellContext=a,e.default=a},"./src/context/ChellContext.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),s=n("./src/context/CellContext.ts"),c=n("./src/context/ResidueContext.ts"),u=n("./src/context/SecondaryStructureContext.tsx");e.initialState={cellContext:a({},s.initialCellContext),residueContext:a({},c.initialResidueContext),secondaryStructureContext:a({},u.initialSecondaryStructureContext)};var l=function(t){function n(n){var r=t.call(this,n)||this;return r.state=e.initialState,r.onAddCells=function(t){r.setState({cellContext:a({},r.state.cellContext,{currentCells:t})})},r.onRemoveAllCells=function(){r.setState({cellContext:a({},r.state.cellContext,{currentCells:[]})})},r.onRemoveCells=function(t){var e=r.state.cellContext.currentCells;r.setState({cellContext:a({},r.state.cellContext,{currentCells:e.filter(function(e){return-1===t.indexOf(e)})})})},r.onAddCandidateResidues=function(t){r.setState({residueContext:a({},r.state.residueContext,{candidateResidues:t.sort()})})},r.onAddHoveredResidues=function(t){r.setState({residueContext:a({},r.state.residueContext,{hoveredResidues:t.sort()})})},r.onAddLockedResiduePair=function(t){var e=r.state.residueContext.lockedResiduePairs,n=t.sort(),o=n.toString();if(!e.has(o)){var i=new Map(e);i.set(o,n),r.setState({residueContext:a({},r.state.residueContext,{lockedResiduePairs:i})})}},r.onClearAllResidues=function(){r.setState({residueContext:a({},r.state.residueContext,{candidateResidues:[],hoveredResidues:[],lockedResiduePairs:new Map})})},r.onRemoveAllLockedResiduePairs=function(){r.setState({residueContext:a({},r.state.residueContext,{lockedResiduePairs:new Map})})},r.onRemoveCandidateResidue=function(){r.setState({residueContext:a({},r.state.residueContext,{candidateResidues:[]})})},r.onRemoveHoveredResidues=function(){r.setState({residueContext:a({},r.state.residueContext,{hoveredResidues:[]})})},r.onRemoveLockedResiduePair=function(t){var e=t.sort().join(","),n=r.state.residueContext.lockedResiduePairs;if(n.has(e)){var o=new Map(n);o.delete(e),r.setState({residueContext:a({},r.state.residueContext,{lockedResiduePairs:o})})}},r.onRemoveNonLockedResidues=function(){r.setState({residueContext:a({},r.state.residueContext,{candidateResidues:[],hoveredResidues:[]})})},r.onToggleLockedResiduePair=function(t){var e=r.state.residueContext.lockedResiduePairs,n=t.sort(),o=n.toString(),i=new Map(e);e.has(o)?i.delete(o):i.set(o,n),r.setState({residueContext:a({},r.state.residueContext,{lockedResiduePairs:i})})},r.state=a({},r.state,{cellContext:a({},r.state.cellContext,{addCells:r.onAddCells,removeAllCells:r.onRemoveAllCells,removeCells:r.onRemoveCells}),residueContext:a({},r.state.residueContext,{addCandidateResidues:r.onAddCandidateResidues,addHoveredResidues:r.onAddHoveredResidues,addLockedResiduePair:r.onAddLockedResiduePair,clearAllResidues:r.onClearAllResidues,removeAllLockedResiduePairs:r.onRemoveAllLockedResiduePairs,removeCandidateResidues:r.onRemoveCandidateResidue,removeHoveredResidues:r.onRemoveHoveredResidues,removeLockedResiduePair:r.onRemoveLockedResiduePair,removeNonLockedResidues:r.onRemoveNonLockedResidues,toggleLockedResiduePair:r.onToggleLockedResiduePair}),secondaryStructureContext:a({},r.state.secondaryStructureContext)}),r}return o(n,t),n.prototype.render=function(){return i.createElement(u.SecondaryStructureContextHandler,null,i.createElement(s.default.Provider,{value:this.state.cellContext},i.createElement(c.default.Provider,{value:this.state.residueContext},this.props.children)))},n}(i.Component);e.ChellContext=l,e.default=l},"./src/context/ResidueContext.ts":function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n("./node_modules/react/index.js");e.initialResidueContext={addCandidateResidues:function(t){},addHoveredResidues:function(t){},addLockedResiduePair:function(t){},candidateResidues:[],clearAllResidues:function(){},hoveredResidues:[],lockedResiduePairs:new Map,removeAllLockedResiduePairs:function(){},removeCandidateResidues:function(){},removeHoveredResidues:function(){},removeLockedResiduePair:function(t){},removeNonLockedResidues:function(t){},toggleLockedResiduePair:function(t){}};var a=o.createContext(r({},e.initialResidueContext));e.ResidueContext=a,e.default=a},"./src/context/SecondaryStructureContext.tsx":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n("./node_modules/react/index.js");e.initialSecondaryStructureContext={addSecondaryStructure:function(t){},clearSecondaryStructure:function(){},removeSecondaryStructure:function(t){},selectedSecondaryStructures:new Array,toggleSecondaryStructure:function(t){}};var c=function(t){function e(e){var n=t.call(this,e)||this;return n.onAddSecondaryStructure=function(){return function(t){n.setState({selectedSecondaryStructures:i(n.state.selectedSecondaryStructures,[t])})}},n.onClearSecondaryStructure=function(){return function(){n.setState({selectedSecondaryStructures:new Array})}},n.onRemoveSecondaryStructure=function(){return function(t){var e=n.state.selectedSecondaryStructures;n.setState({selectedSecondaryStructures:e.filter(function(n,r){return r!==e.indexOf(t)})})}},n.onToggleSecondaryStructure=function(){return function(t){n.state.selectedSecondaryStructures.includes(t)?n.onRemoveSecondaryStructure()(t):n.onAddSecondaryStructure()(t)}},n.state={addSecondaryStructure:n.onAddSecondaryStructure(),clearSecondaryStructure:n.onClearSecondaryStructure(),removeSecondaryStructure:n.onRemoveSecondaryStructure(),selectedSecondaryStructures:new Array,toggleSecondaryStructure:n.onToggleSecondaryStructure()},n}return o(e,t),e.prototype.render=function(){return s.createElement(u.Provider,{value:this.state},this.props.children)},e}(s.Component);e.SecondaryStructureContextHandler=c;var u=s.createContext(e.initialSecondaryStructureContext);e.SecondaryStructureContext=u,e.default=u},"./src/data/Chell1DSection.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){void 0===n&&(n=e),this.label=t,this.sectionEnd=0,this.sectionStart=0,this.sectionEnd=Math.max(n,e),this.sectionStart=Math.min(e,n)}return Object.defineProperty(t.prototype,"end",{get:function(){return this.sectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.sectionEnd-this.sectionStart+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.sectionStart},enumerable:!0,configurable:!0}),t.prototype.updateStart=function(t){t>this.sectionEnd?(this.sectionStart=this.sectionEnd,this.sectionEnd=t):this.sectionStart=t},t.prototype.updateEnd=function(t){t<this.sectionStart?(this.sectionEnd=this.sectionStart,this.sectionStart=t):this.sectionEnd=t},t}();e.Chell1DSection=r,e.default=r},"./src/data/ChellPDB.ts":function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("./node_modules/ngl/dist/ngl.esm.js"),i=n("./src/helper/DataHelper.ts"),s=n("./src/data/chell-data.ts"),c=n("./src/data/Chell1DSection.ts"),u=n("./src/data/CouplingContainer.ts"),l=function(){function t(){this.nglData=new a.Structure,this.NGL_C_ALPHA_INDEX="CA|C"}return Object.defineProperty(t.prototype,"secondaryStructureSections",{get:function(){var t=new Array;return this.nglData.eachResidue(function(e){if(e.isProtein()){var n="C";if(e.isSheet())n="E";else if(e.isHelix())n="H";else if(e.isTurn())return;t.length>=1&&t[t.length-1].label===n?t[t.length-1].updateEnd(e.resno):t.push(new c.default(n,e.resno))}}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondaryStructure",{get:function(){var t=new Array;return this.nglData.eachResidue(function(e){if(e.isProtein()){var n="C";if(e.isSheet())n="E";else if(e.isHelix())n="H";else if(e.isTurn())return;t.push({resno:e.resno,structId:n})}}),t},enumerable:!0,configurable:!0}),t.createPDB=function(e){return void 0===e&&(e=""),r(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return n=new t,r=n,[4,i.fetchNGLDataFromFile(e)];case 1:return r.nglData=o.sent(),[2,n]}})})},t.prototype.generateCouplingsAmendedWithPDB=function(t,e){var n=this,r=this.nglData.residueStore,o=new u.CouplingContainer(t),a=r.resno[0],i=this.nglData.atomMap.dict[this.NGL_C_ALPHA_INDEX];return this.nglData.eachResidue(function(t){var r=t.resno-a;n.nglData.eachResidue(function(c){if(t.isProtein()&&c.isProtein()){var u=c.resno-a;if(e===s.CONTACT_DISTANCE_PROXIMITY.C_ALPHA){var l=n.getCAlphaAtomIndexFromResidue(r,i),d=n.getCAlphaAtomIndexFromResidue(u,i);o.addCouplingScore({dist:n.nglData.getAtomProxy(l).distanceTo(n.nglData.getAtomProxy(d)),i:t.resno,j:c.resno})}else o.addCouplingScore({dist:n.getMinDistBetweenResidues(r,u),i:t.resno,j:c.resno})}})}),o},t.prototype.getCAlphaAtomIndexFromResidue=function(t,e){for(var n=this.nglData.residueStore,r=n.atomOffset[t],o=n.atomCount[t],a=r;n.residueTypeId[a]!==e&&a<r+o;)a++;return a},t.prototype.getMinDistBetweenResidues=function(t,e){for(var n=this.nglData.residueStore,r=n.atomCount[t],o=n.atomCount[e],a=n.atomOffset[t],i=n.atomOffset[e],s=Number.MAX_SAFE_INTEGER,c=0;c<r;++c)for(var u=0;u<o;++u)s=Math.min(s,this.nglData.getAtomProxy(a+c).distanceTo(this.nglData.getAtomProxy(i+u)));return s},t}();e.ChellPDB=l},"./src/data/CouplingContainer.ts":function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){var e,n;void 0===t&&(t=[]);var o=this;this.contacts=new Array,this.totalStoredContacts=0,this.rowCounter=0,this.colCounter=0,this.includes=function(t,e){return void 0!==o.contacts[Math.min(t,e)-1][Math.max(t,e)-1]},this.getCouplingScore=function(t,e){return o.contacts[Math.min(t,e)-1][Math.max(t,e)-1]};try{for(var a=r(t),i=a.next();!i.done;i=a.next()){var s=i.value;this.addCouplingScore(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}return Object.defineProperty(t.prototype,"allContacts",{get:function(){return this.contacts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chainLength",{get:function(){return this.contacts.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rankedContacts",{get:function(){return Array.from(this).sort(function(t,e){return t.cn&&e.cn?e.cn-t.cn:t.cn&&!e.cn?-1:!t.cn&&e.cn?1:0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalContacts",{get:function(){return this.totalStoredContacts},enumerable:!0,configurable:!0}),t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(t){for(var e=this.rowCounter;e<this.contacts.length;++e)if(this.contacts[e]){for(var n=this.colCounter;n<this.contacts[e].length;++n){var r=this.contacts[e][n];if(r)return this.rowCounter=e,this.colCounter=n+1,{done:!1,value:r}}this.colCounter=0}return this.rowCounter=0,this.colCounter=0,{done:!0,value:null}},t.prototype.getObservedContacts=function(t,e){var n,o;void 0===t&&(t=5),void 0===e&&(e=5);var a=new Array;try{for(var i=r(this),s=i.next();!s.done;s=i.next()){var c=s.value;c.dist<=t&&Math.abs(c.i-c.j)>=e&&a.push(c)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return a},t.prototype.getPredictedContacts=function(t,e,n){var o,a;void 0===e&&(e=5),void 0===n&&(n=5);var i={correct:new Array,predicted:new Array};try{for(var s=r(this.rankedContacts.filter(function(t){return Math.abs(t.i-t.j)>=e}).slice(0,t)),c=s.next();!c.done;c=s.next()){var u=c.value;u.dist<n&&i.correct.push(u),i.predicted.push(u)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return i},t.prototype.addCouplingScore=function(t){var e=t.i,n=t.j,r=Math.min(e,n)-1,o=Math.max(e,n)-1;this.contacts[r]||(this.contacts[r]=new Array),this.contacts[r][o]?this.contacts[r][o]=Object.assign(this.contacts[r][o],t):(this.totalStoredContacts++,this.contacts[r][o]=t)},t}();e.CouplingContainer=o},"./src/data/SecondaryStructureAxis.ts":function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n={C:"red",E:"green",H:"blue"});var a=this;this.colorMap=n,this.axes=new Map,this.setupSecondaryStructureAxes=function(t,e){var n,r;try{for(var i=o(t),s=i.next();!s.done;s=i.next()){var c=s.value;console.log(c);var u=c.end,l=c.label,d=c.start;a.axes.get(l)||a.axes.set(l,{x:a.generateXAxisSecStructSegment(l,e),y:a.generateYAxisSecStructSegment(l,e)}),a.axes.get(l).x.x.push(d,d,u,u),a.axes.get(l).x.y.push(null,1,1,null),a.axes.get(l).y.y.push(d,d,u,u),a.axes.get(l).y.x.push(null,1,1,null)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},this.generateXAxisSecStructSegment=function(t,e){return r({},a.secondaryStructureAxisDefaults(t),{orientation:"h",x:[],xaxis:"x",y:[],yaxis:"y"+e})},this.generateYAxisSecStructSegment=function(t,e){return r({},a.secondaryStructureAxisDefaults(t),{orientation:"v",x:[],xaxis:"x"+e,y:[],yaxis:"y"})},this.secondaryStructureAxisDefaults=function(t){return{connectgaps:!1,hoverinfo:"name",line:{color:a.colorMap[t],width:5},mode:"lines",name:t,showlegend:!1,type:"scatter"}},this.setupSecondaryStructureAxes(t,e+2)}return Object.defineProperty(t.prototype,"axis",{get:function(){return this.axes},enumerable:!0,configurable:!0}),t}();e.SecondaryStructureAxis=a,e.default=a},"./src/data/chell-data.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.CONTACT_MAP="Contact Map",t.NGL="NGL",t.SPRING="Spring",t["T-SNE"]="T-SNE"}(e.VIZ_TYPE||(e.VIZ_TYPE={})),function(t){t.CLOSEST="CLOSEST",t.C_ALPHA="C-"}(e.CONTACT_DISTANCE_PROXIMITY||(e.CONTACT_DISTANCE_PROXIMITY={})),function(t){t.RADIO="RADIO",t.SLIDER="SLIDER"}(e.CONFIGURATION_COMPONENT_TYPE||(e.CONFIGURATION_COMPONENT_TYPE={})),function(t){t.G="310_HELIX",t.H="ALPHA_HELIX",t.I="PI_HELIX",t.T="HYDROGEN_BONDED_TURN",t.E="BETA_SHEET",t.B="BETA_BRIDGE",t.S="BEND",t.C="COIL"}(e.SECONDARY_STRUCTURE_CODES||(e.SECONDARY_STRUCTURE_CODES={}))},"./src/helper/DataHelper.ts":function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this;Object.defineProperty(e,"__esModule",{value:!0});var s=n("./src/data/CouplingContainer.ts"),c=n("./src/helper/FetchHelper.ts"),u=n("./node_modules/ngl/dist/ngl.esm.js"),l=n("./src/data/chell-data.ts"),d=n("./src/data/ChellPDB.ts");e.fetchAppropriateData=function(t,n){return r(i,void 0,void 0,function(){return o(this,function(r){switch(t){case l.VIZ_TYPE["T-SNE"]:return[2,y(n)];case l.VIZ_TYPE.SPRING:return[2,p(n)];case l.VIZ_TYPE.NGL:return[2,e.fetchNGLDataFromDirectory(n)];case l.VIZ_TYPE.CONTACT_MAP:return[2,e.fetchContactMapData(n)];default:return[2,Promise.reject({error:"Currently no appropriate data getter for "+t})]}return[2]})})};var p=function(t){return r(i,void 0,void 0,function(){var e,n,r,a,i,s,c;return o(this,function(o){switch(o.label){case 0:return[4,h(t+"/coordinates.txt")];case 1:return e=o.sent(),[4,v(t+"/graph_data.json")];case 2:return n=o.sent(),[4,f(t+"/categorical_coloring_data.json")];case 3:for(r=o.sent(),a={},i=0;i<n.nodes.length;++i)s=n.nodes[i],a[s.number]=s,s.number in e&&(s.fixed=!0,s.x=e[s.number][0],s.y=e[s.number][1]),c=r.label_list[i],s.category=c,s.colorHex=r.label_colors[c];return n.links.forEach(function(t){var e=a[t.source],n=a[t.target];e&&n&&(t.source=e,t.target=n)}),[2,n]}})})},f=function(t){return r(i,void 0,void 0,function(){var e,n,r,i,s,u,l,d,p,f,h;return o(this,function(o){switch(o.label){case 0:return[4,c.fetchJSONFile(t)];case 1:if(r=o.sent(),i=Object.keys(r)[0],!(s=r[i]).label_colors||!s.label_list)throw new Error("Unable to parse color data - does it have keys named 'label_colors' and 'label_list'");u={label_colors:{},label_list:s.label_list},l=r[Object.keys(r)[0]].label_colors;try{for(d=a(Object.keys(l)),p=d.next();!p.done;p=d.next())f=p.value,"number"==typeof(h=l[f])?u.label_colors[f]=h:"#"===h.charAt(0)?u.label_colors[f]=Number.parseInt("0x"+h.slice(1)):u.label_colors[f]=Number.parseInt(h)}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}return[2,u]}})})},h=function(t){return r(i,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:return[4,c.fetchCSVFile(t)];case 1:return e=r.sent(),n=[],e.split("\n").forEach(function(t,e,r){var o=t.split(",");if(o.length>=3){var a=parseFloat(o[1].trim()),i=parseFloat(o[2].trim()),s=parseInt(o[0].trim(),10);n[s]=[a,i]}else if(0!==t.localeCompare(""))throw new Error("Unable to parse coordinate data - Row "+e+" does not have at least 3 columns!")}),[2,n]}})})},y=function(t){return r(i,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:return[4,c.fetchCSVFile(t+"/tsne_output.csv")];case 1:return e=r.sent(),n=[],e.split("\n").forEach(function(t,e,r){if(t.length>0){var o=t.split(","),a=[parseFloat(o[0]),parseFloat(o[1])];n.push(a)}}),[2,n]}})})},v=function(t){return r(i,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,c.fetchJSONFile(t)];case 1:if(!(e=n.sent()).nodes||!e.links)throw new Error("Unable to parse graph data - does it have keys named 'nodes' and 'links'");return[2,e]}})})};e.fetchNGLDataFromDirectory=function(t){return r(i,void 0,void 0,function(){var n;return o(this,function(r){return 0===t.length?[2,Promise.reject("Empty path.")]:(n=t+"/protein.pdb",[2,e.fetchNGLDataFromFile(n)])})})},e.fetchNGLDataFromFile=function(t){return r(i,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,u.autoLoad(t)];case 1:return[2,e.sent()]}})})},e.fetchContactMapData=function(t){return r(i,void 0,void 0,function(){var n,r,a;return o(this,function(o){switch(o.label){case 0:return 0===t.length?[2,Promise.reject("Empty path.")]:(n=["coupling_scores.csv","distance_map.csv"],[4,Promise.all(n.map(function(e){return c.fetchCSVFile(t+"/"+e)}))]);case 1:return r=o.sent(),[4,d.ChellPDB.createPDB(t+"/protein.pdb")];case 2:return a=o.sent(),[2,{couplingScores:e.getCouplingScoresData(r[0]),pdbData:a,secondaryStructures:a.rawsecondaryStructure}]}})})},e.getCouplingScoresData=function(t){var e=new s.CouplingContainer;return t.split("\n").slice(1).filter(function(t){return t.split(",").length>=13}).map(function(t){var n=t.split(",");e.addCouplingScore({i:parseFloat(n[0]),A_i:n[1],j:parseFloat(n[2]),A_j:n[3],fn:parseFloat(n[4]),cn:parseFloat(n[5]),segment_i:n[6],segment_j:n[7],probability:parseFloat(n[8]),dist_intra:parseFloat(n[9]),dist_multimer:parseFloat(n[10]),dist:parseFloat(n[11]),precision:parseFloat(n[12])})}),e},e.getSecondaryStructureData=function(t){return t.split("\n").slice(1).filter(function(t){return t.split(",").length>=3}).map(function(t){var e=t.split(",");return{resno:parseFloat(e[1]),structId:e[2]}})}},"./src/helper/FetchHelper.ts":function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this;Object.defineProperty(e,"__esModule",{value:!0}),e.fetchCSVFile=function(t){return r(a,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,fetch(t)];case 1:return(e=n.sent()).ok?[4,e.text()]:[3,3];case 2:return[2,n.sent()];case 3:throw new Error(i("CSV",e))}})})},e.fetchJSONFile=function(t){return r(a,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,fetch(t)];case 1:return(e=n.sent()).ok?[4,e.json()]:[3,3];case 2:return[2,n.sent()];case 3:throw new Error(i("JSON",e))}})})};var i=function(t,e){return"Chell-viz error fetching "+t+" File!\nStatus: "+e.status+"\nMessage: "+e.statusText+"\n"}},"./src/helper/NGLHelper.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDistanceRepresentation=function(t,e,n,r){return void 0===n&&(n="skyblue"),void 0===r&&(r="angstrom"),t.addRepresentation("distance",{atomPair:[e.split(",")],color:n,labelUnit:r})},e.createBallStickRepresentation=function(t,e){return t.addRepresentation("ball+stick",{sele:e.join(", ")})},e.createSecStructRepresentation=function(t,e,n,r){return void 0===n&&(n=2),void 0===r&&(r="yellow"),t.addRepresentation("cartoon",{color:r,radiusScale:n,sele:e.start+"-"+e.end})}},"./src/helper/PlotlyHelper.ts":function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n("./src/component/chart/PlotlyChart.tsx");e.generateScatterGLData=function(t,n){return void 0===n&&(n=!1),r({},e.generateScatterData(t,n),{type:i.PLOTLY_CHART_TYPE.scattergl})},e.generateScatterData=function(t,e){void 0===e&&(e=!1);var n=t.marker,r=t.points,o=t.subtitle,s=t.name,c=r.map(function(t){return t.i}),u=r.map(function(t){return t.j}),l=r.map(function(t){return t.dist});return{hoverinfo:"x+y+z",marker:Object.assign({color:e?l.concat(l):l,size:t.nodeSize},n),mode:"markers",name:s+" "+o,type:i.PLOTLY_CHART_TYPE.scatter,x:e?a(c,u):c,y:e?a(u,c):u,z:e?a(l,l):l}},e.generateFloat32ArrayFromContacts=function(t){var e=new Float32Array(2*t.length);return t.forEach(function(t,n){e[2*n]=t.i,e[2*n+1]=t.j}),e},e.generatePointCloudData=function(t,n){void 0===n&&(n=!1);var o=t.points,s=e.generateFloat32ArrayFromContacts(o);return{marker:r({},t.marker,{sizemax:2*t.nodeSize,sizemin:t.nodeSize}),mode:"markers",type:i.PLOTLY_CHART_TYPE.pointcloud,xy:n?new Float32Array(a(Array.from(s),Array.from(s).slice().reverse())):s}}},"./src/helper/ReactHelper.ts":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.withDefaultProps=function(t,e){return e.defaultProps=t,e}}});