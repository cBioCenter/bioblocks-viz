!function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)a=s[d],o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={1:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push(["./index.tsx",0]),n()}({"./index.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-dom/index.js"),i=n("./src/ChellVizApp.tsx");o.render(r.createElement(i.ChellVizApp,null),document.getElementById("root"))},"./src/ChellVizApp.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=n("./src/container/VizPanelContainer.tsx"),u=n("./src/data/chell-data.ts"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return s.createElement("div",{id:"ChellVizApp"},s.createElement(c.Grid,{centered:!0,divided:"vertically"},s.createElement(c.GridRow,null,s.createElement(l.default,{dataDirs:a(["1","2","3"].map(function(e){return"assets/contact_map/example"+e}),["assets/beta_lactamase"]),supportedVisualizations:[u.VIZ_TYPE.CONTACT_MAP,u.VIZ_TYPE.NGL],initialVisualizations:[u.VIZ_TYPE.CONTACT_MAP,u.VIZ_TYPE.NGL],numPanels:2})),s.createElement(c.GridRow,null,s.createElement(l.default,{dataDirs:["centroids","centroids_subset","ngl","spring2/full"].map(function(e){return"assets/"+e}),initialVisualizations:[u.VIZ_TYPE["T-SNE"],u.VIZ_TYPE.SPRING],supportedVisualizations:[u.VIZ_TYPE["T-SNE"],u.VIZ_TYPE.SPRING],numPanels:2}))))},t}(s.Component);t.ChellVizApp=d},"./src/component/ContactMap.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/react/index.js"),u=n("./node_modules/semantic-ui-react/dist/es/index.js"),d=n("./src/context/ResidueContext.ts"),p=n("./src/data/chell-data.ts"),h=n("./src/helper/ReactHelper.ts"),f=n("./src/component/chart/ContactMapChart.tsx"),v=n("./src/component/widget/ChellRadioGroup.tsx"),y=n("./src/component/widget/ChellSlider.tsx");t.defaultContactMapProps=i({chainLength:59,configurations:new Array,data:{computedPoints:new Array,secondaryStructures:new Array},enableSliders:!0,height:400,highlightColor:"#ff8800"},d.initialResidueContext,{onBoxSelection:void 0,padding:0,width:400}),t.initialContactMapState={pointsToPlot:new Array,showConfiguration:!1};var m=function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialContactMapState,r.onNodeSizeChange=function(e){return function(t){var n=r.state.pointsToPlot;r.setState({pointsToPlot:s(n.slice(0,e),[i({},n[e],{nodeSize:t})],n.slice(e+1))})}},r.onShowConfigurationToggle=function(){return function(){return r.setState({showConfiguration:!r.state.showConfiguration})}},r.onMouseEnter=function(e){return function(t){var n=t.points;e([n[0].x,n[0].y])}},r.onMouseClick=function(e){return function(t){var n=t.points;e([n[0].x,n[0].y])}},r.onMouseSelect=function(e){return function(t){void 0===t&&(t={points:[]});var n=t.points;e&&e(n.map(function(e){return e.x}))}},r}return o(n,e),n.prototype.componentDidMount=function(){this.setupPointsToPlot(this.props.data.computedPoints)},n.prototype.componentDidUpdate=function(e){var t=this.props,n=t.clearAllResidues,r=t.data,o=t.lockedResiduePairs;r!==e.data?(n(),this.setupPointsToPlot(r.computedPoints)):o!==e.lockedResiduePairs&&this.setupPointsToPlot(r.computedPoints,o)},n.prototype.render=function(){var e=this.props,t=e.data,n=e.enableSliders,r=e.padding,o=e.width,i=this.state.pointsToPlot,a={width:.9*o};return l.createElement("div",{id:"ContactMapComponent",style:{padding:r}},this.renderContactMapChart(i,t.secondaryStructures),n&&this.renderConfigSliders(a,i))},n.prototype.setupPointsToPlot=function(e,t){void 0===t&&(t=new Map);var n=this.props.highlightColor,r=this.state.pointsToPlot,o=r.length,a=o>=2&&r[o-1]?r[o-1].nodeSize:6,c=f.generateChartDataEntry("none",n,"Selected Res. Pairs","",a,Array.from(t.keys()).filter(function(e){return 2===t.get(e).length}).map(function(e){return{i:t.get(e)[0],j:t.get(e)[1],dist:0}}),{marker:{color:n,line:{color:n,width:3},symbol:"circle-open"}});this.setState(i({},this.state,{pointsToPlot:s(e,[c])}))},n.prototype.renderContactMapChart=function(e,t){var n=this.props,r=n.addHoveredResidues,o=n.candidateResidues,i=n.chainLength,a=n.onBoxSelection,s=n.toggleLockedResiduePair;return l.createElement(f.default,{candidateResidues:o,contactData:e,onClickCallback:this.onMouseClick(s),onHoverCallback:this.onMouseEnter(r),onSelectedCallback:this.onMouseSelect(a),range:i+5,secondaryStructures:t})},n.prototype.renderConfigSliders=function(e,t){var n=this.state.showConfiguration;return l.createElement(u.Accordion,{fluid:!0,styled:!0},l.createElement(u.Accordion.Title,{active:n,className:"contact-map-configuration-toggle",index:1,onClick:this.onShowConfigurationToggle()},l.createElement(u.Icon,{name:"dropdown"}),"Configuration"),l.createElement(u.Accordion.Content,{active:n},this.renderNodeSizeSliders(t,e),this.renderConfigurations(this.props.configurations,e)))},n.prototype.renderNodeSizeSliders=function(e,t){var n=this;return e.map(function(e,r){var o="node-size-slider-"+r;return l.createElement(y.default,{className:o,key:o,value:e.nodeSize,label:e.name+" - Node Size",max:20,min:1,onChange:n.onNodeSizeChange(r),style:t})})},n.prototype.renderConfigurations=function(e,t){var n,r,o=[];try{for(var i=c(e),a=i.next();!a.done;a=i.next()){var s=a.value,l=s.name.toLowerCase().split(" ").join("-");switch(s.type){case p.CONFIGURATION_COMPONENT_TYPE.SLIDER:o.push(this.renderConfigurationSlider(s,l,t));break;case p.CONFIGURATION_COMPONENT_TYPE.RADIO:o.push(this.renderConfigurationRadioButton(s,l))}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},n.prototype.renderConfigurationSlider=function(e,t,n){return l.createElement(y.default,{className:t,key:t,value:e.values.current,label:e.name,max:e.values.max,min:e.values.min,onChange:e.onChange,style:n})},n.prototype.renderConfigurationRadioButton=function(e,t){return l.createElement(v.default,{key:"radio-group-"+t,id:t,options:e.values.options,onChange:e.onChange})},n}(l.Component);t.ContactMapClass=m,t.ContactMapWithDefaultProps=h.withDefaultProps(t.defaultContactMapProps,m);var g=function(e){return l.createElement(d.default.Consumer,null,function(n){return l.createElement(t.ContactMapWithDefaultProps,i({},e,n))})};t.ContactMap=g,t.default=g},"./src/component/NGLComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/ngl/dist/ngl.esm.js"),l=n("./node_modules/react/index.js"),u=n("./node_modules/semantic-ui-react/dist/es/index.js"),d=n("./src/context/ResidueContext.ts"),p=n("./src/helper/NGLHelper.ts"),h=n("./src/helper/ReactHelper.ts");t.SUPPORTED_REPS=["axes","backbone","ball+stick","distance","label","line","hyperball","spacefill"],t.defaultNGLProps=i({data:void 0,height:400},d.initialResidueContext,{padding:0,width:400}),t.initialNGLState={residueOffset:0,residueSelectionRepresentations:new Map,stage:void 0,structureComponent:void 0};var f=function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialNGLState,r.canvas=null,r.onClick=function(e){var t=r.props,n=t.addCandidateResidues,o=t.addLockedResiduePair,i=t.candidateResidues,a=t.removeCandidateResidues,c=t.removeHoveredResidues,l=t.removeLockedResiduePair,u=r.state.structureComponent;if(e&&u)if(e.picker&&"distance"===e.picker.type)l([e.distance.atom1.resno+r.state.residueOffset,e.distance.atom2.resno+r.state.residueOffset]);else if(e.atom||e.closestBondAtom){var d=(e.atom||e.closestBondAtom).resno+r.state.residueOffset;i.length>=1?(o(s(i,[d])),a()):n([d])}else r.removeNonLockedRepresentations(u),a(),c()},r.onCanvasLeave=function(){var e=r.props,t=e.removeCandidateResidues,n=e.removeHoveredResidues;t(),n()},r}return o(n,e),n.prototype.componentDidMount=function(){if(this.canvas){var e=new c.Stage(this.canvas);this.setState({stage:e});var t=this.props.data;t&&this.addStructureToStage(t,e)}},n.prototype.componentWillUnmount=function(){var e=this.state.stage;e&&(e.dispose(),this.setState({residueSelectionRepresentations:new Map,stage:void 0}))},n.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.data,o=n.lockedResiduePairs,i=this.state,a=i.stage,s=i.structureComponent,c=r&&r!==e.data;r&&a&&c?(a.removeAllComponents(),this.addStructureToStage(r,a)):(s&&e.lockedResiduePairs!==o&&(this.removeHighlights(s,e.lockedResiduePairs),this.highlightResidues(s,o)),s&&this.props.hoveredResidues!==e.hoveredResidues&&(this.removeNonLockedRepresentations(s),this.highlightResidues(s,this.props.hoveredResidues)))},n.prototype.render=function(){var e=this,t=this.props,n=t.height,r=t.padding,o=t.width;return l.createElement("div",{className:"NGLComponent",style:{padding:r}},l.createElement("div",{className:"NGLCanvas",ref:function(t){return e.canvas=t},style:{height:n,width:o},onMouseLeave:this.onCanvasLeave}),l.createElement(u.GridRow,null,l.createElement(u.Button,{onClick:this.props.removeAllLockedResiduePairs},"Remove Locked Distance Pairs")))},n.prototype.addStructureToStage=function(e,t){var n=this,r=t.addComponentFromObject(e);this.setState({residueOffset:e.residueStore.resno[0],structureComponent:r}),t.defaultFileRepresentation(r),r.stage.mouseControls.add("hoverPick",function(e,t){return n.onHover(e,t)}),t.signals.clicked.add(this.onClick)},n.prototype.onHover=function(e,t){var n=this.props,r=n.addHoveredResidues,o=n.candidateResidues,i=n.hoveredResidues,a=n.removeHoveredResidues,c=this.state.structureComponent;if(c)if(t&&(t.atom||t.closestBondAtom)){var l=(t.atom||t.closestBondAtom).resno+this.state.residueOffset;this.removeNonLockedRepresentations(c),this.highlightResidues(c,[l]),r([l]),o.length>=1&&this.highlightResidues(c,s(o,[l]).sort())}else 0===o.length&&0!==i.length&&a()},n.prototype.removeHighlights=function(e,t){void 0===t&&(t=new Map);var n=this.state.residueSelectionRepresentations;Array.from(t.keys()).map(function(t){n.get(t).map(function(t){return e.removeRepresentation(t)})}),this.setState({residueSelectionRepresentations:new Map})},n.prototype.highlightResidues=function(e,t){var n=this.state.residueOffset,r=this.state.residueSelectionRepresentations;(Array.isArray(t)?new Map([["0",t]]):t).forEach(function(t){var o=t.toString(),i=t.map(function(e){return e-n});if(r.has(o)?r.get(o).map(function(t){return e.removeRepresentation(t)}):r.set(o,[]),i.length>=2){var a=i.join(".CA, ")+".CA";r.get(o).push(p.createDistanceRepresentation(e,a))}0!==i.length&&r.get(o).push(p.createBallStickRepresentation(e,i))}),this.setState({residueSelectionRepresentations:r})},n.prototype.removeNonLockedRepresentations=function(e){var t=this,n=new Map(this.state.residueSelectionRepresentations);Array.from(n.keys()).map(function(r){t.props.lockedResiduePairs.has(r)||(n.get(r).filter(function(t){return e.hasRepresentation(t)}).forEach(function(t){return e.removeRepresentation(t)}),n.delete(r))}),this.setState({residueSelectionRepresentations:n})},n}(l.Component);t.NGLComponentClass=f,t.NGLComponentWithDefaultProps=h.withDefaultProps(t.defaultNGLProps,f);var v=function(e){return l.createElement(d.default.Consumer,null,function(n){return l.createElement(t.NGLComponentWithDefaultProps,i({},e,n))})};t.NGLComponent=v,t.default=v},"./src/component/PredictedContactMap.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./src/context/ResidueContext.ts"),l=n("./src/data/chell-data.ts"),u=n("./src/data/ChellPDB.ts"),d=n("./src/data/CouplingContainer.ts"),p=n("./src/helper/ReactHelper.ts"),h=n("./src/component/chart/ContactMapChart.tsx"),f=n("./src/component/ContactMap.tsx");t.defaultPredictedContactMapProps=i({correctColor:"#ff0000",data:{couplingScores:new d.CouplingContainer,pdbData:new u.ChellPDB,secondaryStructures:[]},height:400,incorrectColor:"#000000"},c.initialResidueContext,{observedColor:"#0000ff",padding:0,width:400}),t.initialPredictedContactMapState={chainLength:-1,linearDistFilter:5,measuredContactDistFilter:5,measuredProximity:l.CONTACT_DISTANCE_PROXIMITY.CLOSEST,numPredictionsToShow:-1,pointsToPlot:[]};var v=function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialPredictedContactMapState,r.onLinearDistFilterChange=function(){return function(e){r.setState({linearDistFilter:e})}},r.onNumPredictionsToShowChange=function(){return function(e){r.setState({numPredictionsToShow:e})}},r.onMeasuredProximityChange=function(){return function(e){r.setState({measuredProximity:Object.values(l.CONTACT_DISTANCE_PROXIMITY)[e]})}},r.getContactMapConfigs=function(){return[{name:"Calculate Distance: Closest Atom - C-Alpha",onChange:r.onMeasuredProximityChange(),type:l.CONFIGURATION_COMPONENT_TYPE.RADIO,values:{current:Object.keys(l.CONTACT_DISTANCE_PROXIMITY).indexOf(r.state.measuredProximity),max:1,min:0,options:Object.values(l.CONTACT_DISTANCE_PROXIMITY)}},{name:"Linear Distance Filter (|i - j|)",onChange:r.onLinearDistFilterChange(),type:l.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:r.state.linearDistFilter,max:10,min:1}},{name:"Top N Predictions to Show",onChange:r.onNumPredictionsToShowChange(),type:l.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:r.state.numPredictionsToShow,max:r.state.chainLength,min:1}}]},r}return o(n,e),n.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.correctColor,o=n.data,i=n.incorrectColor,a=n.observedColor,s=this.state,c=s.linearDistFilter,l=s.measuredContactDistFilter,u=s.measuredProximity,d=s.numPredictionsToShow;if(o.couplingScores!==e.data.couplingScores||c!==t.linearDistFilter||l!==t.measuredContactDistFilter||u!==t.measuredProximity||d!==t.numPredictionsToShow){var p=o.pdbData.generateCouplingsAmendedWithPDB(o.couplingScores.rankedContacts,u),f=p.chainLength,v=p.getObservedContacts(l,c),y=p.getPredictedContacts(d,c),m=(y.correct.length/y.predicted.length*100).toFixed(2),g=[h.generateChartDataEntry("x+y",{start:a,end:"rgb(100,177,200)"},"Known Structure Contact","(from PDB structure)",4,v),h.generateChartDataEntry("x+y",i,"Predicted Contact","(N="+d+", L="+f+")",4,y.predicted),h.generateChartDataEntry("x+y",r,"Correct Prediction","(N="+y.correct.length+", "+m+"%)",6,y.correct)];this.setState({chainLength:f,numPredictionsToShow:o.couplingScores!==e.data.couplingScores?Math.floor(f/2):d,pointsToPlot:g})}},n.prototype.render=function(){var e=this.props,t=e.data,n=a(e,["data"]),r=this.state,o=r.chainLength,c=r.pointsToPlot;return s.createElement("div",{id:"PredictedContactMapComponent"},s.createElement(f.default,i({chainLength:o,configurations:this.getContactMapConfigs(),data:{computedPoints:c,secondaryStructures:t.secondaryStructures}},n)))},n}(s.Component);t.PredictedContactMapClass=v,t.PredictedContactMap=p.withDefaultProps(t.defaultPredictedContactMapProps,v),t.default=t.PredictedContactMap},"./src/component/SpringComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/d3/index.js"),c=n("./node_modules/pixi.js/lib/index.js"),l=n("./node_modules/react/index.js"),u=n("./src/context/CellContext.ts"),d=n("./src/helper/ReactHelper.ts");t.defaultSpringProps=i({canvasBackgroundColor:13421772,data:{links:[],nodes:[]},height:450},u.initialCellContext,{padding:0,selectedCategory:"",width:450}),t.SpringComponentWithDefaultProps=d.withDefaultProps(t.defaultSpringProps,function(e){function t(t){var n=e.call(this,t)||this;return n.pixiApp=new c.Application,n.nodeSprites=new c.Container,n.edgeSprites=new c.Container,n.state=i({},n.state),n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.height,n=e.width;this.pixiApp=new c.Application(n,t,{backgroundColor:this.props.canvasBackgroundColor,view:this.canvasElement});var r=this.pixiApp,o=this.props,i=o.data,a=o.selectedCategory;i&&(r.stage.removeChildren(),this.nodeSprites=new c.Container,this.edgeSprites=new c.Container,this.generateNodeSprites(i.nodes,this.nodeSprites,a),this.generateLinesSprite(i.links,this.edgeSprites,a),this.centerCanvas(i),r.stage.addChild(this.edgeSprites),r.stage.addChild(this.nodeSprites))},t.prototype.componentDidUpdate=function(e,t){var n=this,r=this.props,o=r.data,i=r.selectedCategory;if(o&&o!==e.data){var a=this.pixiApp;a.stage.removeChildren(),this.nodeSprites=new c.Container,this.edgeSprites=new c.Container,this.generateNodeSprites(o.nodes,this.nodeSprites,i),this.generateLinesSprite(o.links,this.edgeSprites,i),this.centerCanvas(o),a.stage.addChild(this.edgeSprites),a.stage.addChild(this.nodeSprites)}else i!==e.selectedCategory?(this.updateNodeSprites(o.nodes,this.nodeSprites,function(e){return e.category===i}),this.edgeSprites.removeChildren(),this.generateLinesSprite(o.links,this.edgeSprites,i),this.centerCanvas(o)):this.props.currentCells!==e.currentCells&&(this.updateNodeSprites(o.nodes,this.nodeSprites,function(e){return-1!==n.props.currentCells.indexOf(e.number)}),this.edgeSprites.removeChildren(),this.generateLinesSprite(o.links,this.edgeSprites,i),this.centerCanvas(o))},t.prototype.render=function(){var e=this,t=this.props,n=t.height,r=t.padding,o=t.width;return l.createElement("div",{id:"SpringComponent",style:{padding:r}},l.createElement("canvas",{ref:function(t){return e.canvasElement=t||void 0},style:{height:n,width:o}}))},t.prototype.generateLinesSprite=function(e,t,n){var r,o;void 0===e&&(e=[]);var i=new c.Graphics,s=this.props,l=s.height,u=s.width;try{for(var d=a(e),p=d.next();!p.done;p=d.next()){var h=p.value,f=h.source,v=h.target;n&&f.category!==n&&v.category!==n||(i.lineStyle(5,16711680,1),i.moveTo(f.x,f.y),i.lineTo(v.x,v.y))}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var y=i.getBounds(),m=new c.Rectangle(y.x,y.y,Math.max(u,y.width),Math.max(l,y.height)),g=this.pixiApp.renderer.generateTexture(i,c.SCALE_MODES.LINEAR,u/l,m),C=new c.Sprite(g);C.x=m.x,C.y=m.y,t.addChild(C)},t.prototype.generateNodeSprites=function(e,t,n){var r,o;void 0===e&&(e=[]);try{for(var i=a(e),s=i.next();!s.done;s=i.next()){var l=s.value,u=new c.Graphics;u.beginFill(l.colorHex),u.drawCircle(0,0,16),u.endFill();var d=new c.Sprite(this.pixiApp.renderer.generateTexture(u));d.x=l.x,d.y=l.y,n&&l.category!==n&&(d.alpha=.1),d.anchor.set(.5,.5),d.interactive=!0,d.scale.set(.5),t.addChild(d)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},t.prototype.updateNodeSprites=function(e,t,n){void 0===e&&(e=[]);for(var r=0;r<t.children.length;++r){var o=e[r],i=t.children[r];n(o)?i.alpha=1:i.alpha=.1}},t.prototype.centerCanvas=function(e){var t=this.edgeSprites,n=this.nodeSprites,r=this.props,o=r.height,i=r.width,a=e.nodes.map(function(e){return e.x}),c=e.nodes.map(function(e){return e.y}),l=s.max(a),u=s.max(c),d=s.min(a),p=s.min(c),h=l-d+50,f=u-p+50,v=.85/Math.max(h/i,f/o),y=v-this.nodeSprites.scale.x,m=i/2-(l+d)/2*v-n.position.x,g=o/2+30-(u+p)/2*v-n.position.y;n.position.x+=m,n.position.y+=g,n.scale.x+=y,n.scale.y+=y,t.position=n.position,t.scale=n.scale},t}(l.Component));var p=function(e){return l.createElement(u.default.Consumer,null,function(n){var r=n.currentCells;return l.createElement(t.SpringComponentWithDefaultProps,i({},e,{currentCells:r}))})};t.SpringComponent=p,t.default=p},"./src/component/TComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),s=n("./src/context/CellContext.ts"),c=n("./src/helper/ReactHelper.ts"),l=n("./src/component/chart/PlotlyChart.tsx"),u=n("./src/component/chart/PlotlyChart.tsx");t.defaultTComponentProps={data:[[0],[0]],height:400,padding:0,pointColor:"#000000",width:400};var d=c.withDefaultProps(t.defaultTComponentProps,function(e){function t(t){var n=e.call(this,t)||this;return n.onMouseSelect=function(e){return function(t){t.points&&e(t.points.map(function(e){return e.pointNumber}))}},n.state=i({},n.state),n}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.data,r=t.height,o=t.padding,c=t.pointColor,d=t.width;return a.createElement("div",{id:"TComponent",style:{padding:o}},a.createElement(s.default.Consumer,null,function(t){var o=t.addCells;return a.createElement(u.default,{config:i({},l.defaultPlotlyConfig,{modeBarButtons:[["zoomOut2d","zoomIn2d"],["resetScale2d","autoScale2d"],["select2d","pan2d"]]}),data:[{marker:{color:c},mode:"markers",type:"scatter",x:n.map(function(e){return e[0]}),xaxis:"x",y:n.map(function(e){return e[1]}),yaxis:"y"}],layout:i({},l.defaultPlotlyLayout,{height:r,width:d,yaxis:{autorange:!0}}),onSelectedCallback:e.onMouseSelect(o)})}))},t}(a.Component));t.TComponent=d,t.default=d},"./src/component/VizSelectorPanel.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),a=n("./node_modules/semantic-ui-react/dist/es/index.js"),s=n("./src/component/NGLComponent.tsx"),c=n("./src/component/SpringComponent.tsx"),l=n("./src/component/TComponent.tsx"),u=n("./src/data/chell-data.ts"),d=n("./src/helper/ReactHelper.ts"),p=n("./src/component/PredictedContactMap.tsx");t.defaultVizPanelProps={data:{},height:450,initialViz:u.VIZ_TYPE["T-SNE"],padding:15,supportedVisualizations:[],width:450},t.initialVizPanelState={selectedViz:t.defaultVizPanelProps.initialViz};var h=d.withDefaultProps(t.defaultVizPanelProps,function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialVizPanelState,r.onVizSelect=function(e,t){r.setState({selectedViz:t.value})},r.generateDropdownItems=function(e){return e.map(function(e){return{key:e,text:e,value:e}}).sort(function(e,t){return e.key.localeCompare(t.key)})},r.state={selectedViz:n.initialViz},r}return o(n,e),n.prototype.render=function(){var e=this.props,t=e.data,n=e.supportedVisualizations,r=e.width;return i.createElement("div",{className:"VizSelectorPanel",style:{width:r}},i.createElement(a.Dropdown,{options:this.generateDropdownItems(n),fluid:!0,onChange:this.onVizSelect,defaultValue:this.props.initialViz}),i.createElement(a.Card,{fluid:!0,raised:!0},this.renderVizContainer(this.state.selectedViz,t)))},n.prototype.renderVizContainer=function(e,t){var n=this.props.padding,r=this.props.height-2*n,o=this.props.width-2*n;switch(e){case u.VIZ_TYPE["T-SNE"]:return i.createElement(l.default,{data:t["T-SNE"],height:r,padding:n,width:o});case u.VIZ_TYPE.SPRING:return i.createElement(c.default,{data:t.Spring,height:r,padding:n,width:o});case u.VIZ_TYPE.NGL:return i.createElement(s.default,{data:t.NGL,height:r,padding:n,width:o});case u.VIZ_TYPE.CONTACT_MAP:return i.createElement(p.default,{data:t["Contact Map"],height:r,padding:n,width:o});default:throw new Error("Unknown viz: "+e)}},n}(i.Component));t.VizSelectorPanel=h,t.default=h},"./src/component/chart/ContactMapChart.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/react/index.js"),u=n("./src/data/SecondaryStructureAxis.ts"),d=n("./src/helper/PlotlyHelper.ts"),p=n("./src/helper/ReactHelper.ts"),h=n("./src/component/chart/PlotlyChart.tsx"),f={candidateResidues:new Array,dataTransformFn:d.generateScatterGLData,heightModifier:.3,legendModifiers:{y:-.1},marginModifiers:{b:40},range:100};t.generateChartDataEntry=function(e,t,n,r,o,a,s){return void 0===s&&(s={}),i({hoverinfo:e,marker:"string"==typeof t?{color:t}:{colorscale:[[0,"rgb(12,50,102)"],[.1,"rgb(17,83,150)"],[.2,"rgb(40,114,175)"],[.3,"rgb(71,147,193)"],[.4,"rgb(111,175,209)"],[.5,"rgb(160,202,222)"],[.6,"rgb(200,219,237)"],[.7,"rgb(224,235,246)"],[.8,"rgb(247,251,255)"],[.9,"rgb(249,253,255)"],[1,"rgb(255,255,255)"]]},name:n,nodeSize:o,points:a,subtitle:r},s)};var v=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.render=function(){var e=this.props,t=(e.candidateResidues,e.contactData),n=e.dataTransformFn,r=e.heightModifier,o=e.legendModifiers,s=e.marginModifiers,d=e.range,p=e.secondaryStructures,f=a(e,["candidateResidues","contactData","dataTransformFn","heightModifier","legendModifiers","marginModifiers","range","secondaryStructures"]),v=c(t.map(function(e){return n(e,!0)}));return p&&p.length>=1&&(v=c(v,new u.default(p).axis)),l.createElement(h.default,i({data:v,layout:{height:h.defaultPlotlyLayout.height+h.defaultPlotlyLayout.height*r,legend:{orientation:"h",y:o.y*t.length,yanchor:"bottom"},margin:{b:t.length*s.b},showlegend:!0,xaxis:{autorange:!1,nticks:10,range:[1,d],showline:!0,tickmode:"auto",title:"Residue #"},yaxis:{autorange:!1,nticks:10,range:[1,d].reverse(),showline:!0,tickmode:"auto",title:"Residue #"}}},f))},t}(l.Component);t.ContactMapChart=p.withDefaultProps(f,v),t.default=t.ContactMapChart},"./src/component/chart/PlotlyChart.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/deep-equal/index.js"),u=n("./node_modules/immutable/dist/immutable.js"),d=n("./node_modules/react/index.js"),p=n("./node_modules/plotly.js/dist/plotly.js"),h=n("./src/helper/ReactHelper.ts");!function(e){e.bar="bar",e.pointcloud="pointcloud",e.scatter="scatter",e.scattergl="scattergl",e.scatter3d="scatter3d"}(t.PLOTLY_CHART_TYPE||(t.PLOTLY_CHART_TYPE={})),t.defaultPlotlyConfig={displayModeBar:!1,scrollZoom:!0},t.defaultPlotlyLayout={autosize:!0,height:400,hovermode:"closest",legend:{},margin:{b:10,l:40,r:10,t:10},showlegend:!1,title:"",width:400,xaxis:{domain:[0,.95],range:[30]},xaxis2:{domain:[.95,1],visible:!1},yaxis:{domain:[0,.95],range:[30]},yaxis2:{domain:[.95,1],visible:!1}},t.defaultPlotlyChartProps={config:{},data:[],layout:{}};var f=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.plotlyCanvas=null,n.plotlyFormattedData=[],n.canvasRef=null,n.resize=function(){n.plotlyCanvas&&p.Plots.resize(n.plotlyCanvas)},n.draw=function(){return i(n,void 0,void 0,function(){var e,t,n,r;return a(this,function(o){switch(o.label){case 0:return e=this.props,t=e.layout,n=e.config,this.plotlyFormattedData=c(this.plotlyFormattedData),this.plotlyCanvas?(r=this,[4,p.react(this.plotlyCanvas,this.plotlyFormattedData,this.getMergedLayout(t),this.getMergedConfig(n))]):[3,2];case 1:r.plotlyCanvas=o.sent(),o.label=2;case 2:return[2]}})})},n.getMergedConfig=function(e){return void 0===e&&(e={}),Object.assign({},u.fromJS(Object.assign({},t.defaultPlotlyConfig)).mergeDeep(u.fromJS(Object.assign({},e))).toJS())},n.getMergedLayout=function(e){return void 0===e&&(e={}),Object.assign({},u.fromJS(Object.assign({},t.defaultPlotlyLayout)).mergeDeep(u.fromJS(Object.assign({},e))).toJS())},n.onClick=function(e){var t=n.props.onClickCallback;t&&t(e)},n.onHover=function(e){var t=n.props.onHoverCallback;t&&t(e)},n.onSelect=function(e){var t=n.props.onSelectedCallback;t&&t(e)},n.onUnHover=function(e){var t=n.props.onUnHoverCallback;t&&t(e)},n}return o(n,e),n.prototype.attachListeners=function(){this.plotlyCanvas&&(this.plotlyCanvas.on("plotly_click",this.onClick),this.plotlyCanvas.on("plotly_selected",this.onSelect),this.plotlyCanvas.on("plotly_hover",this.onHover),this.plotlyCanvas.on("plotly_unhover",this.onUnHover)),window.removeEventListener("resize",this.resize),window.addEventListener("resize",this.resize)},n.prototype.componentDidUpdate=function(e){var t=this.props,n=t.data,r=t.layout,o=t.config;JSON.stringify(n)===JSON.stringify(e.data)&&l(r,e.layout)&&l(o,e.config)||(this.plotlyFormattedData=u.fromJS(n).toJS(),this.draw())},n.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t,n,r,o;return a(this,function(i){switch(i.label){case 0:return!this.canvasRef||this.plotlyCanvas?[3,2]:(e=this.props,t=e.data,n=e.layout,r=e.config,this.plotlyFormattedData=u.fromJS(t).toJS(),o=this,[4,p.react(this.canvasRef,this.plotlyFormattedData,this.getMergedLayout(n),this.getMergedConfig(r))]);case 1:o.plotlyCanvas=i.sent(),this.attachListeners(),this.draw(),i.label=2;case 2:return[2]}})})},n.prototype.componentWillUnmount=function(){this.plotlyCanvas&&(p.purge(this.plotlyCanvas),this.plotlyCanvas=null),window.removeEventListener("resize",this.resize)},n.prototype.render=function(){var e=this;return d.createElement("div",{className:"plotly-chart",ref:function(t){return e.canvasRef=t||null},style:{marginBottom:5}})},n}(d.Component);t.PlotlyChartClass=f;var v=h.withDefaultProps(t.defaultPlotlyChartProps,f);t.PlotlyChart=v,t.default=v},"./src/component/widget/ChellRadioGroup.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),a=n("./node_modules/semantic-ui-react/dist/es/index.js"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){return function(t,r){n.setState({selectedIndex:e}),n.props.onChange&&n.props.onChange(e)}},n.state={selectedIndex:0},n}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.id,r=t.options;return i.createElement(a.Form,null,i.createElement(a.Form.Field,null,"How to calculate distance between two residues:"),r.map(function(t,r){return i.createElement(a.Form.Field,{key:n+"-"+t},i.createElement(a.Radio,{label:t.toLocaleLowerCase(),name:t,value:r,checked:e.state.selectedIndex===r,onChange:e.handleChange(r)}))}))},t}(i.Component);t.ChellRadioGroup=s,t.default=s},"./src/component/widget/ChellSlider.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/rc-slider/es/index.js"),s=n("./node_modules/react/index.js");n("./node_modules/rc-slider/assets/index.css");var c=function(e){function t(t){var n=e.call(this,t)||this;return n.onAfterChange=function(e){return function(t){e&&e(t),n.setState({value:t})}},n.onChange=function(e){return function(t){e&&e(t),n.setState({value:t})}},n.state={value:t.value},n}return o(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this.props.value;n!==this.state.value&&this.setState({value:n})},t.prototype.render=function(){var e=this.props,t=e.className,n=e.value,r=e.hideLabelValue,o=e.max,c=e.min,l=e.label,u=e.onAfterChange,d=e.onChange,p=e.sliderProps,h=e.style;return s.createElement("div",{className:t,style:{padding:20}},!r&&s.createElement("p",null,l+": "+this.state.value),s.createElement(a.default,i({max:o,min:c,onAfterChange:this.onAfterChange(u),onChange:this.onChange(d),style:h,value:n},p)))},t}(s.Component);t.ChellSlider=c,t.default=c},"./src/container/VizPanelContainer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/react/index.js"),p=n("./node_modules/semantic-ui-react/dist/es/index.js"),h=n("./src/component/VizSelectorPanel.tsx"),f=n("./src/context/ChellContext.tsx"),v=n("./src/helper/DataHelper.ts"),y=n("./src/helper/ReactHelper.ts");t.defaultVizPanelProps={initialVisualizations:[],numPanels:1},t.initialVizPanelState={currentDataDir:"",data:{}};var m=function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialVizPanelState,r.onDataDirChange=function(e,t){r.setState({currentDataDir:t.value})},r.state=i({},r.state,{currentDataDir:n.dataDirs[0]}),r}return o(n,e),n.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n,r,o,a,l,u,d;return s(this,function(s){switch(s.label){case 0:n={},s.label=1;case 1:s.trys.push([1,6,7,8]),r=c(this.props.supportedVisualizations),o=r.next(),s.label=2;case 2:return o.done?[3,5]:(a=o.value,l=n,u=a,[4,v.fetchAppropriateData(a,this.state.currentDataDir)]);case 3:l[u]=s.sent(),s.label=4;case 4:return o=r.next(),[3,2];case 5:return[3,8];case 6:return d=s.sent(),e={error:d},[3,8];case 7:try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}return[7];case 8:return[4,this.setState({data:i({},n)})];case 9:return s.sent(),[2]}})})},n.prototype.componentDidUpdate=function(e,t){return a(this,void 0,void 0,function(){var e,n,r,o,a,l,u,d,p;return s(this,function(s){switch(s.label){case 0:if(t.currentDataDir===this.state.currentDataDir)return[3,10];r={},s.label=1;case 1:s.trys.push([1,6,7,8]),o=c(this.props.supportedVisualizations),a=o.next(),s.label=2;case 2:return a.done?[3,5]:(l=a.value,u=r,d=l,[4,v.fetchAppropriateData(l,this.state.currentDataDir)]);case 3:u[d]=s.sent(),s.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return p=s.sent(),e={error:p},[3,8];case 7:try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}return[7];case 8:return[4,this.setState({data:i({},r)})];case 9:s.sent(),s.label=10;case 10:return[2]}})})},n.prototype.render=function(){return d.createElement(p.Grid,{className:"VizPanelContainer",columns:this.props.numPanels,centered:!0,relaxed:!0},d.createElement(p.GridRow,{columns:1,centered:!0},d.createElement(p.Dropdown,{className:"viz-panel-container-dropdown",onChange:this.onDataDirChange,options:u(this.props.dataDirs.map(function(e){return{key:e,text:e,value:e}})),placeholder:"Select Data Directory",search:!0})),d.createElement(f.default,null,this.renderPanels(this.props.numPanels,this.state.data,this.props.initialVisualizations).map(function(e,t){return d.createElement(p.GridColumn,{key:t},e)})))},n.prototype.renderPanels=function(e,t,n){for(var r=[],o=0;o<e;++o)r.push(d.createElement(h.default,{data:t,initialViz:n[o],supportedVisualizations:this.props.supportedVisualizations}));return r},n}(d.Component);t.VizPanelContainerClass=m;var g=y.withDefaultProps(t.defaultVizPanelProps,m);t.VizPanelContainer=g,t.default=g},"./src/context/CellContext.ts":function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/index.js");t.initialCellContext={addCells:function(e){},currentCells:[],removeAllCells:function(e){},removeCells:function(e){}};var i=o.createContext(r({},t.initialCellContext));t.CellContext=i,t.default=i},"./src/context/ChellContext.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),s=n("./src/context/CellContext.ts"),c=n("./src/context/ResidueContext.ts");t.initialState={cellContext:i({},s.initialCellContext),residueContext:i({},c.initialResidueContext)};var l=function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialState,r.onAddCells=function(e){r.setState({cellContext:i({},r.state.cellContext,{currentCells:e})})},r.onRemoveAllCells=function(){r.setState({cellContext:i({},r.state.cellContext,{currentCells:[]})})},r.onRemoveCells=function(e){var t=r.state.cellContext.currentCells;r.setState({cellContext:i({},r.state.cellContext,{currentCells:t.filter(function(t){return-1===e.indexOf(t)})})})},r.onAddCandidateResidues=function(e){r.setState({residueContext:i({},r.state.residueContext,{candidateResidues:e.sort()})})},r.onAddHoveredResidues=function(e){r.setState({residueContext:i({},r.state.residueContext,{hoveredResidues:e.sort()})})},r.onAddLockedResiduePair=function(e){var t=r.state.residueContext.lockedResiduePairs,n=e.sort(),o=n.toString();if(!t.has(o)){var a=new Map(t);a.set(o,n),r.setState({residueContext:i({},r.state.residueContext,{lockedResiduePairs:a})})}},r.onClearAllResidues=function(){r.setState({residueContext:i({},r.state.residueContext,{candidateResidues:[],hoveredResidues:[],lockedResiduePairs:new Map})})},r.onRemoveAllLockedResiduePairs=function(){r.setState({residueContext:i({},r.state.residueContext,{lockedResiduePairs:new Map})})},r.onRemoveCandidateResidue=function(){r.setState({residueContext:i({},r.state.residueContext,{candidateResidues:[]})})},r.onRemoveHoveredResidue=function(){r.setState({residueContext:i({},r.state.residueContext,{hoveredResidues:[]})})},r.onRemoveLockedResiduePair=function(e){var t=e.sort().join(","),n=r.state.residueContext.lockedResiduePairs;if(n.has(t)){var o=new Map(n);o.delete(t),r.setState({residueContext:i({},r.state.residueContext,{lockedResiduePairs:o})})}},r.onToggleLockedResiduePair=function(e){var t=r.state.residueContext.lockedResiduePairs,n=e.sort(),o=n.toString(),a=new Map(t);t.has(o)?a.delete(o):a.set(o,n),r.setState({residueContext:i({},r.state.residueContext,{lockedResiduePairs:a})})},r.state=i({},r.state,{cellContext:i({},r.state.cellContext,{addCells:r.onAddCells,removeAllCells:r.onRemoveAllCells,removeCells:r.onRemoveCells}),residueContext:i({},r.state.residueContext,{addCandidateResidues:r.onAddCandidateResidues,addHoveredResidues:r.onAddHoveredResidues,addLockedResiduePair:r.onAddLockedResiduePair,clearAllResidues:r.onClearAllResidues,removeAllLockedResiduePairs:r.onRemoveAllLockedResiduePairs,removeCandidateResidues:r.onRemoveCandidateResidue,removeHoveredResidues:r.onRemoveHoveredResidue,removeLockedResiduePair:r.onRemoveLockedResiduePair,toggleLockedResiduePair:r.onToggleLockedResiduePair})}),r}return o(n,e),n.prototype.render=function(){return a.createElement(s.default.Provider,{value:this.state.cellContext},a.createElement(c.default.Provider,{value:this.state.residueContext},this.props.children))},n}(a.Component);t.ChellContext=l,t.default=l},"./src/context/ResidueContext.ts":function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/index.js");t.initialResidueContext={addCandidateResidues:function(e){},addHoveredResidues:function(e){},addLockedResiduePair:function(e){},candidateResidues:[],clearAllResidues:function(){},hoveredResidues:[],lockedResiduePairs:new Map,removeAllLockedResiduePairs:function(){},removeCandidateResidues:function(){},removeHoveredResidues:function(){},removeLockedResiduePair:function(e){},toggleLockedResiduePair:function(e){}};var i=o.createContext(r({},t.initialResidueContext));t.ResidueContext=i,t.default=i},"./src/data/ChellPDB.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/ngl/dist/ngl.esm.js"),a=n("./src/helper/DataHelper.ts"),s=n("./src/data/chell-data.ts"),c=n("./src/data/CouplingContainer.ts"),l=function(){function e(){this.nglData=new i.Structure,this.NGL_C_ALPHA_INDEX="CA|C"}return e.createPDB=function(t){return void 0===t&&(t=""),r(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return n=new e,r=n,[4,a.fetchNGLDataFromFile(t)];case 1:return r.nglData=o.sent(),[2,n]}})})},e.prototype.generateCouplingsAmendedWithPDB=function(e,t){var n=this,r=this.nglData.residueStore,o=new c.CouplingContainer(e),i=r.resno[0],a=this.nglData.atomMap.dict[this.NGL_C_ALPHA_INDEX];return this.nglData.eachResidue(function(e){var r=e.resno-i;n.nglData.eachResidue(function(c){if(e.resno<=o.chainLength&&c.resno<=o.chainLength){var l=c.resno-i;if(t===s.CONTACT_DISTANCE_PROXIMITY.C_ALPHA){var u=n.getCAlphaAtomIndexFromResidue(r,a),d=n.getCAlphaAtomIndexFromResidue(l,a);o.addCouplingScore({dist:n.nglData.getAtomProxy(u).distanceTo(n.nglData.getAtomProxy(d)),i:e.resno,j:c.resno})}else o.addCouplingScore({dist:n.getMinDistBetweenResidues(r,l),i:e.resno,j:c.resno})}})}),o},e.prototype.getCAlphaAtomIndexFromResidue=function(e,t){for(var n=this.nglData.residueStore,r=n.atomOffset[e],o=n.atomCount[e],i=r;n.residueTypeId[i]!==t&&i<r+o;)i++;return i},e.prototype.getMinDistBetweenResidues=function(e,t){for(var n=this.nglData.residueStore,r=n.atomCount[e],o=n.atomCount[t],i=n.atomOffset[e],a=n.atomOffset[t],s=Number.MAX_SAFE_INTEGER,c=0;c<r;++c)for(var l=0;l<o;++l)s=Math.min(s,this.nglData.getAtomProxy(i+c).distanceTo(this.nglData.getAtomProxy(a+l)));return s},e}();t.ChellPDB=l},"./src/data/CouplingContainer.ts":function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t,n;void 0===e&&(e=[]);var o=this;this.contacts=new Array,this.totalStoredContacts=0,this.rowCounter=0,this.colCounter=0,this.includes=function(e,t){return void 0!==o.contacts[Math.min(e,t)-1][Math.max(e,t)-1]},this.getCouplingScore=function(e,t){return o.contacts[Math.min(e,t)-1][Math.max(e,t)-1]};try{for(var i=r(e),a=i.next();!a.done;a=i.next()){var s=a.value;this.addCouplingScore(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}return Object.defineProperty(e.prototype,"allContacts",{get:function(){return this.contacts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chainLength",{get:function(){return this.contacts.length+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rankedContacts",{get:function(){return Array.from(this).sort(function(e,t){return e.cn&&t.cn?t.cn-e.cn:e.cn&&!t.cn?-1:!e.cn&&t.cn?1:0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalContacts",{get:function(){return this.totalStoredContacts},enumerable:!0,configurable:!0}),e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(e){for(var t=this.rowCounter;t<this.contacts.length;++t)if(this.contacts[t]){for(var n=this.colCounter;n<this.contacts[t].length;++n){var r=this.contacts[t][n];if(r)return this.rowCounter=t,this.colCounter=n+1,{done:!1,value:r}}this.colCounter=0}return this.rowCounter=0,this.colCounter=0,{done:!0,value:null}},e.prototype.getObservedContacts=function(e,t){var n,o;void 0===e&&(e=5),void 0===t&&(t=5);var i=new Array;try{for(var a=r(this),s=a.next();!s.done;s=a.next()){var c=s.value;c.dist<=e&&Math.abs(c.i-c.j)>=t&&i.push(c)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i},e.prototype.getPredictedContacts=function(e,t,n){var o,i;void 0===t&&(t=5),void 0===n&&(n=5);var a={correct:new Array,predicted:new Array};try{for(var s=r(this.rankedContacts.filter(function(e){return Math.abs(e.i-e.j)>=t}).slice(0,e)),c=s.next();!c.done;c=s.next()){var l=c.value;l.dist<n&&a.correct.push(l),a.predicted.push(l)}}catch(e){o={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return a},e.prototype.addCouplingScore=function(e){var t=e.i,n=e.j,r=Math.min(t,n)-1,o=Math.max(t,n)-1;this.contacts[r]||(this.contacts[r]=new Array),this.contacts[r][o]?this.contacts[r][o]=Object.assign(this.contacts[r][o],e):(this.totalStoredContacts++,this.contacts[r][o]=e)},e}();t.CouplingContainer=o},"./src/data/SecondaryStructureAxis.ts":function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./src/data/chell-data.ts"),s=function(){return function(e,t){void 0===t&&(t={C:"red",E:"green",H:"blue"});var n=this;this.colorMap=t,this.axis=Array(),this.generateSecondaryStructureAxis=function(e){return e.length>=1?e.slice(1,e.length).reduce(function(t,r,o){return e[o].structId!==r.structId?t.push.apply(t,i(n.generateSecondaryStructAxisSegments(r))):(t[t.length-2].x.push(r.resno-1),t[t.length-2].y.push(1),t[t.length-1].x.push(1),t[t.length-1].y.push(r.resno-1)),t},n.generateSecondaryStructAxisSegments(e[0])):[]},this.generateXAxisSecStructSegment=function(e){return r({},n.secondaryStructureAxisDefaults(e),{orientation:"h",x:[e.resno-1,e.resno],xaxis:"x",y:[1,1],yaxis:"y2"})},this.generateYAxisSecStructSegment=function(e){return r({},n.secondaryStructureAxisDefaults(e),{orientation:"v",x:[1,1],xaxis:"x2",y:[e.resno-1,e.resno],yaxis:"y"})},this.generateSecondaryStructAxisSegments=function(e){return[n.generateXAxisSecStructSegment(e),n.generateYAxisSecStructSegment(e)]},this.secondaryStructureAxisDefaults=function(e){return{hoverinfo:"name",line:{color:n.colorMap[e.structId],width:"C"===e.structId?0:5},mode:"lines",name:a.SECONDARY_STRUCTURE_CODES[e.structId],showlegend:!1,type:"scatter"}},this.axis=this.generateSecondaryStructureAxis(e)}}();t.SecondaryStructureAxis=s,t.default=s},"./src/data/chell-data.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CONTACT_MAP="Contact Map",e.NGL="NGL",e.SPRING="Spring",e["T-SNE"]="T-SNE"}(t.VIZ_TYPE||(t.VIZ_TYPE={})),function(e){e.CLOSEST="CLOSEST",e.C_ALPHA="C-"}(t.CONTACT_DISTANCE_PROXIMITY||(t.CONTACT_DISTANCE_PROXIMITY={})),function(e){e.RADIO="RADIO",e.SLIDER="SLIDER"}(t.CONFIGURATION_COMPONENT_TYPE||(t.CONFIGURATION_COMPONENT_TYPE={})),function(e){e.G="310_HELIX",e.H="ALPHA_HELIX",e.I="PI_HELIX",e.T="HYDROGEN_BONDED_TURN",e.E="BETA_SHEET",e.B="BETA_BRIDGE",e.S="BEND",e.C="COIL"}(t.SECONDARY_STRUCTURE_CODES||(t.SECONDARY_STRUCTURE_CODES={}))},"./src/helper/DataHelper.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},a=this;Object.defineProperty(t,"__esModule",{value:!0});var s=n("./src/data/CouplingContainer.ts"),c=n("./src/helper/FetchHelper.ts"),l=n("./node_modules/ngl/dist/ngl.esm.js"),u=n("./src/data/chell-data.ts"),d=n("./src/data/ChellPDB.ts");t.fetchAppropriateData=function(e,n){return r(a,void 0,void 0,function(){return o(this,function(r){switch(e){case u.VIZ_TYPE["T-SNE"]:return[2,v(n)];case u.VIZ_TYPE.SPRING:return[2,p(n)];case u.VIZ_TYPE.NGL:return[2,t.fetchNGLDataFromDirectory(n)];case u.VIZ_TYPE.CONTACT_MAP:return[2,t.fetchContactMapData(n)];default:return[2,Promise.reject({error:"Currently no appropriate data getter for "+e})]}return[2]})})};var p=function(e){return r(a,void 0,void 0,function(){var t,n,r,i,a,s,c;return o(this,function(o){switch(o.label){case 0:return[4,f(e+"/coordinates.txt")];case 1:return t=o.sent(),[4,y(e+"/graph_data.json")];case 2:return n=o.sent(),[4,h(e+"/categorical_coloring_data.json")];case 3:for(r=o.sent(),i={},a=0;a<n.nodes.length;++a)s=n.nodes[a],i[s.number]=s,s.number in t&&(s.fixed=!0,s.x=t[s.number][0],s.y=t[s.number][1]),c=r.label_list[a],s.category=c,s.colorHex=r.label_colors[c];return n.links.forEach(function(e){var t=i[e.source],n=i[e.target];t&&n&&(e.source=t,e.target=n)}),[2,n]}})})},h=function(e){return r(a,void 0,void 0,function(){var t,n,r,a,s,l,u,d,p,h,f;return o(this,function(o){switch(o.label){case 0:return[4,c.fetchJSONFile(e)];case 1:if(r=o.sent(),a=Object.keys(r)[0],!(s=r[a]).label_colors||!s.label_list)throw new Error("Unable to parse color data - does it have keys named 'label_colors' and 'label_list'");l={label_colors:{},label_list:s.label_list},u=r[Object.keys(r)[0]].label_colors;try{for(d=i(Object.keys(u)),p=d.next();!p.done;p=d.next())h=p.value,"number"==typeof(f=u[h])?l.label_colors[h]=f:"#"===f.charAt(0)?l.label_colors[h]=Number.parseInt("0x"+f.slice(1)):l.label_colors[h]=Number.parseInt(f)}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return[2,l]}})})},f=function(e){return r(a,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return[4,c.fetchCSVFile(e)];case 1:return t=r.sent(),n=[],t.split("\n").forEach(function(e,t,r){var o=e.split(",");if(o.length>=3){var i=parseFloat(o[1].trim()),a=parseFloat(o[2].trim()),s=parseInt(o[0].trim(),10);n[s]=[i,a]}else if(0!==e.localeCompare(""))throw new Error("Unable to parse coordinate data - Row "+t+" does not have at least 3 columns!")}),[2,n]}})})},v=function(e){return r(a,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return[4,c.fetchCSVFile(e+"/tsne_output.csv")];case 1:return t=r.sent(),n=[],t.split("\n").forEach(function(e,t,r){if(e.length>0){var o=e.split(","),i=[parseFloat(o[0]),parseFloat(o[1])];n.push(i)}}),[2,n]}})})},y=function(e){return r(a,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,c.fetchJSONFile(e)];case 1:if(!(t=n.sent()).nodes||!t.links)throw new Error("Unable to parse graph data - does it have keys named 'nodes' and 'links'");return[2,t]}})})};t.fetchNGLDataFromDirectory=function(e){return r(a,void 0,void 0,function(){var n;return o(this,function(r){return 0===e.length?[2,Promise.reject("Empty path.")]:(n=e+"/protein.pdb",[2,t.fetchNGLDataFromFile(n)])})})},t.fetchNGLDataFromFile=function(e){return r(a,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,l.autoLoad(e)];case 1:return[2,t.sent()]}})})},t.fetchContactMapData=function(e){return r(a,void 0,void 0,function(){var n,r,i;return o(this,function(o){switch(o.label){case 0:return n=["coupling_scores.csv","distance_map.csv"],[4,Promise.all(n.map(function(t){return c.fetchCSVFile(e+"/"+t)}))];case 1:return r=o.sent(),[4,d.ChellPDB.createPDB(e+"/protein.pdb")];case 2:return i=o.sent(),[2,{couplingScores:t.getCouplingScoresData(r[0]),pdbData:i,secondaryStructures:t.getSecondaryStructureData(r[1])}]}})})},t.getCouplingScoresData=function(e){var t=new s.CouplingContainer;return e.split("\n").slice(1).filter(function(e){return e.split(",").length>=13}).map(function(e){var n=e.split(",");t.addCouplingScore({i:parseFloat(n[0]),A_i:n[1],j:parseFloat(n[2]),A_j:n[3],fn:parseFloat(n[4]),cn:parseFloat(n[5]),segment_i:n[6],segment_j:n[7],probability:parseFloat(n[8]),dist_intra:parseFloat(n[9]),dist_multimer:parseFloat(n[10]),dist:parseFloat(n[11]),precision:parseFloat(n[12])})}),t},t.getSecondaryStructureData=function(e){return e.split("\n").slice(1).filter(function(e){return e.split(",").length>=3}).map(function(e){var t=e.split(",");return{resno:parseFloat(t[1]),structId:t[2]}})}},"./src/helper/FetchHelper.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this;Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCSVFile=function(e){return r(i,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,fetch(e)];case 1:return(t=n.sent()).ok?[4,t.text()]:[3,3];case 2:return[2,n.sent()];case 3:throw new Error(a("CSV",t))}})})},t.fetchJSONFile=function(e){return r(i,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,fetch(e)];case 1:return(t=n.sent()).ok?[4,t.json()]:[3,3];case 2:return[2,n.sent()];case 3:throw new Error(a("JSON",t))}})})};var a=function(e,t){return"Chell-viz error fetching "+e+" File!\nStatus: "+t.status+"\nMessage: "+t.statusText+"\n"}},"./src/helper/NGLHelper.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDistanceRepresentation=function(e,t,n,r){return void 0===n&&(n="skyblue"),void 0===r&&(r="angstrom"),e.addRepresentation("distance",{atomPair:[t.split(",")],color:n,labelUnit:r})},t.createBallStickRepresentation=function(e,t){return e.addRepresentation("ball+stick",{sele:t.join(", ")})}},"./src/helper/PlotlyHelper.ts":function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./src/component/chart/PlotlyChart.tsx");t.generateScatterGLData=function(e,n){return void 0===n&&(n=!1),r({},t.generateScatterData(e,n),{type:a.PLOTLY_CHART_TYPE.scattergl})},t.generateScatterData=function(e,t){void 0===t&&(t=!1);var n=e.marker,r=e.points,o=e.subtitle,s=e.name,c=r.map(function(e){return e.i}),l=r.map(function(e){return e.j}),u=r.map(function(e){return e.dist});return{hoverinfo:"x+y+z",marker:Object.assign({color:t?u.concat(u):u,size:e.nodeSize},n),mode:"markers",name:s+" "+o,type:a.PLOTLY_CHART_TYPE.scatter,x:t?i(c,l):c,y:t?i(l,c):l,z:t?i(u,u):u}},t.generateFloat32ArrayFromContacts=function(e){var t=new Float32Array(2*e.length);return e.forEach(function(e,n){t[2*n]=e.i,t[2*n+1]=e.j}),t},t.generatePointCloudData=function(e,n){void 0===n&&(n=!1);var o=e.points,s=t.generateFloat32ArrayFromContacts(o);return{marker:r({},e.marker,{sizemax:2*e.nodeSize,sizemin:e.nodeSize}),mode:"markers",type:a.PLOTLY_CHART_TYPE.pointcloud,xy:n?new Float32Array(i(Array.from(s),Array.from(s).slice().reverse())):s}}},"./src/helper/ReactHelper.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDefaultProps=function(e,t){return t.defaultProps=e,t}}});