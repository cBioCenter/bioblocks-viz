!function(e){function t(t){for(var n,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],o[i]&&p.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(l&&l(t);p.length;)p.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={1:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push(["./index.tsx",0]),r()}({"./index.tsx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/react/index.js"),o=r("./node_modules/react-dom/index.js"),a=r("./src/ChellVizApp.tsx");o.render(n.createElement(a.ChellVizApp,null),document.getElementById("root"))},"./src/ChellVizApp.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/react/index.js"),s=r("./node_modules/semantic-ui-react/dist/es/index.js"),c=r("./src/container/VizPanelContainer.tsx"),u=r("./src/data/chell-data.ts"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(){return i.createElement("div",{id:"ChellVizApp"},i.createElement(s.Grid,{centered:!0,divided:"vertically"},i.createElement(s.GridRow,null,i.createElement(c.default,{dataDirs:a(["1","2","3"].map(function(e){return"assets/contact_map/example"+e}),["assets/beta_lactamase"]),supportedVisualizations:[u.VIZ_TYPE.CONTACT_MAP,u.VIZ_TYPE.NGL],initialVisualizations:[u.VIZ_TYPE.CONTACT_MAP,u.VIZ_TYPE.NGL],numPanels:2})),i.createElement(s.GridRow,null,i.createElement(c.default,{dataDirs:a(["1","2","3"].map(function(e){return"assets/contact_map/example"+e}),["assets/beta_lactamase"]),supportedVisualizations:[u.VIZ_TYPE.CONTACT_MAP,u.VIZ_TYPE.NGL,u.VIZ_TYPE.INFO_PANEL],initialVisualizations:[u.VIZ_TYPE.CONTACT_MAP,u.VIZ_TYPE.NGL,u.VIZ_TYPE.INFO_PANEL],numPanels:3}))))},t}(i.Component);t.ChellVizApp=l},"./src/component/ContactMap.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var c=r("./node_modules/react/index.js"),u=r("./node_modules/semantic-ui-react/dist/es/index.js"),l=r("./src/context/ResidueContext.ts"),d=r("./src/context/SecondaryStructureContext.tsx"),p=r("./src/data/chell-data.ts"),f=r("./src/helper/ReactHelper.ts"),h=r("./src/component/chart/ContactMapChart.tsx"),y=r("./src/component/widget/ChellRadioGroup.tsx"),v=r("./src/component/widget/ChellSlider.tsx");t.defaultContactMapProps=o({chainLength:59,configurations:new Array,data:{computedPoints:new Array,secondaryStructures:new Array},enableSliders:!0,height:400,highlightColor:"#ff8800"},l.initialResidueContext,d.initialSecondaryStructureContext,{onBoxSelection:void 0,padding:0,width:400}),t.initialContactMapState={pointsToPlot:new Array,showConfiguration:!1};var m=function(e){function r(r){var n=e.call(this,r)||this;return n.state=t.initialContactMapState,n.onNodeSizeChange=function(e){return function(t){var r=n.state.pointsToPlot;n.setState({pointsToPlot:i(r.slice(0,e),[o({},r[e],{nodeSize:t})],r.slice(e+1))})}},n.onShowConfigurationToggle=function(){return function(){return n.setState({showConfiguration:!n.state.showConfiguration})}},n.onMouseEnter=function(e){return function(t){var r,o,a,c;if(t.isAxis()){var u=n.props,l=u.toggleSecondaryStructure,d=u.data;try{for(var p=s(d.secondaryStructures),f=p.next();!f.done;f=p.next()){var h=f.value;try{for(var y=s(h),v=y.next();!v.done;v=y.next()){var m=v.value;m.contains.apply(m,i(t.selectedPoints))&&l(m)}}catch(e){a={error:e}}finally{try{v&&!v.done&&(c=y.return)&&c.call(y)}finally{if(a)throw a.error}}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}}else e(t.selectedPoints)}},n.onMouseLeave=function(e){return function(t){var r,o,a,c;if(t.isAxis()){var u=n.props,l=u.selectedSecondaryStructures,d=u.data,p=u.removeSecondaryStructure;try{for(var f=s(d.secondaryStructures),h=f.next();!h.done;h=f.next()){var y=h.value;try{for(var v=s(y),m=v.next();!m.done;m=v.next()){var C=m.value;C.contains.apply(C,i(t.selectedPoints))&&(l.includes(C)||p(C))}}catch(e){a={error:e}}finally{try{m&&!m.done&&(c=v.return)&&c.call(v)}finally{if(a)throw a.error}}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}}else e&&e(t.selectedPoints)}},n.onMouseClick=function(e){return function(t){var r,o,a,c;if(t.isAxis()){var u=n.props,l=u.addSecondaryStructure,d=u.data,p=u.removeSecondaryStructure,f=u.selectedSecondaryStructures;try{for(var h=s(d.secondaryStructures),y=h.next();!y.done;y=h.next()){var v=y.value;try{for(var m=s(v),C=m.next();!C.done;C=m.next()){var g=C.value;g.contains.apply(g,i(t.selectedPoints))&&(f.includes(g)?p(g):l(g))}}catch(e){a={error:e}}finally{try{C&&!C.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}else e(t.selectedPoints)}},n.onMouseSelect=function(e){return function(t){e&&e(t.selectedPoints.map(function(e){return e}))}},n}return n(r,e),r.prototype.componentDidMount=function(){this.setupPointsToPlot(this.props.data.computedPoints)},r.prototype.componentDidUpdate=function(e){var t=this.props,r=t.data,n=t.lockedResiduePairs;r!==e.data?(this.props.clearAllResidues(),this.props.clearSecondaryStructure(),this.setupPointsToPlot(r.computedPoints)):n!==e.lockedResiduePairs&&this.setupPointsToPlot(r.computedPoints,n)},r.prototype.render=function(){var e=this.props,t=e.enableSliders,r=e.padding,n=e.width,o=this.state.pointsToPlot,a={width:.9*n};return c.createElement("div",{id:"ContactMapComponent",style:{padding:r}},this.renderContactMapChart(o),t&&this.renderConfigSliders(a,o))},r.prototype.setupPointsToPlot=function(e,t){void 0===t&&(t=new Map);var r=this.props.highlightColor,n=this.state.pointsToPlot,a=n.length,s=a>=2&&n[a-1]?n[a-1].nodeSize:6,c=h.generateChartDataEntry("none",r,"Selected Res. Pairs","",s,Array.from(t.keys()).filter(function(e){return 2===t.get(e).length}).map(function(e){return{i:t.get(e)[0],j:t.get(e)[1],dist:0}}),{marker:{color:r,line:{color:r,width:3},symbol:"circle-open"}});this.setState(o({},this.state,{pointsToPlot:i(e,[c])}))},r.prototype.renderContactMapChart=function(e){var t=this.props,r=t.addHoveredResidues,n=t.candidateResidues,o=t.chainLength,a=t.data,i=t.onBoxSelection,s=t.toggleLockedResiduePair;return c.createElement(h.default,{candidateResidues:n,contactData:e,onClickCallback:this.onMouseClick(s),onHoverCallback:this.onMouseEnter(r),onSelectedCallback:this.onMouseSelect(i),onUnHoverCallback:this.onMouseLeave(),range:o+5,secondaryStructures:a.secondaryStructures})},r.prototype.renderConfigSliders=function(e,t){var r=this.state.showConfiguration;return c.createElement(u.Accordion,{fluid:!0,styled:!0},c.createElement(u.Accordion.Title,{active:r,className:"contact-map-configuration-toggle",index:1,onClick:this.onShowConfigurationToggle()},c.createElement(u.Icon,{name:"dropdown"}),"Configuration"),c.createElement(u.Accordion.Content,{active:r},this.renderNodeSizeSliders(t,e),this.renderConfigurations(this.props.configurations,e)))},r.prototype.renderNodeSizeSliders=function(e,t){var r=this;return e.map(function(e,n){var o="node-size-slider-"+n;return c.createElement(v.default,{className:o,key:o,value:e.nodeSize,label:e.name+" - Node Size",max:20,min:1,onChange:r.onNodeSizeChange(n),style:t})})},r.prototype.renderConfigurations=function(e,t){var r,n,o=[];try{for(var a=s(e),i=a.next();!i.done;i=a.next()){var c=i.value,u=c.name.toLowerCase().split(" ").join("-");switch(c.type){case p.CONFIGURATION_COMPONENT_TYPE.SLIDER:o.push(this.renderConfigurationSlider(c,u,t));break;case p.CONFIGURATION_COMPONENT_TYPE.RADIO:o.push(this.renderConfigurationRadioButton(c,u))}}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},r.prototype.renderConfigurationSlider=function(e,t,r){return c.createElement(v.default,{className:t,key:t,value:e.values.current,label:e.name,max:e.values.max,min:e.values.min,onChange:e.onChange,style:r})},r.prototype.renderConfigurationRadioButton=function(e,t){return c.createElement(y.default,{key:"radio-group-"+t,id:t,options:e.values.options,onChange:e.onChange})},r}(c.Component);t.ContactMapClass=m,t.ContactMapWithDefaultProps=f.withDefaultProps(t.defaultContactMapProps,m);var C=function(e){return c.createElement(d.SecondaryStructureContext.Consumer,null,function(r){return c.createElement(l.default.Consumer,null,function(n){return c.createElement(t.ContactMapWithDefaultProps,o({},e,n,r))})})};t.ContactMap=C,t.default=C},"./src/component/InfoPanel.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/react/index.js"),s=r("./node_modules/semantic-ui-react/dist/es/index.js"),c=r("./src/context/ResidueContext.ts"),u=r("./src/context/SecondaryStructureContext.tsx"),l=r("./src/data/chell-data.ts"),d=r("./src/data/CouplingContainer.ts"),p=r("./src/helper/ReactHelper.ts");t.defaultInfoPanelProps=o({data:{couplingScores:new d.CouplingContainer},height:400},c.initialResidueContext,u.initialSecondaryStructureContext,{width:400});var f=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.render=function(){var e=this.props,t=e.data,r=e.height,n=e.lockedResiduePairs,o=e.width,a=e.selectedSecondaryStructures,c=t.pdbData?this.renderUnassignedResidues(t.pdbData):[i.createElement(s.Label,{key:"unassigned-residues-none"})];return i.createElement("div",{className:"InfoPanel",style:{height:r,width:o}},i.createElement(s.Accordion,{exclusive:!1,panels:[{content:this.renderSecondaryStructures(t.pdbData?t.pdbData.secondaryStructureSections:[]),key:"all-secondary-structures",title:"All Secondary Structures ("+(t.pdbData?t.pdbData.secondaryStructureSections.length:0)+"):"},{content:c,key:"unassigned-residues",title:"Unassigned Residues ("+c.length+"):"},{content:this.renderSecondaryStructures(a),key:"selected-secondary-structures",title:"Selected Secondary Structures ("+a.length+"):"},{content:this.renderLockedResiduePairs(n),key:"selected-residue-pairs",title:"Selected Residue Pairs ("+n.size+"):"}]}))},t.prototype.renderLockedResiduePairs=function(e){return 0===e.size?[i.createElement(s.Label,{key:"locked-residue-pair-none"},"None")]:Array.from(e.values()).map(function(e,t){return i.createElement(s.Label,{key:"locked-residue-pair-"+t},e.join(", "))})},t.prototype.renderSecondaryStructures=function(e){return 0===e.length?[i.createElement(s.Label,{key:"sec-struct-none"},"None")]:e.map(function(e,t){return i.createElement(s.Label,{key:"sec-struct-"+t},"["+e.start+"-"+e.end+"]: "+e.label+" - "+l.SECONDARY_STRUCTURE_CODES[e.label])})},t.prototype.renderUnassignedResidues=function(e){var t=new Array;return e.eachResidue(function(r){var n,o;if(r.isProtein()){var c=!0;try{for(var u=a(e.secondaryStructureSections),l=u.next();!l.done;l=u.next()){if(l.value.contains(r.resno)){c=!1;break}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}c&&t.push(i.createElement(s.Label,{key:"unassigned-residue-"+r.resno},"["+r.resno+": isCg? "+r.isCg()+", isDna? "+r.isDna()+", isHelix? "+r.isHelix()+", isNucleic? "+r.isNucleic()+", isProtein? "+r.isProtein()+", isPolymer? "+r.isPolymer()+", isSaccharide? "+r.isSaccharide()+", isSheet? "+r.isSheet()+", isTurn? "+r.isTurn(),"}"))}}),t},t}(i.Component);t.InfoPanelClass=f,t.InfoPanelWithDefaultProps=p.withDefaultProps(t.defaultInfoPanelProps,f);var h=function(e){return i.createElement(u.default.Consumer,null,function(r){return i.createElement(c.default.Consumer,null,function(n){return i.createElement(t.InfoPanelWithDefaultProps,o({},e,n,r))})})};t.InfoPanel=h,t.default=h},"./src/component/NGLComponent.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var c=r("./node_modules/ngl/dist/ngl.esm.js"),u=r("./node_modules/react/index.js"),l=r("./node_modules/semantic-ui-react/dist/es/index.js"),d=r("./src/context/ResidueContext.ts"),p=r("./src/context/SecondaryStructureContext.tsx"),f=r("./src/helper/NGLHelper.ts"),h=r("./src/helper/ReactHelper.ts");t.defaultNGLProps=o({data:void 0,height:400},d.initialResidueContext,p.initialSecondaryStructureContext,{padding:0,width:400}),t.initialNGLState={activeRepresentations:new Array,stage:void 0,structureComponent:void 0};var y=function(e){function r(r){var n=e.call(this,r)||this;return n.state=t.initialNGLState,n.canvas=null,n.onClick=function(e){var t=n.props,r=t.addCandidateResidues,o=t.addLockedResiduePair,a=t.candidateResidues,s=t.removeCandidateResidues,c=t.removeNonLockedResidues,u=t.removeLockedResiduePair,l=n.state.structureComponent;if(e&&l){if(e.picker&&"distance"===e.picker.type)u([e.distance.atom1.resno,e.distance.atom2.resno]);else if(e.atom||e.closestBondAtom){var d=e.atom||e.closestBondAtom;a.length>=1?(o(i(a,[d.resno])),s()):r([d.resno])}}else c()},n.onCanvasLeave=function(){(0,n.props.removeNonLockedResidues)()},n}return n(r,e),r.prototype.componentDidMount=function(){if(this.canvas){var e=new c.Stage(this.canvas);this.setState({stage:e});var t=this.props.data;t&&this.addStructureToStage(t,e)}},r.prototype.componentWillUnmount=function(){var e=this.state.stage;e&&(e.dispose(),this.setState({activeRepresentations:[],stage:void 0}))},r.prototype.componentDidUpdate=function(e,t){var r,n,o=this.props.data,a=this.state,c=a.stage,u=a.structureComponent,l=o&&o!==e.data;if(o&&c&&l)c.removeAllComponents(),this.addStructureToStage(o,c);else if(c&&u){var d=this.props,p=d.candidateResidues,f=d.hoveredResidues,h=d.lockedResiduePairs,y=d.selectedSecondaryStructures,v=d.temporarySecondaryStructures;if(f!==e.hoveredResidues||p!==e.candidateResidues||h!==e.lockedResiduePairs||y!==e.selectedSecondaryStructures||v!==e.temporarySecondaryStructures){try{for(var m=s(this.state.activeRepresentations),C=m.next();!C.done;C=m.next()){var g=C.value;u.removeRepresentation(g)}}catch(e){r={error:e}}finally{try{C&&!C.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}this.setState({activeRepresentations:i(this.highlightCandidateResidues(u,i(p,f).filter(function(e,t,r){return r.indexOf(e)===t}).sort()),this.highlightLockedDistancePairs(u,h),this.highlightSecondaryStructures(u,i(y,v)))})}}c&&c.viewer.requestRender()},r.prototype.render=function(){var e=this,t=this.props,r=t.height,n=t.padding,o=t.width;return u.createElement("div",{className:"NGLComponent",style:{padding:n}},u.createElement("div",{className:"NGLCanvas",ref:function(t){return e.canvas=t},style:{height:r,width:o},onMouseLeave:this.onCanvasLeave}),u.createElement(l.GridRow,null,u.createElement(l.Button,{onClick:this.props.removeAllLockedResiduePairs},"Remove All Locked Distance Pairs")))},r.prototype.addStructureToStage=function(e,t){var r=this,n=t.addComponentFromObject(e);this.setState({structureComponent:n}),t.defaultFileRepresentation(n),n.stage.mouseControls.add("hoverPick",function(e,t){return r.onHover(e,t)}),t.signals.clicked.add(this.onClick)},r.prototype.onHover=function(e,t){var r=this.props,n=r.addHoveredResidues,o=r.candidateResidues,a=r.hoveredResidues,i=r.removeHoveredResidues;this.state.structureComponent&&(t&&(t.atom||t.closestBondAtom)?n([(t.atom||t.closestBondAtom).resno]):0===o.length&&0!==a.length&&i())},r.prototype.highlightCandidateResidues=function(e,t){var r=new Array;if(t.length>=1&&(r.push(f.createBallStickRepresentation(e,t)),t.length>=2)){var n=t.join(".CA, ")+".CA";r.push(f.createDistanceRepresentation(e,n))}return r},r.prototype.highlightLockedDistancePairs=function(e,t){var r=new Array;return t.forEach(function(t){if(r.push(f.createBallStickRepresentation(e,t)),t.length>=2){var n=t.join(".CA, ")+".CA";r.push(f.createDistanceRepresentation(e,n))}}),r},r.prototype.highlightSecondaryStructures=function(e,t){var r,n,o=new Array;try{for(var a=s(t),i=a.next();!i.done;i=a.next()){var c=i.value;o.push(f.createSecStructRepresentation(e,c))}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},r}(u.Component);t.NGLComponentClass=y,t.NGLComponentWithDefaultProps=h.withDefaultProps(t.defaultNGLProps,y);var v=function(e){return u.createElement(p.SecondaryStructureContext.Consumer,null,function(r){return u.createElement(d.default.Consumer,null,function(n){return u.createElement(t.NGLComponentWithDefaultProps,o({},e,n,r))})})};t.NGLComponent=v,t.default=v},"./src/component/PredictedContactMap.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/react/index.js"),s=r("./src/context/ResidueContext.ts"),c=r("./src/data/chell-data.ts"),u=r("./src/data/CouplingContainer.ts"),l=r("./src/helper/ReactHelper.ts"),d=r("./src/component/chart/ContactMapChart.tsx"),p=r("./src/component/ContactMap.tsx");t.defaultPredictedContactMapProps=o({correctColor:"#ff0000",data:{couplingScores:new u.CouplingContainer},height:400,incorrectColor:"#000000"},s.initialResidueContext,{observedColor:"#0000ff",padding:0,width:400}),t.initialPredictedContactMapState={chainLength:-1,linearDistFilter:5,measuredContactDistFilter:5,measuredProximity:c.CONTACT_DISTANCE_PROXIMITY.CLOSEST,numPredictionsToShow:-1,pointsToPlot:[]};var f=function(e){function r(r){var n=e.call(this,r)||this;return n.state=t.initialPredictedContactMapState,n.onLinearDistFilterChange=function(){return function(e){n.setState({linearDistFilter:e})}},n.onNumPredictionsToShowChange=function(){return function(e){n.setState({numPredictionsToShow:e})}},n.onMeasuredProximityChange=function(){return function(e){n.setState({measuredProximity:Object.values(c.CONTACT_DISTANCE_PROXIMITY)[e]})}},n.getContactMapConfigs=function(){return[{name:"Calculate Distance: Closest Atom - C-Alpha",onChange:n.onMeasuredProximityChange(),type:c.CONFIGURATION_COMPONENT_TYPE.RADIO,values:{current:Object.keys(c.CONTACT_DISTANCE_PROXIMITY).indexOf(n.state.measuredProximity),max:1,min:0,options:Object.values(c.CONTACT_DISTANCE_PROXIMITY)}},{name:"Linear Distance Filter (|i - j|)",onChange:n.onLinearDistFilterChange(),type:c.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:n.state.linearDistFilter,max:10,min:1}},{name:"Top N Predictions to Show",onChange:n.onNumPredictionsToShowChange(),type:c.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:n.state.numPredictionsToShow,max:n.state.chainLength,min:1}}]},n}return n(r,e),r.prototype.componentDidUpdate=function(e,t){var r=this.props,n=r.correctColor,o=r.data,a=r.incorrectColor,i=r.observedColor,s=this.state,c=s.linearDistFilter,l=s.measuredContactDistFilter,p=s.measuredProximity,f=s.numPredictionsToShow;if(o.couplingScores!==e.data.couplingScores||c!==t.linearDistFilter||l!==t.measuredContactDistFilter||p!==t.measuredProximity||f!==t.numPredictionsToShow){var h=o.pdbData?o.pdbData.generateCouplingsAmendedWithPDB(o.couplingScores.rankedContacts,p):new u.CouplingContainer(o.couplingScores.rankedContacts),y=h.chainLength,v=h.getObservedContacts(l,c),m=h.getPredictedContacts(f,c),C=(m.correct.length/m.predicted.length*100).toFixed(2),g=[d.generateChartDataEntry("x+y",{start:i,end:"rgb(100,177,200)"},"Known Structure Contact","(from PDB structure)",4,v),d.generateChartDataEntry("x+y",a,"Predicted Contact","(N="+f+", L="+y+")",4,m.predicted),d.generateChartDataEntry("x+y",n,"Correct Prediction","(N="+m.correct.length+", "+C+"%)",6,m.correct)];this.setState({chainLength:y,numPredictionsToShow:o.couplingScores!==e.data.couplingScores?Math.floor(y/2):f,pointsToPlot:g})}},r.prototype.render=function(){var e=this.props,t=e.data,r=a(e,["data"]),n=this.state,s=n.chainLength,c=n.pointsToPlot;return i.createElement("div",{id:"PredictedContactMapComponent"},i.createElement(p.default,o({chainLength:s,configurations:this.getContactMapConfigs(),data:{computedPoints:c,secondaryStructures:t.pdbData?[t.pdbData.secondaryStructureSections]:[]}},r)))},r}(i.Component);t.PredictedContactMapClass=f,t.PredictedContactMap=l.withDefaultProps(t.defaultPredictedContactMapProps,f),t.default=t.PredictedContactMap},"./src/component/SpringComponent.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/d3/index.js"),s=r("./node_modules/pixi.js/lib/index.js"),c=r("./node_modules/react/index.js"),u=r("./src/context/CellContext.ts"),l=r("./src/helper/ReactHelper.ts");t.defaultSpringProps=o({canvasBackgroundColor:13421772,data:{links:[],nodes:[]},height:450},u.initialCellContext,{padding:0,selectedCategory:"",width:450}),t.SpringComponentWithDefaultProps=l.withDefaultProps(t.defaultSpringProps,function(e){function t(t){var r=e.call(this,t)||this;return r.pixiApp=new s.Application,r.nodeSprites=new s.Container,r.edgeSprites=new s.Container,r.state=o({},r.state),r}return n(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.height,r=e.width;this.pixiApp=new s.Application(r,t,{backgroundColor:this.props.canvasBackgroundColor,view:this.canvasElement});var n=this.pixiApp,o=this.props,a=o.data,i=o.selectedCategory;a&&(n.stage.removeChildren(),this.nodeSprites=new s.Container,this.edgeSprites=new s.Container,this.generateNodeSprites(a.nodes,this.nodeSprites,i),this.generateLinesSprite(a.links,this.edgeSprites,i),this.centerCanvas(a),n.stage.addChild(this.edgeSprites),n.stage.addChild(this.nodeSprites))},t.prototype.componentDidUpdate=function(e,t){var r=this,n=this.props,o=n.data,a=n.selectedCategory;if(o&&o!==e.data){var i=this.pixiApp;i.stage.removeChildren(),this.nodeSprites=new s.Container,this.edgeSprites=new s.Container,this.generateNodeSprites(o.nodes,this.nodeSprites,a),this.generateLinesSprite(o.links,this.edgeSprites,a),this.centerCanvas(o),i.stage.addChild(this.edgeSprites),i.stage.addChild(this.nodeSprites)}else a!==e.selectedCategory?(this.updateNodeSprites(o.nodes,this.nodeSprites,function(e){return e.category===a}),this.edgeSprites.removeChildren(),this.generateLinesSprite(o.links,this.edgeSprites,a),this.centerCanvas(o)):this.props.currentCells!==e.currentCells&&(this.updateNodeSprites(o.nodes,this.nodeSprites,function(e){return-1!==r.props.currentCells.indexOf(e.number)}),this.edgeSprites.removeChildren(),this.generateLinesSprite(o.links,this.edgeSprites,a),this.centerCanvas(o))},t.prototype.render=function(){var e=this,t=this.props,r=t.height,n=t.padding,o=t.width;return c.createElement("div",{id:"SpringComponent",style:{padding:n}},c.createElement("canvas",{ref:function(t){return e.canvasElement=t||void 0},style:{height:r,width:o}}))},t.prototype.generateLinesSprite=function(e,t,r){var n,o;void 0===e&&(e=[]);var i=new s.Graphics,c=this.props,u=c.height,l=c.width;try{for(var d=a(e),p=d.next();!p.done;p=d.next()){var f=p.value,h=f.source,y=f.target;r&&h.category!==r&&y.category!==r||(i.lineStyle(5,16711680,1),i.moveTo(h.x,h.y),i.lineTo(y.x,y.y))}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}var v=i.getBounds(),m=new s.Rectangle(v.x,v.y,Math.max(l,v.width),Math.max(u,v.height)),C=this.pixiApp.renderer.generateTexture(i,s.SCALE_MODES.LINEAR,l/u,m),g=new s.Sprite(C);g.x=m.x,g.y=m.y,t.addChild(g)},t.prototype.generateNodeSprites=function(e,t,r){var n,o;void 0===e&&(e=[]);try{for(var i=a(e),c=i.next();!c.done;c=i.next()){var u=c.value,l=new s.Graphics;l.beginFill(u.colorHex),l.drawCircle(0,0,16),l.endFill();var d=new s.Sprite(this.pixiApp.renderer.generateTexture(l));d.x=u.x,d.y=u.y,r&&u.category!==r&&(d.alpha=.1),d.anchor.set(.5,.5),d.interactive=!0,d.scale.set(.5),t.addChild(d)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},t.prototype.updateNodeSprites=function(e,t,r){void 0===e&&(e=[]);for(var n=0;n<t.children.length;++n){var o=e[n],a=t.children[n];r(o)?a.alpha=1:a.alpha=.1}},t.prototype.centerCanvas=function(e){var t=this.edgeSprites,r=this.nodeSprites,n=this.props,o=n.height,a=n.width,s=e.nodes.map(function(e){return e.x}),c=e.nodes.map(function(e){return e.y}),u=i.max(s),l=i.max(c),d=i.min(s),p=i.min(c),f=u-d+50,h=l-p+50,y=.85/Math.max(f/a,h/o),v=y-this.nodeSprites.scale.x,m=a/2-(u+d)/2*y-r.position.x,C=o/2+30-(l+p)/2*y-r.position.y;r.position.x+=m,r.position.y+=C,r.scale.x+=v,r.scale.y+=v,t.position=r.position,t.scale=r.scale},t}(c.Component));var d=function(e){return c.createElement(u.default.Consumer,null,function(r){var n=r.currentCells;return c.createElement(t.SpringComponentWithDefaultProps,o({},e,{currentCells:n}))})};t.SpringComponent=d,t.default=d},"./src/component/TComponent.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/react/index.js"),i=r("./src/context/CellContext.ts"),s=r("./src/helper/ReactHelper.ts"),c=r("./src/component/chart/PlotlyChart.tsx"),u=r("./src/component/chart/PlotlyChart.tsx");t.defaultTComponentProps={data:[[0],[0]],height:400,padding:0,pointColor:"#000000",width:400};var l=s.withDefaultProps(t.defaultTComponentProps,function(e){function t(t){var r=e.call(this,t)||this;return r.onMouseSelect=function(e){return function(t){t.selectedPoints&&e(t.selectedPoints.map(function(e){return e}))}},r.state=o({},r.state),r}return n(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.data,n=t.height,s=t.padding,l=t.pointColor,d=t.width;return a.createElement("div",{id:"TComponent",style:{padding:s}},a.createElement(i.default.Consumer,null,function(t){var i=t.addCells;return a.createElement(u.default,{config:o({},c.defaultPlotlyConfig,{modeBarButtons:[["zoomOut2d","zoomIn2d"],["resetScale2d","autoScale2d"],["select2d","pan2d"]]}),data:[{marker:{color:l},mode:"markers",type:"scatter",x:r.map(function(e){return e[0]}),xaxis:"x",y:r.map(function(e){return e[1]}),yaxis:"y"}],layout:o({},c.defaultPlotlyLayout,{height:n,width:d,yaxis:{autorange:!0}}),onSelectedCallback:e.onMouseSelect(i)})}))},t}(a.Component));t.TComponent=l,t.default=l},"./src/component/VizSelectorPanel.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/react/index.js"),a=r("./node_modules/semantic-ui-react/dist/es/index.js"),i=r("./src/data/chell-data.ts"),s=r("./src/helper/ReactHelper.ts"),c=r("./src/component/InfoPanel.tsx"),u=r("./src/component/NGLComponent.tsx"),l=r("./src/component/PredictedContactMap.tsx"),d=r("./src/component/SpringComponent.tsx"),p=r("./src/component/TComponent.tsx");t.defaultVizPanelProps={data:{},height:450,initialViz:i.VIZ_TYPE["T-SNE"],padding:15,supportedVisualizations:[],width:450},t.initialVizPanelState={selectedViz:t.defaultVizPanelProps.initialViz};var f=s.withDefaultProps(t.defaultVizPanelProps,function(e){function r(r){var n=e.call(this,r)||this;return n.state=t.initialVizPanelState,n.onVizSelect=function(e,t){n.setState({selectedViz:t.value})},n.generateDropdownItems=function(e){return e.map(function(e){return{key:e,text:e,value:e}}).sort(function(e,t){return e.key.localeCompare(t.key)})},n.state={selectedViz:r.initialViz},n}return n(r,e),r.prototype.render=function(){var e=this.props,t=e.data,r=e.supportedVisualizations,n=e.width;return o.createElement("div",{className:"VizSelectorPanel",style:{width:n}},o.createElement(a.Dropdown,{options:this.generateDropdownItems(r),fluid:!0,onChange:this.onVizSelect,defaultValue:this.props.initialViz}),o.createElement(a.Card,{fluid:!0,raised:!0},this.renderVizContainer(this.state.selectedViz,t)))},r.prototype.renderVizContainer=function(e,t){var r=this.props.padding,n=this.props.height-2*r,a=this.props.width-2*r;switch(e){case i.VIZ_TYPE["T-SNE"]:return o.createElement(p.default,{data:t["T-SNE"],height:n,padding:r,width:a});case i.VIZ_TYPE.SPRING:return o.createElement(d.default,{data:t.Spring,height:n,padding:r,width:a});case i.VIZ_TYPE.NGL:return o.createElement(u.default,{data:t.NGL,height:n,padding:r,width:a});case i.VIZ_TYPE.CONTACT_MAP:return o.createElement(l.default,{data:t["Contact Map"],height:n,padding:r,width:a});case i.VIZ_TYPE.INFO_PANEL:return o.createElement(c.default,{data:t["Contact Map"]});default:throw new Error("Unknown viz: "+e)}},r}(o.Component));t.VizSelectorPanel=f,t.default=f},"./src/component/chart/ContactMapChart.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var c=r("./node_modules/react/index.js"),u=r("./src/data/SecondaryStructureAxis.ts"),l=r("./src/helper/PlotlyHelper.ts"),d=r("./src/helper/ReactHelper.ts"),p=r("./src/component/chart/PlotlyChart.tsx"),f={candidateResidues:new Array,dataTransformFn:l.generateScatterGLData,heightModifier:.3,legendModifiers:{y:-.1},marginModifiers:{b:40},range:100,secondaryStructures:[]};t.generateChartDataEntry=function(e,t,r,n,a,i,s){return void 0===s&&(s={}),o({hoverinfo:e,marker:"string"==typeof t?{color:t}:{colorscale:[[0,"rgb(12,50,102)"],[.1,"rgb(17,83,150)"],[.2,"rgb(40,114,175)"],[.3,"rgb(71,147,193)"],[.4,"rgb(111,175,209)"],[.5,"rgb(160,202,222)"],[.6,"rgb(200,219,237)"],[.7,"rgb(224,235,246)"],[.8,"rgb(247,251,255)"],[.9,"rgb(249,253,255)"],[1,"rgb(255,255,255)"]]},name:r,nodeSize:a,points:i,subtitle:n},s)};var h=function(e){function t(t){var r=e.call(this,t)||this;return r.state={plotlyData:[]},r}return n(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,r=t.contactData,n=t.dataTransformFn,o=t.secondaryStructures;if(e.contactData!==r||e.secondaryStructures!==o){var a=s(r.map(function(e){return n(e,!0)}));o.forEach(function(e,t){var r=new u.default(e,t).axis,n=Array.from(r.values()).reduce(function(e,t){return e.push.apply(e,s([t.x,t.y])),e},new Array);a.push.apply(a,s(n))}),this.setState({plotlyData:a})}},t.prototype.render=function(){var e=this.props,t=e.contactData,r=e.heightModifier,n=e.legendModifiers,i=e.marginModifiers,s=e.range,u=a(e,["contactData","heightModifier","legendModifiers","marginModifiers","range"]),l=this.state.plotlyData;return c.createElement(p.default,o({data:l,layout:{height:p.defaultPlotlyLayout.height+p.defaultPlotlyLayout.height*r,legend:{orientation:"h",y:n.y*t.length,yanchor:"bottom"},margin:{b:t.length*i.b},showlegend:!0,xaxis:{autorange:!1,nticks:10,range:[1,s],showline:!0,tickmode:"auto",title:"Residue #"},yaxis:{autorange:!1,nticks:10,range:[1,s].reverse(),showline:!0,tickmode:"auto",title:"Residue #"}}},u))},t}(c.Component);t.ContactMapChart=d.withDefaultProps(f,h),t.default=t.ContactMapChart},"./src/component/chart/PlotlyChart.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var l=r("./node_modules/deep-equal/index.js"),d=r("./node_modules/immutable/dist/immutable.js"),p=r("./node_modules/react/index.js"),f=r("./node_modules/plotly.js/dist/plotly.js"),h=r("./src/data/chell-data.ts"),y=r("./src/data/event/ChellChartEvent.ts"),v=r("./src/helper/ReactHelper.ts");!function(e){e.bar="bar",e.pointcloud="pointcloud",e.scatter="scatter",e.scattergl="scattergl",e.scatter3d="scatter3d"}(t.PLOTLY_CHART_TYPE||(t.PLOTLY_CHART_TYPE={})),t.defaultPlotlyConfig={displayModeBar:!1,scrollZoom:!0},t.defaultPlotlyLayout={autosize:!0,dragmode:"zoom",height:400,hovermode:"closest",legend:{},margin:{b:10,l:40,r:10,t:10},showlegend:!1,title:"",width:400},t.defaultPlotlyChartProps={config:{},data:[],layout:{}};var m=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.plotlyCanvas=null,r.plotlyFormattedData=[],r.canvasRef=null,r.resize=function(){r.plotlyCanvas&&f.Plots.resize(r.plotlyCanvas)},r.draw=function(){return a(r,void 0,void 0,function(){var e,t,r,n;return i(this,function(o){switch(o.label){case 0:return e=this.props,t=e.layout,r=e.config,this.plotlyFormattedData=c(this.plotlyFormattedData),this.plotlyCanvas?(n=this,[4,f.react(this.plotlyCanvas,this.plotlyFormattedData,this.getMergedLayout(t,this.plotlyFormattedData),this.getMergedConfig(r))]):[3,2];case 1:n.plotlyCanvas=o.sent(),o.label=2;case 2:return[2]}})})},r.generatePlotlyAxis=function(e){return Array.from(e.values()).filter(function(e){return e.length>=2}).map(function(e){var t,r=e.substr(0,1),n=Number.parseInt(e.substr(1));return(t={})[r+"axis"+n]={domain:[1-.05*(n-1),1-.05*(n-2)],visible:!1},t}).reduce(function(e,t){return Object.assign(e,o({},t))},{})},r.getMergedConfig=function(e){return void 0===e&&(e={}),Object.assign({},d.fromJS(Object.assign({},t.defaultPlotlyConfig)).mergeDeep(d.fromJS(Object.assign({},e))).toJS())},r.getMergedLayout=function(e,n){return void 0===e&&(e={}),void 0===n&&(n=[]),Object.assign({},d.fromJS(Object.assign({},o({},t.defaultPlotlyLayout,r.deriveAxisParams(n)))).mergeDeep(d.fromJS(Object.assign({},e))).toJS())},r.deriveChartPiece=function(e,t,r){if(r){var n=r.xaxis&&"x"!==r.xaxis,o=r.yaxis&&"y"!==r.yaxis;if(n||o)return{chartPiece:h.CHELL_CHART_PIECE.AXIS,selectedPoints:n?[t]:[e]}}return{chartPiece:h.CHELL_CHART_PIECE.POINT,selectedPoints:[e,t]}},r.onClick=function(e){var t=r.props.onClickCallback;if(t){var n=e.points[0],o=n.data,a=n.x,i=n.y,s=r.deriveChartPiece(a,i,o),c=s.chartPiece,u=s.selectedPoints;t(new y.default(h.CHELL_CHART_EVENT_TYPE.CLICK,c,u))}},r.onHover=function(e){var t=r.props.onHoverCallback;if(t){var n=e.points[0],o=n.data,a=n.x,i=n.y,s=r.deriveChartPiece(a,i,o),c=s.chartPiece,u=s.selectedPoints;t(new y.default(h.CHELL_CHART_EVENT_TYPE.CLICK,c,u))}},r.onSelect=function(e){var t=r.props.onSelectedCallback;if(t){var n=e.points.reduce(function(e,t){return e.push.apply(e,c([t.x,t.y])),e},new Array),o=e.points[0],a=o.x,i=o.y,s=r.deriveChartPiece(a,i).chartPiece;t(new y.default(h.CHELL_CHART_EVENT_TYPE.CLICK,s,n))}},r.onUnHover=function(e){var t=r.props.onUnHoverCallback;if(t)if(e){var n=e.points[0],o=n.data,a=n.x,i=n.y,s=r.deriveChartPiece(a,i,o),c=s.chartPiece,u=s.selectedPoints;t(new y.default(h.CHELL_CHART_EVENT_TYPE.UNHOVER,c,u))}else t(e)},r}return n(r,e),r.prototype.attachListeners=function(){this.plotlyCanvas&&(this.plotlyCanvas.on("plotly_click",this.onClick),this.plotlyCanvas.on("plotly_selected",this.onSelect),this.plotlyCanvas.on("plotly_hover",this.onHover),this.plotlyCanvas.on("plotly_unhover",this.onUnHover)),window.removeEventListener("resize",this.resize),window.addEventListener("resize",this.resize)},r.prototype.componentDidUpdate=function(e){var t=this.props,r=t.data,n=t.layout,o=t.config;JSON.stringify(r)===JSON.stringify(e.data)&&l(n,e.layout)&&l(o,e.config)||(this.plotlyFormattedData=d.fromJS(r).toJS(),this.draw())},r.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,r,n,o;return i(this,function(a){switch(a.label){case 0:return!this.canvasRef||this.plotlyCanvas?[3,2]:(e=this.props,t=e.data,r=e.layout,n=e.config,this.plotlyFormattedData=d.fromJS(t).toJS(),o=this,[4,f.react(this.canvasRef,this.plotlyFormattedData,this.getMergedLayout(r,this.plotlyFormattedData),this.getMergedConfig(n))]);case 1:o.plotlyCanvas=a.sent(),this.attachListeners(),this.draw(),a.label=2;case 2:return[2]}})})},r.prototype.componentWillUnmount=function(){this.plotlyCanvas&&(f.purge(this.plotlyCanvas),this.plotlyCanvas=null),window.removeEventListener("resize",this.resize)},r.prototype.render=function(){var e=this;return p.createElement("div",{className:"plotly-chart",ref:function(t){return e.canvasRef=t||null},style:{marginBottom:5}})},r.prototype.deriveAxisParams=function(e){var t,r,n=new Set,a=new Set;try{for(var i=u(e),s=i.next();!s.done;s=i.next()){var c=s.value,l=c.xaxis,d=c.yaxis;l&&n.add(l),d&&a.add(d)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o({},this.generatePlotlyAxis(n),this.generatePlotlyAxis(a),{xaxis:{domain:[0,1-.05*n.size],range:[30]},yaxis:{domain:[0,1-.05*n.size],range:[30]}})},r}(p.Component);t.PlotlyChartClass=m;var C=v.withDefaultProps(t.defaultPlotlyChartProps,m);t.PlotlyChart=C,t.default=C},"./src/component/widget/ChellRadioGroup.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/react/index.js"),a=r("./node_modules/semantic-ui-react/dist/es/index.js"),i=function(e){function t(t){var r=e.call(this,t)||this;return r.handleChange=function(e){return function(t,n){r.setState({selectedIndex:e}),r.props.onChange&&r.props.onChange(e)}},r.state={selectedIndex:0},r}return n(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.id,n=t.options;return o.createElement(a.Form,null,o.createElement(a.Form.Field,null,"How to calculate distance between two residues:"),n.map(function(t,n){return o.createElement(a.Form.Field,{key:r+"-"+t},o.createElement(a.Radio,{label:t.toLocaleLowerCase(),name:t,value:n,checked:e.state.selectedIndex===n,onChange:e.handleChange(n)}))}))},t}(o.Component);t.ChellRadioGroup=i,t.default=i},"./src/component/widget/ChellSlider.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/rc-slider/es/index.js"),i=r("./node_modules/react/index.js");r("./node_modules/rc-slider/assets/index.css");var s=function(e){function t(t){var r=e.call(this,t)||this;return r.onAfterChange=function(e){return function(t){e&&e(t),r.setState({value:t})}},r.onChange=function(e){return function(t){e&&e(t),r.setState({value:t})}},r.state={value:t.value},r}return n(t,e),t.prototype.componentDidUpdate=function(e,t){var r=this.props.value;r!==this.state.value&&this.setState({value:r})},t.prototype.render=function(){var e=this.props,t=e.className,r=e.value,n=e.hideLabelValue,s=e.max,c=e.min,u=e.label,l=e.onAfterChange,d=e.onChange,p=e.sliderProps,f=e.style;return i.createElement("div",{className:t,style:{padding:20}},!n&&i.createElement("p",null,u+": "+this.state.value),i.createElement(a.default,o({max:s,min:c,onAfterChange:this.onAfterChange(l),onChange:this.onChange(d),style:f,value:r},p)))},t}(i.Component);t.ChellSlider=s,t.default=s},"./src/container/VizPanelContainer.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var l=r("./node_modules/react/index.js"),d=r("./node_modules/semantic-ui-react/dist/es/index.js"),p=r("./src/component/VizSelectorPanel.tsx"),f=r("./src/context/ChellContext.tsx"),h=r("./src/helper/DataHelper.ts"),y=r("./src/helper/ReactHelper.ts");t.defaultVizPanelProps={initialVisualizations:[],numPanels:1},t.initialVizPanelState={currentDataDir:"",data:{}};var v=function(e){function r(r){var n=e.call(this,r)||this;return n.state=t.initialVizPanelState,n.onDataDirChange=function(e,t){n.setState({currentDataDir:t.value})},n.state=o({},n.state,{currentDataDir:r.dataDirs[0]}),n}return n(r,e),r.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,r,n,a,c,u,l,d;return i(this,function(i){switch(i.label){case 0:r={},i.label=1;case 1:i.trys.push([1,6,7,8]),n=s(this.props.supportedVisualizations),a=n.next(),i.label=2;case 2:return a.done?[3,5]:(c=a.value,u=r,l=c,[4,h.fetchAppropriateData(c,this.state.currentDataDir)]);case 3:u[l]=i.sent(),i.label=4;case 4:return a=n.next(),[3,2];case 5:return[3,8];case 6:return d=i.sent(),e={error:d},[3,8];case 7:try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}return[7];case 8:return[4,this.setState({data:o({},r)})];case 9:return i.sent(),[2]}})})},r.prototype.componentDidUpdate=function(e,t){return a(this,void 0,void 0,function(){var e,r,n,a,c,u,l,d,p;return i(this,function(i){switch(i.label){case 0:if(t.currentDataDir===this.state.currentDataDir)return[3,10];n={},i.label=1;case 1:i.trys.push([1,6,7,8]),a=s(this.props.supportedVisualizations),c=a.next(),i.label=2;case 2:return c.done?[3,5]:(u=c.value,l=n,d=u,[4,h.fetchAppropriateData(u,this.state.currentDataDir)]);case 3:l[d]=i.sent(),i.label=4;case 4:return c=a.next(),[3,2];case 5:return[3,8];case 6:return p=i.sent(),e={error:p},[3,8];case 7:try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}return[7];case 8:return[4,this.setState({data:o({},n)})];case 9:i.sent(),i.label=10;case 10:return[2]}})})},r.prototype.render=function(){return l.createElement(d.Grid,{className:"VizPanelContainer",columns:this.props.numPanels,centered:!0,relaxed:!0},l.createElement(d.GridRow,{columns:1,centered:!0},l.createElement(d.Dropdown,{className:"viz-panel-container-dropdown",onChange:this.onDataDirChange,options:u(this.props.dataDirs.map(function(e){return{key:e,text:e,value:e}})),placeholder:"Select Data Directory",search:!0})),l.createElement(f.default,null,this.renderPanels(this.props.numPanels,this.state.data,this.props.initialVisualizations).map(function(e,t){return l.createElement(d.GridColumn,{key:t},e)})))},r.prototype.renderPanels=function(e,t,r){for(var n=[],o=0;o<e;++o)n.push(l.createElement(p.default,{data:t,initialViz:r[o],supportedVisualizations:this.props.supportedVisualizations}));return n},r}(l.Component);t.VizPanelContainerClass=v;var m=y.withDefaultProps(t.defaultVizPanelProps,v);t.VizPanelContainer=m,t.default=m},"./src/context/CellContext.ts":function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/react/index.js");t.initialCellContext={addCells:function(e){},currentCells:[],removeAllCells:function(e){},removeCells:function(e){}};var a=o.createContext(n({},t.initialCellContext));t.CellContext=a,t.default=a},"./src/context/ChellContext.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/react/index.js"),i=r("./src/context/CellContext.ts"),s=r("./src/context/ResidueContext.ts"),c=r("./src/context/SecondaryStructureContext.tsx");t.initialState={cellContext:o({},i.initialCellContext),residueContext:o({},s.initialResidueContext),secondaryStructureContext:o({},c.initialSecondaryStructureContext)};var u=function(e){function r(r){var n=e.call(this,r)||this;return n.state=t.initialState,n.onAddCells=function(e){n.setState({cellContext:o({},n.state.cellContext,{currentCells:e})})},n.onRemoveAllCells=function(){n.setState({cellContext:o({},n.state.cellContext,{currentCells:[]})})},n.onRemoveCells=function(e){var t=n.state.cellContext.currentCells;n.setState({cellContext:o({},n.state.cellContext,{currentCells:t.filter(function(t){return-1===e.indexOf(t)})})})},n.onAddCandidateResidues=function(e){n.setState({residueContext:o({},n.state.residueContext,{candidateResidues:e.sort()})})},n.onAddHoveredResidues=function(e){n.setState({residueContext:o({},n.state.residueContext,{hoveredResidues:e.sort()})})},n.onAddLockedResiduePair=function(e){var t=n.state.residueContext.lockedResiduePairs,r=e.sort(),a=r.toString();if(!t.has(a)){var i=new Map(t);i.set(a,r),n.setState({residueContext:o({},n.state.residueContext,{lockedResiduePairs:i})})}},n.onClearAllResidues=function(){n.setState({residueContext:o({},n.state.residueContext,{candidateResidues:[],hoveredResidues:[],lockedResiduePairs:new Map})})},n.onRemoveAllLockedResiduePairs=function(){n.setState({residueContext:o({},n.state.residueContext,{lockedResiduePairs:new Map})})},n.onRemoveCandidateResidue=function(){n.setState({residueContext:o({},n.state.residueContext,{candidateResidues:[]})})},n.onRemoveHoveredResidues=function(){n.setState({residueContext:o({},n.state.residueContext,{hoveredResidues:[]})})},n.onRemoveLockedResiduePair=function(e){var t=e.sort().join(","),r=n.state.residueContext.lockedResiduePairs;if(r.has(t)){var a=new Map(r);a.delete(t),n.setState({residueContext:o({},n.state.residueContext,{lockedResiduePairs:a})})}},n.onRemoveNonLockedResidues=function(){n.setState({residueContext:o({},n.state.residueContext,{candidateResidues:[],hoveredResidues:[]})})},n.onToggleLockedResiduePair=function(e){var t=n.state.residueContext.lockedResiduePairs,r=e.sort(),a=r.toString(),i=new Map(t);t.has(a)?i.delete(a):i.set(a,r),n.setState({residueContext:o({},n.state.residueContext,{lockedResiduePairs:i})})},n.state=o({},n.state,{cellContext:o({},n.state.cellContext,{addCells:n.onAddCells,removeAllCells:n.onRemoveAllCells,removeCells:n.onRemoveCells}),residueContext:o({},n.state.residueContext,{addCandidateResidues:n.onAddCandidateResidues,addHoveredResidues:n.onAddHoveredResidues,addLockedResiduePair:n.onAddLockedResiduePair,clearAllResidues:n.onClearAllResidues,removeAllLockedResiduePairs:n.onRemoveAllLockedResiduePairs,removeCandidateResidues:n.onRemoveCandidateResidue,removeHoveredResidues:n.onRemoveHoveredResidues,removeLockedResiduePair:n.onRemoveLockedResiduePair,removeNonLockedResidues:n.onRemoveNonLockedResidues,toggleLockedResiduePair:n.onToggleLockedResiduePair}),secondaryStructureContext:o({},n.state.secondaryStructureContext)}),n}return n(r,e),r.prototype.render=function(){return a.createElement(c.SecondaryStructureContextHandler,null,a.createElement(i.default.Provider,{value:this.state.cellContext},a.createElement(s.default.Provider,{value:this.state.residueContext},this.props.children)))},r}(a.Component);t.ChellContext=u,t.default=u},"./src/context/ResidueContext.ts":function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/react/index.js");t.initialResidueContext={addCandidateResidues:function(e){},addHoveredResidues:function(e){},addLockedResiduePair:function(e){},candidateResidues:[],clearAllResidues:function(){},hoveredResidues:[],lockedResiduePairs:new Map,removeAllLockedResiduePairs:function(){},removeCandidateResidues:function(){},removeHoveredResidues:function(){},removeLockedResiduePair:function(e){},removeNonLockedResidues:function(e){},toggleLockedResiduePair:function(e){}};var a=o.createContext(n({},t.initialResidueContext));t.ResidueContext=a,t.default=a},"./src/context/SecondaryStructureContext.tsx":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/react/index.js");t.initialSecondaryStructureContext={addSecondaryStructure:function(e){},clearSecondaryStructure:function(){},removeSecondaryStructure:function(e){},selectedSecondaryStructures:new Array,temporarySecondaryStructures:new Array,toggleSecondaryStructure:function(e){}};var s=function(e){function t(t){var r=e.call(this,t)||this;return r.onAddSecondaryStructure=function(){return function(e){r.setState({selectedSecondaryStructures:a(r.state.selectedSecondaryStructures,[e])})}},r.onClearSecondaryStructure=function(){return function(){r.setState({selectedSecondaryStructures:new Array,temporarySecondaryStructures:new Array})}},r.onRemoveSecondaryStructure=function(){return function(e){var t=r.state.selectedSecondaryStructures;r.setState({selectedSecondaryStructures:t.filter(function(r,n){return n!==t.indexOf(e)}),temporarySecondaryStructures:t.filter(function(r,n){return n!==t.indexOf(e)})})}},r.onToggleSecondaryStructure=function(){return function(e){var t=r.state.temporarySecondaryStructures;r.state.temporarySecondaryStructures.includes(e)?r.setState({temporarySecondaryStructures:t.filter(function(e,r){return r!==t.indexOf(e)})}):r.setState({temporarySecondaryStructures:a(r.state.temporarySecondaryStructures,[e])})}},r.state={addSecondaryStructure:r.onAddSecondaryStructure(),clearSecondaryStructure:r.onClearSecondaryStructure(),removeSecondaryStructure:r.onRemoveSecondaryStructure(),selectedSecondaryStructures:new Array,temporarySecondaryStructures:new Array,toggleSecondaryStructure:r.onToggleSecondaryStructure()},r}return n(t,e),t.prototype.render=function(){return i.createElement(c.Provider,{value:this.state},this.props.children)},t}(i.Component);t.SecondaryStructureContextHandler=s;var c=i.createContext(t.initialSecondaryStructureContext);t.SecondaryStructureContext=c,t.default=c},"./src/data/Chell1DSection.ts":function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,r){void 0===r&&(r=t),this.label=e,this.sectionEnd=0,this.sectionStart=0,this.sectionEnd=Math.max(r,t),this.sectionStart=Math.min(t,r)}return Object.defineProperty(e.prototype,"end",{get:function(){return this.sectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.sectionEnd-this.sectionStart+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.sectionStart},enumerable:!0,configurable:!0}),e.prototype.contains=function(){for(var e,t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{for(var a=n(r),i=a.next();!i.done;i=a.next()){var s=i.value;if(s<this.sectionStart||s>this.sectionEnd)return!1}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return!0},e.prototype.updateStart=function(e){e>this.sectionEnd?(this.sectionStart=this.sectionEnd,this.sectionEnd=e):this.sectionStart=e},e.prototype.updateEnd=function(e){e<this.sectionStart?(this.sectionEnd=this.sectionStart,this.sectionStart=e):this.sectionEnd=e},e}();t.Chell1DSection=o,t.default=o},"./src/data/ChellPDB.ts":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}c((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r("./node_modules/ngl/dist/ngl.esm.js"),i=r("./src/helper/DataHelper.ts"),s=r("./src/data/chell-data.ts"),c=r("./src/data/Chell1DSection.ts"),u=r("./src/data/CouplingContainer.ts"),l=function(){function e(){this.nglData=new a.Structure,this.NGL_C_ALPHA_INDEX="CA|C"}return Object.defineProperty(e.prototype,"secondaryStructureSections",{get:function(){var e=new Array;return this.nglData.eachResidue(function(t){if(t.isProtein()){var r="C";if(t.isSheet())r="E";else if(t.isHelix())r="H";else if(t.isTurn())return;e.length>=1&&e[e.length-1].label===r?e[e.length-1].updateEnd(t.resno):e.push(new c.default(r,t.resno))}}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryStructure",{get:function(){var e=new Array;return this.nglData.eachResidue(function(t){if(t.isProtein()){var r="C";if(t.isSheet())r="E";else if(t.isHelix())r="H";else if(t.isTurn())return;e.push({resno:t.resno,structId:r})}}),e},enumerable:!0,configurable:!0}),e.createPDB=function(t){return void 0===t&&(t=""),n(this,void 0,void 0,function(){var r,n;return o(this,function(o){switch(o.label){case 0:return r=new e,n=r,[4,i.fetchNGLDataFromFile(t)];case 1:return n.nglData=o.sent(),[2,r]}})})},e.prototype.eachResidue=function(e){this.nglData.eachResidue(e)},e.prototype.generateCouplingsAmendedWithPDB=function(e,t){var r=this,n=this.nglData.residueStore,o=new u.CouplingContainer(e),a=n.resno[0],i=this.nglData.atomMap.dict[this.NGL_C_ALPHA_INDEX];return this.nglData.eachResidue(function(e){var n=e.resno-a;r.nglData.eachResidue(function(c){if(e.isProtein()&&c.isProtein()){var u=c.resno-a;if(t===s.CONTACT_DISTANCE_PROXIMITY.C_ALPHA){var l=r.getCAlphaAtomIndexFromResidue(n,i),d=r.getCAlphaAtomIndexFromResidue(u,i);o.addCouplingScore({dist:r.nglData.getAtomProxy(l).distanceTo(r.nglData.getAtomProxy(d)),i:e.resno,j:c.resno})}else o.addCouplingScore({dist:r.getMinDistBetweenResidues(n,u),i:e.resno,j:c.resno})}})}),o},e.prototype.getCAlphaAtomIndexFromResidue=function(e,t){for(var r=this.nglData.residueStore,n=r.atomOffset[e],o=r.atomCount[e],a=n;r.residueTypeId[a]!==t&&a<n+o;)a++;return a},e.prototype.getMinDistBetweenResidues=function(e,t){for(var r=this.nglData.residueStore,n=r.atomCount[e],o=r.atomCount[t],a=r.atomOffset[e],i=r.atomOffset[t],s=Number.MAX_SAFE_INTEGER,c=0;c<n;++c)for(var u=0;u<o;++u)s=Math.min(s,this.nglData.getAtomProxy(a+c).distanceTo(this.nglData.getAtomProxy(i+u)));return s},e}();t.ChellPDB=l},"./src/data/CouplingContainer.ts":function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t,r;void 0===e&&(e=[]);var o=this;this.contacts=new Array,this.totalStoredContacts=0,this.rowCounter=0,this.colCounter=0,this.includes=function(e,t){return void 0!==o.contacts[Math.min(e,t)-1][Math.max(e,t)-1]},this.getCouplingScore=function(e,t){return o.contacts[Math.min(e,t)-1][Math.max(e,t)-1]};try{for(var a=n(e),i=a.next();!i.done;i=a.next()){var s=i.value;this.addCouplingScore(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}return Object.defineProperty(e.prototype,"allContacts",{get:function(){return this.contacts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chainLength",{get:function(){return this.contacts.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rankedContacts",{get:function(){return Array.from(this).sort(function(e,t){return e.cn&&t.cn?t.cn-e.cn:e.cn&&!t.cn?-1:!e.cn&&t.cn?1:0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalContacts",{get:function(){return this.totalStoredContacts},enumerable:!0,configurable:!0}),e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(e){for(var t=this.rowCounter;t<this.contacts.length;++t)if(this.contacts[t]){for(var r=this.colCounter;r<this.contacts[t].length;++r){var n=this.contacts[t][r];if(n)return this.rowCounter=t,this.colCounter=r+1,{done:!1,value:n}}this.colCounter=0}return this.rowCounter=0,this.colCounter=0,{done:!0,value:null}},e.prototype.getObservedContacts=function(e,t){var r,o;void 0===e&&(e=5),void 0===t&&(t=5);var a=new Array;try{for(var i=n(this),s=i.next();!s.done;s=i.next()){var c=s.value;c.dist<=e&&Math.abs(c.i-c.j)>=t&&a.push(c)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},e.prototype.getPredictedContacts=function(e,t,r){var o,a;void 0===t&&(t=5),void 0===r&&(r=5);var i={correct:new Array,predicted:new Array};try{for(var s=n(this.rankedContacts.filter(function(e){return Math.abs(e.i-e.j)>=t}).slice(0,e)),c=s.next();!c.done;c=s.next()){var u=c.value;u.dist<r&&i.correct.push(u),i.predicted.push(u)}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return i},e.prototype.addCouplingScore=function(e){var t=e.i,r=e.j,n=Math.min(t,r)-1,o=Math.max(t,r)-1;this.contacts[n]||(this.contacts[n]=new Array),this.contacts[n][o]?this.contacts[n][o]=Object.assign(this.contacts[n][o],e):(this.totalStoredContacts++,this.contacts[n][o]=e)},e}();t.CouplingContainer=o},"./src/data/SecondaryStructureAxis.ts":function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r={C:"red",E:"green",H:"blue"});var a=this;this.colorMap=r,this.axes=new Map,this.derivePointsInAxis=function(e){for(var t={main:[e.start],opposite:[null]},r=e.start;r<=e.end;++r)t.main.push(r),t.opposite.push(1),"H"===e.label&&(t.main.push(r+.5),t.opposite.push(r%2?0:2));return t.main.push(e.end),t.opposite.push(null),t},this.deriveSymbolsInAxis=function(e){var t=new Array;t.push("line-ne");for(var r=e.start;r<e.end;++r)t.push("line-ne");return t},this.setupSecondaryStructureAxes=function(e,t){var r,n,s,c,u,l;try{for(var d=o(e),p=d.next();!p.done;p=d.next()){var f=p.value,h=f.label;a.axes.get(h)||a.axes.set(h,{x:a.generateXAxisSecStructSegment(h,t),y:a.generateYAxisSecStructSegment(h,t)});var y=a.derivePointsInAxis(f);if((s=a.axes.get(h).x.x).push.apply(s,i(y.main)),(c=a.axes.get(h).x.y).push.apply(c,i(y.opposite)),(u=a.axes.get(h).y.y).push.apply(u,i(y.main)),(l=a.axes.get(h).y.x).push.apply(l,i(y.opposite)),"E"===f.label){for(var v=new Array(a.axes.get(h).x.x.length),m=0;m<v.length-2;++m)v[m]="line-ne";a.axes.get(h).x.mode="lines+markers",a.axes.get(h).x.marker={color:a.colorMap[f.label],size:10,symbol:i(a.axes.get(h).x.marker.symbol,a.deriveSymbolsInAxis(f),["triangle-right","line-ne"])},a.axes.get(h).y.mode="lines+markers",a.axes.get(h).y.marker={color:a.colorMap[f.label],size:10,symbol:i(a.axes.get(h).y.marker.symbol,a.deriveSymbolsInAxis(f),["triangle-down","line-ne"])}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}},this.generateXAxisSecStructSegment=function(e,t){return n({},a.secondaryStructureAxisDefaults(e),{orientation:"h",x:[],xaxis:"x",y:[],yaxis:"y"+t})},this.generateYAxisSecStructSegment=function(e,t){return n({},a.secondaryStructureAxisDefaults(e),{orientation:"v",x:[],xaxis:"x"+t,y:[],yaxis:"y"})},this.secondaryStructureAxisDefaults=function(e){return{connectgaps:!1,hoverinfo:"name",line:{color:a.colorMap[e],shape:"spline",smoothing:1.3,width:"H"===e?1:2},marker:{symbol:[]},mode:"lines",name:e,showlegend:!1,type:"scatter"}},this.setupSecondaryStructureAxes(e,t+2)}return Object.defineProperty(e.prototype,"axis",{get:function(){return this.axes},enumerable:!0,configurable:!0}),e}();t.SecondaryStructureAxis=s,t.default=s},"./src/data/chell-data.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CONTACT_MAP="Contact Map",e.INFO_PANEL="Info Panel",e.NGL="NGL",e.SPRING="Spring",e["T-SNE"]="T-SNE"}(t.VIZ_TYPE||(t.VIZ_TYPE={})),function(e){e.CLOSEST="CLOSEST",e.C_ALPHA="C-"}(t.CONTACT_DISTANCE_PROXIMITY||(t.CONTACT_DISTANCE_PROXIMITY={})),function(e){e.RADIO="RADIO",e.SLIDER="SLIDER"}(t.CONFIGURATION_COMPONENT_TYPE||(t.CONFIGURATION_COMPONENT_TYPE={})),function(e){e.G="310_HELIX",e.H="ALPHA_HELIX",e.I="PI_HELIX",e.T="HYDROGEN_BONDED_TURN",e.E="BETA_SHEET",e.B="BETA_BRIDGE",e.S="BEND",e.C="COIL"}(t.SECONDARY_STRUCTURE_CODES||(t.SECONDARY_STRUCTURE_CODES={})),function(e){e[e.CLICK=0]="CLICK",e[e.HOVER=1]="HOVER",e[e.SELECTION=2]="SELECTION",e[e.UNHOVER=3]="UNHOVER"}(t.CHELL_CHART_EVENT_TYPE||(t.CHELL_CHART_EVENT_TYPE={})),function(e){e[e.AXIS=0]="AXIS",e[e.POINT=1]="POINT"}(t.CHELL_CHART_PIECE||(t.CHELL_CHART_PIECE={}))},"./src/data/event/ChellChartEvent.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/data/chell-data.ts"),o=function(){function e(e,t,r){this.type=e,this.chartPiece=t,this.selectedPoints=r}return e.prototype.isAxis=function(){return this.chartPiece===n.CHELL_CHART_PIECE.AXIS},e}();t.ChellChartEvent=o,t.default=o},"./src/helper/DataHelper.ts":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}c((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},i=this;Object.defineProperty(t,"__esModule",{value:!0});var s=r("./src/data/CouplingContainer.ts"),c=r("./src/helper/FetchHelper.ts"),u=r("./node_modules/ngl/dist/ngl.esm.js"),l=r("./src/data/chell-data.ts"),d=r("./src/data/ChellPDB.ts");t.fetchAppropriateData=function(e,r){return n(i,void 0,void 0,function(){return o(this,function(n){switch(e){case l.VIZ_TYPE["T-SNE"]:return[2,y(r)];case l.VIZ_TYPE.SPRING:return[2,p(r)];case l.VIZ_TYPE.NGL:return[2,t.fetchNGLDataFromDirectory(r)];case l.VIZ_TYPE.CONTACT_MAP:case l.VIZ_TYPE.INFO_PANEL:return[2,t.fetchContactMapData(r)];default:return[2,Promise.reject({error:"Currently no appropriate data getter for "+e})]}return[2]})})};var p=function(e){return n(i,void 0,void 0,function(){var t,r,n,a,i,s,c;return o(this,function(o){switch(o.label){case 0:return[4,h(e+"/coordinates.txt")];case 1:return t=o.sent(),[4,v(e+"/graph_data.json")];case 2:return r=o.sent(),[4,f(e+"/categorical_coloring_data.json")];case 3:for(n=o.sent(),a={},i=0;i<r.nodes.length;++i)s=r.nodes[i],a[s.number]=s,s.number in t&&(s.fixed=!0,s.x=t[s.number][0],s.y=t[s.number][1]),c=n.label_list[i],s.category=c,s.colorHex=n.label_colors[c];return r.links.forEach(function(e){var t=a[e.source],r=a[e.target];t&&r&&(e.source=t,e.target=r)}),[2,r]}})})},f=function(e){return n(i,void 0,void 0,function(){var t,r,n,i,s,u,l,d,p,f,h;return o(this,function(o){switch(o.label){case 0:return[4,c.fetchJSONFile(e)];case 1:if(n=o.sent(),i=Object.keys(n)[0],!(s=n[i]).label_colors||!s.label_list)throw new Error("Unable to parse color data - does it have keys named 'label_colors' and 'label_list'");u={label_colors:{},label_list:s.label_list},l=n[Object.keys(n)[0]].label_colors;try{for(d=a(Object.keys(l)),p=d.next();!p.done;p=d.next())f=p.value,"number"==typeof(h=l[f])?u.label_colors[f]=h:"#"===h.charAt(0)?u.label_colors[f]=Number.parseInt("0x"+h.slice(1)):u.label_colors[f]=Number.parseInt(h)}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}return[2,u]}})})},h=function(e){return n(i,void 0,void 0,function(){var t,r;return o(this,function(n){switch(n.label){case 0:return[4,c.fetchCSVFile(e)];case 1:return t=n.sent(),r=[],t.split("\n").forEach(function(e,t,n){var o=e.split(",");if(o.length>=3){var a=parseFloat(o[1].trim()),i=parseFloat(o[2].trim()),s=parseInt(o[0].trim(),10);r[s]=[a,i]}else if(0!==e.localeCompare(""))throw new Error("Unable to parse coordinate data - Row "+t+" does not have at least 3 columns!")}),[2,r]}})})},y=function(e){return n(i,void 0,void 0,function(){var t,r;return o(this,function(n){switch(n.label){case 0:return[4,c.fetchCSVFile(e+"/tsne_output.csv")];case 1:return t=n.sent(),r=[],t.split("\n").forEach(function(e,t,n){if(e.length>0){var o=e.split(","),a=[parseFloat(o[0]),parseFloat(o[1])];r.push(a)}}),[2,r]}})})},v=function(e){return n(i,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return[4,c.fetchJSONFile(e)];case 1:if(!(t=r.sent()).nodes||!t.links)throw new Error("Unable to parse graph data - does it have keys named 'nodes' and 'links'");return[2,t]}})})};t.fetchNGLDataFromDirectory=function(e){return n(i,void 0,void 0,function(){var r;return o(this,function(n){return 0===e.length?[2,Promise.reject("Empty path.")]:(r=e+"/protein.pdb",[2,t.fetchNGLDataFromFile(r)])})})},t.fetchNGLDataFromFile=function(e){return n(i,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,u.autoLoad(e)];case 1:return[2,t.sent()]}})})},t.fetchContactMapData=function(e){return n(i,void 0,void 0,function(){var r,n,a;return o(this,function(o){switch(o.label){case 0:return 0===e.length?[2,Promise.reject("Empty path.")]:(r=["coupling_scores.csv","distance_map.csv"],[4,Promise.all(r.map(function(t){return c.fetchCSVFile(e+"/"+t)}))]);case 1:return n=o.sent(),[4,d.ChellPDB.createPDB(e+"/protein.pdb")];case 2:return a=o.sent(),[2,{couplingScores:t.getCouplingScoresData(n[0]),pdbData:a,secondaryStructures:a.rawsecondaryStructure}]}})})},t.getCouplingScoresData=function(e){var t=new s.CouplingContainer;return e.split("\n").slice(1).filter(function(e){return e.split(",").length>=13}).map(function(e){var r=e.split(",");t.addCouplingScore({i:parseFloat(r[0]),A_i:r[1],j:parseFloat(r[2]),A_j:r[3],fn:parseFloat(r[4]),cn:parseFloat(r[5]),segment_i:r[6],segment_j:r[7],probability:parseFloat(r[8]),dist_intra:parseFloat(r[9]),dist_multimer:parseFloat(r[10]),dist:parseFloat(r[11]),precision:parseFloat(r[12])})}),t},t.getSecondaryStructureData=function(e){return e.split("\n").slice(1).filter(function(e){return e.split(",").length>=3}).map(function(e){var t=e.split(",");return{resno:parseFloat(t[1]),structId:t[2]}})}},"./src/helper/FetchHelper.ts":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}c((n=n.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this;Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCSVFile=function(e){return n(a,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return[4,fetch(e)];case 1:return(t=r.sent()).ok?[4,t.text()]:[3,3];case 2:return[2,r.sent()];case 3:throw new Error(i("CSV",t))}})})},t.fetchJSONFile=function(e){return n(a,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return[4,fetch(e)];case 1:return(t=r.sent()).ok?[4,t.json()]:[3,3];case 2:return[2,r.sent()];case 3:throw new Error(i("JSON",t))}})})};var i=function(e,t){return"Chell-viz error fetching "+e+" File!\nStatus: "+t.status+"\nMessage: "+t.statusText+"\n"}},"./src/helper/NGLHelper.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDistanceRepresentation=function(e,t,r,n){return void 0===r&&(r="skyblue"),void 0===n&&(n="angstrom"),e.addRepresentation("distance",{atomPair:[t.split(",")],color:r,labelUnit:n})},t.createBallStickRepresentation=function(e,t){return e.addRepresentation("ball+stick",{sele:t.join(", ")})},t.createSecStructRepresentation=function(e,t,r,n){void 0===r&&(r=2),void 0===n&&(n="yellow");var o=e.addRepresentation("cartoon",{color:n,radiusScale:r,sele:t.start+"-"+t.end});return o.setParameters({wireframe:!0}),o}},"./src/helper/PlotlyHelper.ts":function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/component/chart/PlotlyChart.tsx");t.generateScatterGLData=function(e,r){return void 0===r&&(r=!1),n({},t.generateScatterData(e,r),{type:i.PLOTLY_CHART_TYPE.scattergl})},t.generateScatterData=function(e,t){void 0===t&&(t=!1);var r=e.marker,n=e.points,o=e.subtitle,s=e.name,c=n.map(function(e){return e.i}),u=n.map(function(e){return e.j}),l=n.map(function(e){return e.dist});return{hoverinfo:"x+y+z",marker:Object.assign({color:t?l.concat(l):l,size:e.nodeSize},r),mode:"markers",name:s+" "+o,type:i.PLOTLY_CHART_TYPE.scatter,x:t?a(c,u):c,y:t?a(u,c):u,z:t?a(l,l):l}},t.generateFloat32ArrayFromContacts=function(e){var t=new Float32Array(2*e.length);return e.forEach(function(e,r){t[2*r]=e.i,t[2*r+1]=e.j}),t},t.generatePointCloudData=function(e,r){void 0===r&&(r=!1);var o=e.points,s=t.generateFloat32ArrayFromContacts(o);return{marker:n({},e.marker,{sizemax:2*e.nodeSize,sizemin:e.nodeSize}),mode:"markers",type:i.PLOTLY_CHART_TYPE.pointcloud,xy:r?new Float32Array(a(Array.from(s),Array.from(s).slice().reverse())):s}}},"./src/helper/ReactHelper.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDefaultProps=function(e,t){return t.defaultProps=e,t}}});