(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./examples/example.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/react/index.js"),u=n("./node_modules/react-dom/index.js"),d=n("./node_modules/semantic-ui-react/dist/es/index.js"),p=n("./src/index.ts"),m=function(e){function t(n){var r=e.call(this,n)||this;return r.renderCouplingComponents=function(e,t){var n=(void 0===e?r.props:e).style,o=void 0===t?r.state:t,i=o.arePredictionsAvailable,a=o.couplingScores,s=o.errorMsg,l=o.isResidueMappingNeeded,u=o.measuredProximity,m=o.pdbData;return c.createElement("div",null,c.createElement(d.Header,{as:"h1",attached:"top"},"ContactMap.org: 2D and 3D Visualization"),s.length>1&&r.renderErrorMessage(),!m&&0===a.length&&r.renderStartMessage(),c.createElement(d.Segment,{attached:!0,raised:!0},c.createElement(p.CouplingContextProvider,null,c.createElement(p.SecondaryStructureContextReadConsumer,null,function(e){return c.createElement(d.Message,null,"Selected sec structures are: "+JSON.stringify(e.selectedSecondaryStructures))}),c.createElement(p.SecondaryStructureContextConsumer,null,function(e){return c.createElement(p.ResidueContextConsumer,null,function(t){return c.createElement(d.Grid,{centered:!0},r.renderUploadButtonsRow(l,t,e),r.renderChellComponents(n,i,u,m))})}))),r.renderFooter())},r.renderErrorMessage=function(e){var t=void 0===e?r.state:e,n=t.errorMsg,o=t.isResidueMappingNeeded,i=t.mismatches,a=t.pdbData;return c.createElement(d.Message,{warning:!0},o&&a?c.createElement("div",null,c.createElement(d.Message.Header,null,"Residue numbering mismatch detected. Please upload a file to correct the position numbering differences.",c.createElement("br",null),"EVCouplings and EVFold outputs this file in the ",c.createElement("strong",null,"OUTPUT")," directory.\n                This file might be named similar to\n                '"+a.name+".csv' or '"+a.name+".indextableplus'"),c.createElement(d.Message.List,null,n),c.createElement(d.Message.Content,null,c.createElement(d.Accordion,{fluid:!0,exclusive:!1,defaultActiveIndex:[],panels:[r.renderSequenceAccordionMessage("PDB sequence",a.sequence,i),r.renderSequenceAccordionMessage("Couplings Score sequence",r.state[p.VIZ_TYPE.CONTACT_MAP].couplingScores.sequence,i)]}))):n)},r.renderFooter=function(){var e=c.createElement("a",{href:"https://github.com/cBioCenter/chell-viz"},"Chell"),t=[c.createElement(c.Fragment,null,"Powered by ",e,"!"),c.createElement(c.Fragment,null,"They love me at the ",e,"sea."),c.createElement(c.Fragment,null,"Today's visualization has been brought to you by ",e,"."),c.createElement(c.Fragment,null,e,"sea, ",e,"sea, I believe..."),c.createElement(c.Fragment,null,"Now you're thinking with ",e,"!"),c.createElement(c.Fragment,null,"And ",e,"sea says she's got nowhere to go...")].map(function(e){return c.createElement(c.Fragment,{key:"random-chell-saying"},e)}),n=t[Math.floor(Math.random()*t.length)];return c.createElement("footer",{style:{padding:"25vh 0 25px 25px"}},n)},r.renderSequenceAccordionMessage=function(e,t,n){var r,o,i=0,a=new Array;try{for(var s=l(n),u=s.next();!u.done;u=s.next()){var d=u.value;a.push(c.createElement(c.Fragment,{key:"mismatch-"+d.resno},c.createElement("span",{style:{color:"black",fontSize:"12px"}},t.substr(i,d.resno)),c.createElement("span",{style:{color:"red",fontSize:"16px",textDecoration:"underline"}},t.charAt(d.resno)))),i=d.resno+2}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a.push(c.createElement("span",{key:"mismatch-final",style:{color:"black",fontSize:"12px"}},t.substr(i))),{content:{content:c.createElement("p",{style:{width:"80%",wordBreak:"break-word"}},a)},key:"panel-"+e,title:{content:e+" ("+t.length+" Amino Acids)"}}},r.renderStartMessage=function(){return c.createElement(d.Message,null,"To get started, please upload either a PDB (.pdb) or EVCouplings score (.csv) file!"," ",c.createElement("br",null)," Check out the",c.createElement("a",{href:"evfold.org"}," EVFold"),", ",c.createElement("a",{href:"sanderlab.org/contact-maps/"},"Sander Lab"),", or",c.createElement("a",{href:"https://evcouplings.org/"}," EVCouplings ")," website to get these files.")},r.renderUploadForm=function(e,t,n,r,o){return void 0===o&&(o=[]),c.createElement(d.GridColumn,null,c.createElement(d.Label,{as:"label",basic:!0,htmlFor:t},c.createElement(d.Button,{disabled:r,icon:"upload",label:{basic:!0,content:n},labelPosition:"right"}),c.createElement("input",{accept:"."+o.join(",."),disabled:r,id:t,onChange:e,hidden:!0,type:"file",required:!0,multiple:!1})))},r.renderUploadLabel=function(e){return e?c.createElement(d.GridColumn,{verticalAlign:"middle",textAlign:"justified"},c.createElement(d.Label,null,e)):null},r.renderCouplingScoresUploadForm=function(e){var t=void 0===e?r.state:e,n=t.couplingScores,o=t.filenames;return c.createElement(d.GridRow,null,r.renderUploadLabel(o.couplings),r.renderUploadForm(r.onCouplingScoreUpload,"coupling-score","Coupling Scores",n.length>0,["csv"]))},r.renderChellComponents=function(e,t,n,o,i){return void 0===i&&(i="550px"),c.createElement(d.GridRow,{verticalAlign:"middle"},c.createElement(d.GridColumn,{width:6},c.createElement(d.Card,{raised:!0,style:{height:"615px",padding:"15px 15px 0 15px",width:"600px"}},c.createElement(p.NGLComponent,{data:r.state[p.VIZ_TYPE.NGL].pdbData,height:i,isDataLoading:r.state[p.VIZ_TYPE.NGL].isLoading,measuredProximity:n,onMeasuredProximityChange:r.onMeasuredProximityChange(),style:e,width:i}))),c.createElement(d.GridColumn,{width:6},c.createElement(d.Card,{raised:!0,style:{height:"615px",padding:"15px 15px 0 15px",width:"600px"}},t?c.createElement(p.PredictedContactMap,{data:{couplingScores:r.state[p.VIZ_TYPE.CONTACT_MAP].couplingScores,pdbData:o,secondaryStructures:r.state[p.VIZ_TYPE.CONTACT_MAP].secondaryStructures},height:i,isDataLoading:r.state[p.VIZ_TYPE.CONTACT_MAP].isLoading,style:e,width:i}):c.createElement(p.ContactMap,{data:{couplingScores:r.state[p.VIZ_TYPE.CONTACT_MAP].couplingScores,pdbData:o,secondaryStructures:r.state[p.VIZ_TYPE.CONTACT_MAP].secondaryStructures},height:i,isDataLoading:r.state[p.VIZ_TYPE.CONTACT_MAP].isLoading,style:e,width:i}))))},r.renderUploadButtonsRow=function(e,t,n){return c.createElement(d.GridRow,{columns:4,centered:!0,textAlign:"center",verticalAlign:"bottom"},c.createElement(d.GridColumn,null,r.renderPDBUploadForm()),c.createElement(d.GridColumn,null,r.renderCouplingScoresUploadForm()),e&&c.createElement(d.GridColumn,null,r.renderResidueMappingUploadForm()),c.createElement(d.GridColumn,null,r.renderClearAllButton(t,n)))},r.renderPDBUploadForm=function(e){var t=void 0===e?r.state:e,n=t.filenames,o=t.pdbData;return c.createElement(d.GridRow,null,r.renderUploadLabel(n.pdb),r.renderUploadForm(r.onPDBUpload,"pdb","PDB",void 0!==o,["pdb"]))},r.renderResidueMappingUploadForm=function(e){var t=(void 0===e?r.state:e).filenames;return c.createElement(d.GridRow,{verticalAlign:"middle",columns:1,centered:!0},r.renderUploadLabel(t.residue_mapper),r.renderUploadForm(r.onResidueMappingUpload,"residue-mapping","Residue Mapping",!1,["csv","indextable","indextableplus"]))},r.renderClearAllButton=function(e,t){return c.createElement(d.GridRow,{verticalAlign:"middle",columns:1,centered:!0},c.createElement(d.GridColumn,null,c.createElement(d.Label,{as:"label",basic:!0,htmlFor:"clear-data"},c.createElement(d.Button,{icon:"trash",label:{basic:!0,content:"Clean View"},labelPosition:"right",onClick:r.onClearAll(e,t)}))))},r.onClearAll=function(e,n){return function(){return a(r,void 0,void 0,function(){return s(this,function(r){return this.setState(t.initialState),e.clearAllResidues(),n.clearAllSecondaryStructures(),this.forceUpdate(),[2]})})}},r.onCouplingScoreUpload=function(e){return a(r,void 0,void 0,function(){var t,n,r,o,a,l,c,u,d,m,h,f;return s(this,function(s){switch(s.label){case 0:if(e.persist(),r=this.state,o=r.measuredProximity,a=r.pdbData,l=e.target.files,null===(c=l?l.item(0):null))return[3,6];if(!c.name.endsWith(".csv"))return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),this.setState(((t={})[p.VIZ_TYPE.CONTACT_MAP]=i({},this.state[p.VIZ_TYPE.CONTACT_MAP],{isLoading:!0}),t)),[4,p.readFileAsText(c)];case 2:return u=s.sent(),d=p.getCouplingScoresData(u,this.state.residueMapping),m=a?a.getResidueNumberingMismatches(d):[],h=m.length>0,this.setState(((n={})[p.VIZ_TYPE.CONTACT_MAP]={couplingScores:a?a.amendPDBWithCouplingScores(d.rankedContacts,o):d,isLoading:!1,pdbData:this.state.pdbData,secondaryStructures:[]},n.arePredictionsAvailable=!0,n.couplingScores=u,n.errorMsg="",n.filenames=i({},this.state.filenames,{couplings:c.name}),n.isResidueMappingNeeded=h,n)),[3,4];case 3:return f=s.sent(),console.log(f),[3,4];case 4:return[3,6];case 5:this.setState({errorMsg:"Unable to load Coupling Score file '"+c.name+"' - Make sure the file ends in '.csv'!"}),s.label=6;case 6:return e.target.value="",[2]}})})},r.onPDBUpload=function(e){return a(r,void 0,void 0,function(){var t,n,r,o,a,l,c;return s(this,function(s){switch(s.label){case 0:return e.persist(),r=this.state.measuredProximity,o=e.target.files,null===(a=o?o.item(0):null)?[3,3]:a.name.endsWith(".pdb")?(this.setState(((t={})[p.VIZ_TYPE.CONTACT_MAP]=i({},this.state[p.VIZ_TYPE.CONTACT_MAP],{isLoading:!0}),t[p.VIZ_TYPE.NGL]=i({},this.state[p.VIZ_TYPE.NGL],{isLoading:!0}),t)),[4,p.ChellPDB.createPDB(a)]):[3,2];case 1:return l=s.sent(),c=l.amendPDBWithCouplingScores(this.state[p.VIZ_TYPE.CONTACT_MAP].couplingScores.rankedContacts,r),this.setState(((n={})[p.VIZ_TYPE.CONTACT_MAP]={couplingScores:c,isLoading:!1,pdbData:l,secondaryStructures:l.secondaryStructureSections},n[p.VIZ_TYPE.NGL]={isLoading:!1,pdbData:l.nglStructure},n.errorMsg="",n.filenames=i({},this.state.filenames,{pdb:a.name}),n.pdbData=l,n)),[3,3];case 2:this.setState({errorMsg:"Unable to load PDB file '"+a.name+"' - Make sure the file ends in '.pdb'!"}),s.label=3;case 3:return e.target.value="",[2]}})})},r.onMeasuredProximityChange=function(){return function(e){r.setState({measuredProximity:Object.values(p.CONTACT_DISTANCE_PROXIMITY)[e]})}},r.onResidueMappingUpload=function(e){return a(r,void 0,void 0,function(){var t,n,r,o,a,l,c,u,d,m,h,f;return s(this,function(s){switch(s.label){case 0:if(e.persist(),r=this.state,o=r.measuredProximity,a=r.pdbData,l=e.target.files,c=l?l.item(0):null,u=["csv","indextable","indextableplus"],null===c)return[3,6];if(!u.reduce(function(e,t){return e||c.name.endsWith("."+t)},!1))return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),this.setState(((t={})[p.VIZ_TYPE.CONTACT_MAP]=i({},this.state[p.VIZ_TYPE.CONTACT_MAP],{isLoading:!0}),t)),[4,p.readFileAsText(c)];case 2:return d=s.sent(),m=p.generateResidueMapping(d),h=p.getCouplingScoresData(this.state.couplingScores,m),this.setState(((n={})[p.VIZ_TYPE.CONTACT_MAP]={couplingScores:a?a.amendPDBWithCouplingScores(h.rankedContacts,o):h,isLoading:!1,secondaryStructures:[]},n.errorMsg="",n.filenames=i({},this.state.filenames,{residue_mapper:c.name}),n.residueMapping=m,n)),[3,4];case 3:return f=s.sent(),console.log(f),[3,4];case 4:return[3,6];case 5:this.setState({errorMsg:"Unable to load Residue Mapping file '"+c.name+"' - Make sure the file ends in one of the following: '"+u.join("', '")+"'"}),s.label=6;case 6:return e.target.value="",[2]}})})},r.state=t.initialState,r}return o(t,e),t.prototype.componentDidUpdate=function(e,t){var n,r=this.state,o=r.measuredProximity,i=r.pdbData,a=this.state[p.VIZ_TYPE.CONTACT_MAP].couplingScores,s="",l=this.state.mismatches,c=this.state.isResidueMappingNeeded;!i||a===t[p.VIZ_TYPE.CONTACT_MAP].couplingScores&&i===t.pdbData||(l=p.getPDBAndCouplingMismatch(i,a)).length>=1&&(s="Error details: "+l.length+" mismatch(es) detected between coupling scores and PDB!        For example, residue number "+l[0].resno+" is '"+l[0].secondAminoAcid.threeLetterCode+"' in the PDB but '"+l[0].firstAminoAcid.threeLetterCode+"' in the coupling scores file.",c=!0),i&&o!==t.measuredProximity?this.setState(((n={})[p.VIZ_TYPE.CONTACT_MAP]={couplingScores:i.amendPDBWithCouplingScores(a.rankedContacts,o),isLoading:!1,pdbData:this.state.pdbData,secondaryStructures:[]},n.errorMsg=s,n.isResidueMappingNeeded=c,n.mismatches=l,n)):s.length>=1&&this.setState({errorMsg:s,isResidueMappingNeeded:c,mismatches:l})},t.prototype.render=function(e){var t=(void 0===e?this.props:e).style;return c.createElement("div",{id:"ChellVizApp",style:i({},t,{height:"1000px"})},this.renderCouplingComponents())},t.defaultProps={style:{backgroundColor:"#ffffff"}},t.initialState=((r={})[p.VIZ_TYPE.CONTACT_MAP]={couplingScores:new p.CouplingContainer,isLoading:!1,pdbData:void 0,secondaryStructures:[]},r[p.VIZ_TYPE.NGL]={isLoading:!1,pdbData:void 0},r.arePredictionsAvailable=!1,r.couplingScores="",r.errorMsg="",r.filenames={},r.isResidueMappingNeeded=!1,r.measuredProximity=p.CONTACT_DISTANCE_PROXIMITY.CLOSEST,r.mismatches=[],r.pdbData=void 0,r.residueMapping=[],r),t}(c.Component);u.render(c.createElement(m,null),document.getElementById("example-root"))},"./src/ChellVizApp.tsx":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/index.js"),i=n("./node_modules/semantic-ui-react/dist/es/index.js"),a=n("./src/container/index.ts"),s=n("./src/data/index.ts"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return o.createElement("div",{id:"ChellVizApp"},o.createElement(i.Grid,{centered:!0,divided:"vertically"},o.createElement(i.GridRow,null,o.createElement(a.VizPanelContainer,{dataDirs:["hpc/full"].map(function(e){return"assets/datasets/"+e}),initialVisualizations:[s.VIZ_TYPE.SPRING,s.VIZ_TYPE["TENSOR-T-SNE"]],supportedVisualizations:[s.VIZ_TYPE.SPRING,s.VIZ_TYPE["TENSOR-T-SNE"]],numPanels:2}))))},t}(o.Component);t.ChellVizApp=l},"./src/hoc/ContextConsumerComposer.tsx":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/index.js"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.components;return a(t,n)},t}(o.Component);t.ContextConsumerComposer=i;var a=function(e,t,n){if(void 0===n&&(n=[]),!t[0])return e(n);var r=t[0];return o.cloneElement(o.createElement(r,null,function(r){return a(e,t.slice(1),n.concat([r]))}),{displayName:r.displayName})}},"./src/hoc/SettingsPanelComposer.tsx":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),s=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=n("./src/component/index.ts");t.withSettingsPanel=function(e){var t;return(t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.prototype.render=function(){var t=this.props,n=t.configurations,r=t.isDataLoading,c=t.showConfigurations,u=i(t,["configurations","isDataLoading","showConfigurations"]);return a.createElement(s.Dimmer.Dimmable,{dimmed:!0},a.createElement(s.Dimmer,{active:r},a.createElement(s.Loader,null)),a.createElement(l.SettingsPanel,{configurations:n,showConfigurations:c,width:u.width},a.createElement(e,o({},u))))},n}(a.Component)).WrappedComponent=e,t}},"./src/hoc/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/hoc/ContextConsumerComposer.tsx")),r(n("./src/hoc/SettingsPanelComposer.tsx"))},"./src/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/component/index.ts")),r(n("./src/container/index.ts")),r(n("./src/context/index.ts")),r(n("./src/data/index.ts")),r(n("./src/helper/index.ts")),r(n("./src/hoc/index.ts")),r(n("./src/ChellVizApp.tsx"))}},[["./examples/example.tsx",5,1,0]]]);