!function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],i[o]&&p.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={3:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push(["./examples/example.tsx",0,1]),n()}({"./examples/example.tsx":function(e,t,n){"use strict";var r,i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,s)}l((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/react/index.js"),c=n("./node_modules/react-dom/index.js"),u=n("./node_modules/semantic-ui-react/dist/es/index.js"),d=n("./src/index.ts"),p=function(e){function t(n){var r=e.call(this,n)||this;return r.renderCouplingComponents=function(e,t){var n=(void 0===e?r.props:e).style,i=void 0===t?r.state:t,o=i.arePredictionsAvailable,s=i.errorMsg,c=i.isResidueMappingNeeded,p=i.pdbData;return l.createElement("div",null,l.createElement(u.Header,{as:"h1",attached:"top"},"Chell - ContactMap.IO"),s.length>1&&r.renderErrorMessage(),l.createElement(u.Segment,{attached:!0,raised:!0},l.createElement(d.CouplingContextClass,null,l.createElement(d.ResidueContextWrapper.Consumer,null,function(e){return l.createElement(u.Grid,{centered:!0},l.createElement(u.GridRow,{verticalAlign:"middle"},l.createElement(u.GridColumn,{width:6},l.createElement(d.NGLComponent,{data:r.state[d.VIZ_TYPE.NGL].pdbData,isDataLoading:r.state[d.VIZ_TYPE.NGL].isLoading,measuredProximity:r.state.measuredProximity,style:a({},n,{width:400})})),l.createElement(u.GridColumn,{width:6},o?l.createElement(d.PredictedContactMap,{data:{couplingScores:r.state[d.VIZ_TYPE.CONTACT_MAP].couplingScores,pdbData:p,secondaryStructures:r.state[d.VIZ_TYPE.CONTACT_MAP].secondaryStructures},isDataLoading:r.state[d.VIZ_TYPE.CONTACT_MAP].isLoading,style:a({},n,{width:400})}):l.createElement(d.ContactMap,{data:{couplingScores:r.state[d.VIZ_TYPE.CONTACT_MAP].couplingScores,pdbData:p,secondaryStructures:r.state[d.VIZ_TYPE.CONTACT_MAP].secondaryStructures},isDataLoading:r.state[d.VIZ_TYPE.CONTACT_MAP].isLoading,style:a({},n,{width:400})}))),l.createElement(u.GridRow,{columns:4,centered:!0,textAlign:"center",verticalAlign:"top"},l.createElement(u.GridColumn,null,r.renderPDBUploadForm()),l.createElement(u.GridColumn,null,r.renderCouplingScoresUploadForm()),c&&l.createElement(u.GridColumn,null,r.renderResidueMappingUploadForm()),l.createElement(u.GridColumn,null,r.renderClearAllButton(e))))}))))},r.renderErrorMessage=function(e){var t=void 0===e?r.state:e,n=t.errorMsg,i=t.isResidueMappingNeeded;return l.createElement(u.Message,{warning:!0},i&&r.state.pdbData?l.createElement("div",null,l.createElement(u.Message.Header,null,"Residue numbering mismatch detected - Please upload a residue mapping file to correct the position numbering differences!"),l.createElement(u.Message.List,null,n),l.createElement(u.Message.Content,null,l.createElement(u.Accordion,{fluid:!0,exclusive:!1,defaultActiveIndex:[],panels:[r.renderSequenceAccordionMessage("PDB",r.state.pdbData.sequence),r.renderSequenceAccordionMessage("Couplings Score",r.state[d.VIZ_TYPE.CONTACT_MAP].couplingScores.sequence)]}))):n)},r.renderSequenceAccordionMessage=function(e,t){return{content:{content:l.createElement(u.TextArea,{style:{width:"90%"},value:t})},key:"panel-"+e,title:{content:e+" ("+t.length+" Amino Acids)"}}},r.renderUploadForm=function(e,t,n,r){return void 0===r&&(r=!1),l.createElement(u.GridColumn,null,l.createElement(u.Label,{as:"label",basic:!0,htmlFor:t},l.createElement(u.Button,{disabled:r,icon:"upload",label:{basic:!0,content:n},labelPosition:"right"}),l.createElement("input",{disabled:r,id:t,onChange:e,hidden:!0,type:"file",required:!0,multiple:!1})))},r.renderUploadLabel=function(e){return e?l.createElement(u.GridColumn,{verticalAlign:"middle",textAlign:"justified"},l.createElement(u.Label,null,e)):null},r.renderCouplingScoresUploadForm=function(e){var t=void 0===e?r.state:e,n=t.couplingScores,i=t.filenames;return l.createElement(u.GridRow,null,r.renderUploadLabel(i.couplings),r.renderUploadForm(r.onCouplingScoreUpload,"coupling-score","Coupling Scores",n.length>0))},r.renderPDBUploadForm=function(e){var t=void 0===e?r.state:e,n=t.filenames,i=t.pdbData;return l.createElement(u.GridRow,null,r.renderUploadLabel(n.pdb),r.renderUploadForm(r.onPDBUpload,"pdb","PDB",void 0!==i))},r.renderResidueMappingUploadForm=function(e){var t=(void 0===e?r.state:e).filenames;return l.createElement(u.GridRow,{verticalAlign:"middle",columns:1,centered:!0},r.renderUploadLabel(t.residue_mapper),r.renderUploadForm(r.onResidueMappingUpload,"residue-mapping","Residue Mapping"))},r.renderClearAllButton=function(e){return l.createElement(u.GridRow,{verticalAlign:"middle",columns:1,centered:!0},l.createElement(u.GridColumn,null,l.createElement(u.Label,{as:"label",basic:!0,htmlFor:"clear-data"},l.createElement(u.Button,{icon:"trash",label:{basic:!0,content:"Clear Data"},labelPosition:"right",onClick:r.onClearAll(e)}))))},r.onClearAll=function(e){return function(){return o(r,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.setState(t.initialState)];case 1:return n.sent(),e.clearAllResidues(),[4,this.forceUpdate()];case 2:return n.sent(),[2]}})})}},r.onCouplingScoreUpload=function(e){return o(r,void 0,void 0,function(){var t,n,r,i,o,l,c,u,p,m,f,g;return s(this,function(s){switch(s.label){case 0:if(e.persist(),r=this.state,i=r.measuredProximity,o=r.pdbData,l=e.target.files,null===(c=l?l.item(0):null))return[3,6];if(!c.name.endsWith(".csv"))return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),this.setState(((t={})[d.VIZ_TYPE.CONTACT_MAP]=a({},this.state[d.VIZ_TYPE.CONTACT_MAP],{isLoading:!0}),t)),[4,d.readFileAsText(c)];case 2:return u=s.sent(),p=d.getCouplingScoresData(u,this.state.residueMapping),m=o?o.getResidueNumberingMismatches(p):[],f=m.length>0,this.setState(((n={})[d.VIZ_TYPE.CONTACT_MAP]={couplingScores:o?o.amendPDBWithCouplingScores(p.rankedContacts,i):p,isLoading:!1,pdbData:this.state.pdbData,secondaryStructures:[]},n.arePredictionsAvailable=!0,n.couplingScores=u,n.errorMsg="",n.filenames=a({},this.state.filenames,{couplings:c.name}),n.isResidueMappingNeeded=f,n)),[3,4];case 3:return g=s.sent(),console.log(g),[3,4];case 4:return[3,6];case 5:this.setState({errorMsg:"Unable to load Coupling Score file '"+c.name+"' - Make sure the file ends in '.csv'!"}),s.label=6;case 6:return e.target.value="",[2]}})})},r.onPDBUpload=function(e){return o(r,void 0,void 0,function(){var t,n,r,i,o,l,c;return s(this,function(s){switch(s.label){case 0:return e.persist(),r=this.state.measuredProximity,i=e.target.files,null===(o=i?i.item(0):null)?[3,3]:o.name.endsWith(".pdb")?(this.setState(((t={})[d.VIZ_TYPE.CONTACT_MAP]=a({},this.state[d.VIZ_TYPE.CONTACT_MAP],{isLoading:!0}),t[d.VIZ_TYPE.NGL]=a({},this.state[d.VIZ_TYPE.NGL],{isLoading:!0}),t)),[4,d.ChellPDB.createPDB(o)]):[3,2];case 1:return l=s.sent(),c=l.amendPDBWithCouplingScores(this.state[d.VIZ_TYPE.CONTACT_MAP].couplingScores.rankedContacts,r),this.setState(((n={})[d.VIZ_TYPE.CONTACT_MAP]={couplingScores:c,isLoading:!1,pdbData:l,secondaryStructures:l.secondaryStructureSections},n[d.VIZ_TYPE.NGL]={isLoading:!1,pdbData:l.nglStructure},n.errorMsg="",n.filenames=a({},this.state.filenames,{pdb:o.name}),n.pdbData=l,n)),[3,3];case 2:this.setState({errorMsg:"Unable to load PDB file '"+o.name+"' - Make sure the file ends in '.pdb'!"}),s.label=3;case 3:return e.target.value="",[2]}})})},r.onMeasuredProximityChange=function(){return function(e){r.setState({measuredProximity:Object.values(d.CONTACT_DISTANCE_PROXIMITY)[e]})}},r.onResidueMappingUpload=function(e){return o(r,void 0,void 0,function(){var t,n,r,i,o,l,c,u,p,m,f,g;return s(this,function(s){switch(s.label){case 0:if(e.persist(),r=this.state,i=r.measuredProximity,o=r.pdbData,l=e.target.files,c=l?l.item(0):null,u=["csv","indextable","indextableplus"],null===c)return[3,6];if(!u.reduce(function(e,t){return e||c.name.endsWith("."+t)},!1))return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),this.setState(((t={})[d.VIZ_TYPE.CONTACT_MAP]=a({},this.state[d.VIZ_TYPE.CONTACT_MAP],{isLoading:!0}),t)),[4,d.readFileAsText(c)];case 2:return p=s.sent(),m=d.generateResidueMapping(p),f=d.getCouplingScoresData(this.state.couplingScores,m),this.setState(((n={})[d.VIZ_TYPE.CONTACT_MAP]={couplingScores:o?o.amendPDBWithCouplingScores(f.rankedContacts,i):f,isLoading:!1,secondaryStructures:[]},n.errorMsg="",n.filenames=a({},this.state.filenames,{residue_mapper:c.name}),n.residueMapping=m,n)),[3,4];case 3:return g=s.sent(),console.log(g),[3,4];case 4:return[3,6];case 5:this.setState({errorMsg:"Unable to load Residue Mapping file '"+c.name+"' - Make sure the file ends in one of the following: '"+u.join("', '")+"'"}),s.label=6;case 6:return e.target.value="",[2]}})})},r.state=t.initialState,r}return i(t,e),t.prototype.componentDidUpdate=function(e,t){var n=this.state.pdbData,r=this.state[d.VIZ_TYPE.CONTACT_MAP].couplingScores;if(n&&(r!==t[d.VIZ_TYPE.CONTACT_MAP].couplingScores||n!==t.pdbData)){var i=n.getResidueNumberingMismatches(r);i.length>=1&&this.setState({errorMsg:i.length+" mismatches detected between coupling scores and PDB!",isResidueMappingNeeded:!0})}},t.prototype.render=function(e){var t=(void 0===e?this.props:e).style;return l.createElement("div",{id:"ChellVizApp",style:a({},t,{height:"1000px"})},this.renderCouplingComponents())},t.defaultProps={style:{backgroundColor:"#ffffff"}},t.initialState=((r={})[d.VIZ_TYPE.CONTACT_MAP]={couplingScores:new d.CouplingContainer,isLoading:!1,pdbData:void 0,secondaryStructures:[]},r[d.VIZ_TYPE.NGL]={isLoading:!1,pdbData:void 0},r.arePredictionsAvailable=!1,r.couplingScores="",r.errorMsg="",r.filenames={},r.isResidueMappingNeeded=!1,r.measuredProximity=d.CONTACT_DISTANCE_PROXIMITY.CLOSEST,r.pdbData=void 0,r.residueMapping=[],r),t}(l.Component);c.render(l.createElement(p,null),document.getElementById("example-root"))},"./src/ChellVizApp.tsx":function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),a=n("./node_modules/semantic-ui-react/dist/es/index.js"),o=n("./src/container/index.ts"),s=n("./src/data/index.ts"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return i.createElement("div",{id:"ChellVizApp"},i.createElement(a.Grid,{centered:!0,divided:"vertically"},i.createElement(a.GridRow,null,i.createElement(o.VizPanelContainer,{dataDirs:["hpc/full"].map(function(e){return"assets/datasets/"+e}),initialVisualizations:[s.VIZ_TYPE["T-SNE"],s.VIZ_TYPE.SPRING,s.VIZ_TYPE["T-SNE-FRAME"]],supportedVisualizations:[s.VIZ_TYPE["T-SNE"],s.VIZ_TYPE.SPRING,s.VIZ_TYPE["T-SNE-FRAME"]],numPanels:3})),i.createElement(a.GridRow,null,i.createElement(o.VizPanelContainer,{dataDirs:["assets/beta_lactamase","assets/5P21","assets/P01112"],supportedVisualizations:[s.VIZ_TYPE.CONTACT_MAP,s.VIZ_TYPE.NGL],initialVisualizations:[s.VIZ_TYPE.CONTACT_MAP,s.VIZ_TYPE.NGL],numPanels:2}))))},t}(i.Component);t.ChellVizApp=l},"./src/hoc/DimmedLoader.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/index.js"),i=n("./node_modules/semantic-ui-react/dist/es/index.js");t.DimmedLoader=function(e,t){return r.createElement(i.Dimmer.Dimmable,{dimmed:!0},r.createElement(i.Dimmer,{active:t},r.createElement(i.Loader,null)),e)}},"./src/hoc/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/hoc/DimmedLoader.tsx"))},"./src/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/component/index.ts")),r(n("./src/container/index.ts")),r(n("./src/context/index.ts")),r(n("./src/data/index.ts")),r(n("./src/helper/index.ts")),r(n("./src/hoc/index.ts")),r(n("./src/ChellVizApp.tsx"))}});