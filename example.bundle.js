!function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={1:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push(["./examples/example.tsx",2]),n()}({"./examples/example.tsx":function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},u=this;Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/react/index.js"),p=n("./node_modules/react-dom/index.js"),f=n("./node_modules/react-redux/es/index.js"),h=n("./node_modules/redux/es/redux.js"),m=n("./node_modules/semantic-ui-react/dist/es/index.js"),y=n("./src/action/index.ts"),g=n("./src/container/index.ts"),v=n("./src/data/index.ts"),b=n("./src/helper/index.ts"),_=n("./src/reducer/index.ts"),C=n("./src/singlepage/index.ts");t.fetchFastaFile=function(e){return s(u,void 0,void 0,function(){var t,n,r;return c(this,function(o){switch(o.label){case 0:return[4,fetch(e)];case 1:return(t=o.sent()).ok?(r=(n=v.SeqIO).parseFile,[4,t.text()]):[3,3];case 2:return[2,r.apply(n,[o.sent(),v.SEQUENCE_FILE_TYPES.fasta])];case 3:throw new Error("error "+t)}})})};var S=function(e){function n(t){var r=e.call(this,t)||this;return r.onSwitchDataset=function(){r.setState({allSequences:[],datasetLocation:"hpc/full"===r.state.datasetLocation?"tabula_muris/full":"hpc/full",scRNAseqCategoricalData:{},scRNAseqMatrix:new Array(new Array)})},r.onClearAll=function(){return function(){return s(r,void 0,void 0,function(){var e,t,r,o,i,s,l;return c(this,function(c){return e=this.props,t=e.removeAllHoveredSecondaryStructures,r=e.removeAllLockedResiduePairs,o=e.removeAllSelectedSecondaryStructures,i=e.removeCandidateResidues,s=e.removeHoveredResidues,l=e.removeNonLockedResidues,t(),o(),r(),i(),s(),l(),this.setState(a({},n.initialState)),this.forceUpdate(),[2]})})}},r.onFileUpload=function(e){return s(r,void 0,void 0,function(){var t,n,r,o,i,a,s,l,u,d,p,f,h,m,y;return c(this,function(c){switch(c.label){case 0:return e.persist(),(t=e.target.files)?[4,this.onClearAll()()]:[2];case 1:c.sent(),n=this.state.measuredProximity,this.setState({experimentalProteins:[],isDragHappening:!1,isLoading:!0,predictedProteins:[]}),r="",o=!1,a=[],s=[],l=new Array,u=new Array,d=0,c.label=2;case 2:return d<t.length?(p=t.item(d)).name.endsWith(".pdb")?[4,v.BioblocksPDB.createPDB(p)]:[3,4]:[3,7];case 3:return i=c.sent(),p.name.includes("pred")?u.push(i):p.name.includes("exp")&&l.push(i),[3,6];case 4:return[4,b.readFileAsText(p)];case 5:f=c.sent(),p.name.endsWith("indextable")||p.name.endsWith("indextableplus")||p.name.startsWith("residue_mapping")?a=b.generateResidueMapping(f):p.name.endsWith("CouplingScoresCompared_all.csv")?(r=f,o=!0):p.name.endsWith(".csv")&&p.name.includes("distance_map")&&(s=new Array,f.split("\n").slice(1).filter(function(e){return e.split(",").length>=3}).forEach(function(e){var t=e.split(","),n=parseFloat(t[1]),r=t[2];s[s.length-1]&&s[s.length-1].label===r?s[s.length-1].updateEnd(n):s.push(new v.Bioblocks1DSection(r,n))})),c.label=6;case 6:return++d,[3,2];case 7:return i&&0===l.length&&0===u.length?l.push(i):i=0===l.length?u[0]:l[0],h=b.getCouplingScoresData(r,a),m=new Array,i&&(0===h.rankedContacts.length||void 0===h.rankedContacts[0].dist?h=i.amendPDBWithCouplingScores(h.rankedContacts,n):m=i.getResidueNumberingMismatches(h)),h.isDerivedFromCouplingScores=o,this.setState(((y={})[v.VIZ_TYPE.CONTACT_MAP]={couplingScores:h,pdbData:{experimental:l[0],predicted:u[0]},secondaryStructures:s.length>=1?[s]:i?i.secondaryStructureSections:[]},y.errorMsg="",y.experimentalProteins=l,y.isLoading=!1,y.mismatches=m,y.predictedProteins=u,y)),e.target.value="",[2]}})})},r.onMeasuredProximityChange=function(){return function(e){r.setState({measuredProximity:Object.values(v.CONTACT_DISTANCE_PROXIMITY)[e]})}},r.renderButtonsRow=function(){return d.createElement(m.Grid.Row,{textAlign:"right",verticalAlign:"bottom"},d.createElement(m.Grid.Column,{style:{height:"100%",width:"auto"}},r.renderClearAllButton()),d.createElement(m.Grid.Column,{style:{height:"100%",width:"auto"}},d.createElement(m.Grid.Row,null,r.renderUploadForm(r.onFileUpload,"upload-coupling-scores","Upload Files"))))},r.renderCouplingComponents=function(e,t){var n=(void 0===e?r.props:e).style,o=(void 0===t?r.state:t).measuredProximity;return d.createElement(m.Segment,{attached:!0,raised:!0},d.createElement(m.Header,{as:"h1",attached:"top"},"Bioblocks-Viz: Visualization Component Library"),r.renderStartMessage(),d.createElement(m.Grid,{centered:!0,padded:!0,relaxed:!0},r.renderButtonsRow(),d.createElement(m.Grid.Row,null,d.createElement("br",null)),d.createElement(m.Grid.Row,{columns:2,verticalAlign:"bottom"},d.createElement(m.Grid.Column,{width:7},r.renderContactMapCard(n)),d.createElement(m.Grid.Column,{width:7},r.renderNGLCard(o)))))},r.renderSequenceAccordionMessage=function(e,t,n,r){var o,i,a=0,s=n[0].resno,c=new Array;try{for(var u=l(n),p=u.next();!p.done;p=u.next()){var f=p.value,h="pdb"===r?f.pdbAminoAcid:f.couplingAminoAcid,m=t.indexOf(h.singleLetterCode,a+(f.resno-s));m>=0&&(c.push(d.createElement(d.Fragment,{key:"mismatch-"+f.resno},d.createElement("span",{style:{color:"black",fontSize:"12px"}},t.substring(a,m)),d.createElement("span",{style:{color:"red",fontSize:"16px",textDecoration:"underline"}},t.charAt(m)))),s=f.resno+1,a=m+1)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return c.push(d.createElement("span",{key:"mismatch-final",style:{color:"black",fontSize:"12px"}},t.substring(a))),{content:{content:d.createElement("p",{style:{width:"80%",wordBreak:"break-word"}},c)},key:"panel-"+e,title:{content:e+" ("+t.length+" Amino Acids)"}}},r.renderStartMessage=function(){return d.createElement(m.Message,null,"To get started, please upload either a PDB (.pdb) or EVCouplings score (.csv) file!"," ",d.createElement("br",null)," Check out the",d.createElement("a",{href:"http://evfold.org"}," EVFold"),", ",d.createElement("a",{href:"http://sanderlab.org/contact-maps/"},"Sander Lab"),", or",d.createElement("a",{href:"https://evcouplings.org/"}," EVCouplings ")," website to get these files.")},r.renderUploadForm=function(e,t,n,r){return d.createElement(m.Grid.Column,null,d.createElement(m.Label,{as:"label",basic:!0,htmlFor:t},d.createElement(m.Button,{disabled:r,icon:"upload",label:{basic:!0,content:n},labelPosition:"right"}),d.createElement("input",{disabled:r,id:t,onChange:e,hidden:!0,type:"file",required:!0,multiple:!0})))},r.renderContactMapCard=function(e){var t=r.state,n=t.isLoading,o=t["Contact Map"];return d.createElement(g.PredictedContactMap,{data:{couplingScores:o.couplingScores,pdbData:{experimental:o.pdbData?o.pdbData.experimental:void 0,predicted:o.pdbData?o.pdbData.predicted:void 0},secondaryStructures:o.secondaryStructures},isDataLoading:n,style:e})},r.renderNGLCard=function(e){var t=r.state,n=t.isLoading,o=t.experimentalProteins,i=t.predictedProteins;return d.createElement(g.NGLContainer,{experimentalProteins:o,isDataLoading:n,measuredProximity:e,onMeasuredProximityChange:r.onMeasuredProximityChange(),predictedProteins:i})},r.renderClearAllButton=function(){return d.createElement(m.Grid.Row,{verticalAlign:"middle",columns:1,centered:!0},d.createElement(m.Grid.Column,null,d.createElement(m.Label,{as:"label",basic:!0,htmlFor:"clear-data"},d.createElement(m.Button,{icon:"trash",label:{basic:!0,content:"Clean View"},labelPosition:"right",onClick:r.onClearAll()}))))},r.state=n.initialState,r}return i(n,e),n.prototype.componentDidMount=function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.setupUMAPData()];case 1:return e.sent(),[2]}})})},n.prototype.componentDidUpdate=function(e,t){return s(this,void 0,void 0,function(){var e,n,r,o,i,a,s,l,u;return c(this,function(c){switch(c.label){case 0:return e=this.state,n=e.datasetLocation,r=e.measuredProximity,o=e.predictedProteins,i=this.state[v.VIZ_TYPE.CONTACT_MAP].couplingScores,a=o.length>=1?o[0]:void 0,s="",l=this.state.mismatches,t.datasetLocation===n?[3,2]:[4,this.setupUMAPData()];case 1:return c.sent(),[3,3];case 2:!a||0!==t.predictedProteins.length&&t.predictedProteins[0]===a||i===t[v.VIZ_TYPE.CONTACT_MAP].couplingScores||(l=v.getPDBAndCouplingMismatch(a,i)).length>=1&&(s="Error details: "+l.length+" mismatch(es) detected between coupling scores and PDB!        For example, residue number "+l[0].resno+" is '"+l[0].pdbAminoAcid.threeLetterCode+"'        in the PDB but '"+l[0].couplingAminoAcid.threeLetterCode+"' in the coupling scores file."),c.label=3;case 3:return a&&r!==t.measuredProximity?this.setState(((u={})[v.VIZ_TYPE.CONTACT_MAP]={couplingScores:a.amendPDBWithCouplingScores(i.rankedContacts,r),pdbData:{experimental:a},secondaryStructures:[]},u.errorMsg=s,u.mismatches=l,u)):s.length>=1&&this.setState({errorMsg:s,mismatches:l}),[2]}})})},n.prototype.render=function(e){var t=(void 0===e?this.props:e).style;return d.createElement("div",{id:"BioblocksVizApp",style:a({},t,{height:"1000px"})},d.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),this.renderUMapAndSpring())},n.prototype.renderUMapAndSpring=function(){var e=this.state,t=e.datasetLocation,n=e.scRNAseqCategoricalData,r=e.scRNAseqCategorySelected,o=e.scRNAseqMatrix;return d.createElement(m.Grid,{centered:!0,padded:!0},d.createElement(m.Grid.Row,{columns:2,verticalAlign:"bottom"},d.createElement(m.Grid.Column,{width:7},d.createElement(C.UMAPTranscriptionalContainer,{numSamplesToShow:5e3,numIterationsBeforeReRender:1,categoricalAnnotations:n,labelCategory:r,sampleNames:void 0,dataMatrix:o})),d.createElement(m.Grid.Column,{width:7},d.createElement(g.SpringContainer,{datasetsURI:"datasets",datasetLocation:t}))),d.createElement(m.Grid.Row,{style:{padding:"15px 0 0 0"},verticalAlign:"bottom"},d.createElement(m.Grid.Column,{width:7},"Currently viewing "+this.state.datasetLocation+" dataset"),d.createElement(m.Grid.Column,{width:7},d.createElement(m.Button,{onClick:this.onSwitchDataset},"Switch to "+("hpc/full"===this.state.datasetLocation?"tabula_muris/full":"hpc/full")+" dataset"))))},n.prototype.setupUMAPData=function(){return s(this,void 0,void 0,function(){var e,n,r,o;return c(this,function(i){switch(i.label){case 0:return e=this.state.datasetLocation,this.props.taxonomyFilename?[4,fetch(this.props.taxonomyFilename)]:[3,3];case 1:return[4,i.sent().text()];case 2:n=i.sent(),i.label=3;case 3:return r=this.setState,o={},[4,t.fetchFastaFile(this.props.fastaFilename)];case 4:return o.allSequences=i.sent(),[4,b.fetchJSONFile("datasets/"+e+"/categorical_coloring_data.json")];case 5:return o.scRNAseqCategoricalData=i.sent(),[4,b.fetchMatrixData("datasets/"+e+"/tsne_matrix.csv")];case 6:return r.apply(this,[(o.scRNAseqMatrix=i.sent(),o.taxonomyText=n,o)]),[2]}})})},n.initialState=((o={})[v.VIZ_TYPE.CONTACT_MAP]={couplingScores:new v.CouplingContainer,pdbData:{experimental:void 0,predicted:void 0},secondaryStructures:[]},o.allSequences=new Array,o.datasetLocation="hpc/full",o.errorMsg="",o.experimentalProteins=[],o.isDragHappening=!1,o.isLoading=!1,o.measuredProximity=v.CONTACT_DISTANCE_PROXIMITY.CLOSEST,o.mismatches=[],o.predictedProteins=[],o.residueMapping=[],o.scRNAseqCategoricalData={},o.scRNAseqCategorySelected="Sample",o.scRNAseqMatrix=new Array,o.taxonomyText="",o),n.defaultProps={fastaFilename:"datasets/betalactamase_alignment/PSE1_natural_top5K_subsample.a2m",removeAllHoveredSecondaryStructures:b.EMPTY_FUNCTION,removeAllLockedResiduePairs:b.EMPTY_FUNCTION,removeAllSelectedSecondaryStructures:b.EMPTY_FUNCTION,removeCandidateResidues:b.EMPTY_FUNCTION,removeHoveredResidues:b.EMPTY_FUNCTION,removeNonLockedResidues:b.EMPTY_FUNCTION,style:{backgroundColor:"#ffffff"},taxonomyFilename:"datasets/betalactamase_alignment/PSE1_NATURAL_TAXONOMY.csv"},n}(d.Component),P=f.connect(null,function(e){return h.bindActionCreators({removeAllHoveredSecondaryStructures:y.createContainerActions("secondaryStructure/hovered").clear,removeAllLockedResiduePairs:y.createResiduePairActions().locked.clear,removeAllSelectedSecondaryStructures:y.createContainerActions("secondaryStructure/selected").clear,removeCandidateResidues:y.createResiduePairActions().candidates.clear,removeHoveredResidues:y.createResiduePairActions().hovered.clear},e)})(S);p.render(d.createElement(f.Provider,{store:_.BBStore},d.createElement(P,null)),document.getElementById("example-root"))},"./node_modules/anatomogram/lib/img sync recursive ^\\.\\/.*selected\\.png$":function(e,t,n){var r={"./brain.selected.png":"./node_modules/anatomogram/lib/img/brain.selected.png","./brain.unselected.png":"./node_modules/anatomogram/lib/img/brain.unselected.png","./female.selected.png":"./node_modules/anatomogram/lib/img/female.selected.png","./female.unselected.png":"./node_modules/anatomogram/lib/img/female.unselected.png","./flower_parts.selected.png":"./node_modules/anatomogram/lib/img/flower_parts.selected.png","./flower_parts.unselected.png":"./node_modules/anatomogram/lib/img/flower_parts.unselected.png","./male.selected.png":"./node_modules/anatomogram/lib/img/male.selected.png","./male.unselected.png":"./node_modules/anatomogram/lib/img/male.unselected.png","./whole_plant.selected.png":"./node_modules/anatomogram/lib/img/whole_plant.selected.png","./whole_plant.unselected.png":"./node_modules/anatomogram/lib/img/whole_plant.unselected.png"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./node_modules/anatomogram/lib/img sync recursive ^\\.\\/.*selected\\.png$"},"./node_modules/anatomogram/lib/svg sync recursive ^\\.\\/.*\\.svg$":function(e,t,n){var r={"./anolis_carolinensis.svg":"./node_modules/anatomogram/lib/svg/anolis_carolinensis.svg","./arabidopsis_thaliana.svg":"./node_modules/anatomogram/lib/svg/arabidopsis_thaliana.svg","./bos_taurus.svg":"./node_modules/anatomogram/lib/svg/bos_taurus.svg","./brachypodium_distachyon.flower_parts.svg":"./node_modules/anatomogram/lib/svg/brachypodium_distachyon.flower_parts.svg","./brachypodium_distachyon.whole_plant.svg":"./node_modules/anatomogram/lib/svg/brachypodium_distachyon.whole_plant.svg","./gallus_gallus.svg":"./node_modules/anatomogram/lib/svg/gallus_gallus.svg","./homo_sapiens.brain.svg":"./node_modules/anatomogram/lib/svg/homo_sapiens.brain.svg","./homo_sapiens.female.svg":"./node_modules/anatomogram/lib/svg/homo_sapiens.female.svg","./homo_sapiens.male.svg":"./node_modules/anatomogram/lib/svg/homo_sapiens.male.svg","./hordeum_vulgare.flower_parts.svg":"./node_modules/anatomogram/lib/svg/hordeum_vulgare.flower_parts.svg","./hordeum_vulgare.whole_plant.svg":"./node_modules/anatomogram/lib/svg/hordeum_vulgare.whole_plant.svg","./macaca_mulatta.svg":"./node_modules/anatomogram/lib/svg/macaca_mulatta.svg","./monodelphis_domestica.svg":"./node_modules/anatomogram/lib/svg/monodelphis_domestica.svg","./mus_musculus.brain.svg":"./node_modules/anatomogram/lib/svg/mus_musculus.brain.svg","./mus_musculus.female.svg":"./node_modules/anatomogram/lib/svg/mus_musculus.female.svg","./mus_musculus.male.svg":"./node_modules/anatomogram/lib/svg/mus_musculus.male.svg","./oryza_sativa.flower_parts.svg":"./node_modules/anatomogram/lib/svg/oryza_sativa.flower_parts.svg","./oryza_sativa.whole_plant.svg":"./node_modules/anatomogram/lib/svg/oryza_sativa.whole_plant.svg","./papio_anubis.svg":"./node_modules/anatomogram/lib/svg/papio_anubis.svg","./rattus_norvegicus.svg":"./node_modules/anatomogram/lib/svg/rattus_norvegicus.svg","./solanum_lycopersicum.flower_parts.svg":"./node_modules/anatomogram/lib/svg/solanum_lycopersicum.flower_parts.svg","./solanum_lycopersicum.whole_plant.svg":"./node_modules/anatomogram/lib/svg/solanum_lycopersicum.whole_plant.svg","./solanum_tuberosum.svg":"./node_modules/anatomogram/lib/svg/solanum_tuberosum.svg","./sorghum_bicolor.flower_parts.svg":"./node_modules/anatomogram/lib/svg/sorghum_bicolor.flower_parts.svg","./sorghum_bicolor.whole_plant.svg":"./node_modules/anatomogram/lib/svg/sorghum_bicolor.whole_plant.svg","./tetraodon_nigroviridis.svg":"./node_modules/anatomogram/lib/svg/tetraodon_nigroviridis.svg","./triticum_aestivum.flower_parts.svg":"./node_modules/anatomogram/lib/svg/triticum_aestivum.flower_parts.svg","./triticum_aestivum.whole_plant.svg":"./node_modules/anatomogram/lib/svg/triticum_aestivum.whole_plant.svg","./xenopus_tropicalis.svg":"./node_modules/anatomogram/lib/svg/xenopus_tropicalis.svg","./zea_mays.flower_parts.svg":"./node_modules/anatomogram/lib/svg/zea_mays.flower_parts.svg","./zea_mays.whole_plant.svg":"./node_modules/anatomogram/lib/svg/zea_mays.whole_plant.svg"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="./node_modules/anatomogram/lib/svg sync recursive ^\\.\\/.*\\.svg$"},"./src/action/ContainerAction.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/typesafe-actions/dist/index.umd.js");t.createContainerActions=function(e,t){void 0===t&&(t="bioblocks");var n=(t+"/"+e).toUpperCase();return{add:r.createStandardAction(n+"_ADD").map(function(t){return{meta:e,payload:t}}),addMultiple:r.createStandardAction(n+"_ADD_MULTIPLE").map(function(t){return{meta:e,payload:t}}),clear:r.createStandardAction(n+"_CLEAR")(),remove:r.createStandardAction(n+"_REMOVE").map(function(t){return{meta:e,payload:t}}),removeMultiple:r.createStandardAction(n+"_REMOVE_MULTIPLE").map(function(t){return{meta:e,payload:t}}),set:r.createStandardAction(n+"_SET").map(function(t){return{meta:e,payload:t}})}}},"./src/action/DataAction.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this;Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/typesafe-actions/dist/index.umd.js");t.createDataActions=function(e,t){void 0===t&&(t="bioblocks");var n=(t+"/"+e).toUpperCase();return a.createAsyncAction(n+"_FETCH_DATA_REQUEST",n+"_FETCH_DATA_SUCCESS",n+"_FETCH_DATA_FAILURE")()},t.fetchDataset=function(e,n,a){return void 0===a&&(a="bioblocks"),function(s){return r(i,void 0,void 0,function(){var r,i,c;return o(this,function(o){switch(o.label){case 0:r=t.createDataActions(e,a),s(r.request()),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n()];case 2:return i=o.sent(),s(r.success(i)),[3,4];case 3:return c=o.sent(),s(r.failure(c)),console.log("An error occurred: "+c),[3,4];case 4:return[2]}})})}}},"./src/action/ObjectAction.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/typesafe-actions/dist/index.umd.js");t.createObjectActions=function(e,t){void 0===t&&(t="bioblocks");var n=(t+"/"+e).toUpperCase();return{add:r.createStandardAction(n+"_ADD").map(function(t){return{meta:e,payload:t}}),clear:r.createStandardAction(n+"_CLEAR")(),remove:r.createStandardAction(n+"_REMOVE").map(function(t){return{meta:e,payload:t}}),removeMultiple:r.createStandardAction(n+"_REMOVE_MULTIPLE").map(function(t){return{meta:e,payload:t}}),set:r.createStandardAction(n+"_SET").map(function(t){return{meta:e,payload:t}}),toggle:r.createStandardAction(n+"_TOGGLE").map(function(t){return{meta:e,payload:t}})}}},"./src/action/ResiduePairAction.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/action/index.ts"),o=n("./src/reducer/index.ts");t.createResiduePairActions=function(e){return void 0===e&&(e="bioblocks"),{candidates:r.createContainerActions(o.RESIDUE_PAIR_DATASET_NAME+"/candidates",e),hovered:r.createContainerActions(o.RESIDUE_PAIR_DATASET_NAME+"/hovered",e),locked:r.createObjectActions(o.RESIDUE_PAIR_DATASET_NAME+"/locked",e)}}},"./src/action/SpringAction.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this;Object.defineProperty(t,"__esModule",{value:!0});var s=n("./src/action/index.ts");t.fetchSpringGraphData=function(e,t){return void 0===t&&(t="bioblocks"),function(n){return o(a,void 0,void 0,function(){var r,o,a;return i(this,function(i){switch(i.label){case 0:r=s.createDataActions("spring/graphData",t),n(r.request()),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e()];case 2:return o=i.sent(),n(r.success(o)),[3,4];case 3:return a=i.sent(),n(r.failure(a)),console.log("An error occurred: "+a),[3,4];case 4:return[2]}})})}},t.createSpringActions=function(e){return void 0===e&&(e="bioblocks"),{category:r({},s.createValueActions("spring/category",e)),graphData:r({},s.createDataActions("spring/graphData",e)),species:r({},s.createValueActions("spring/species",e))}}},"./src/action/ValueAction.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/typesafe-actions/dist/index.umd.js");t.createValueActions=function(e,t){void 0===t&&(t="bioblocks");var n=(t+"/"+e).toUpperCase();return{clear:r.createStandardAction(n+"_CLEAR")(),set:r.createStandardAction(n+"_SET").map(function(t){return{meta:e,payload:t}})}}},"./src/action/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/action/ContainerAction.ts")),r(n("./src/action/DataAction.ts")),r(n("./src/action/ObjectAction.ts")),r(n("./src/action/ValueAction.ts")),r(n("./src/action/SpringAction.ts")),r(n("./src/action/ResiduePairAction.ts"))},"./src/component/ContactMap.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/react/index.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/redux/es/redux.js"),p=n("./node_modules/semantic-ui-react/dist/es/index.js"),f=n("./src/action/index.ts"),h=n("./src/component/index.ts"),m=n("./src/data/index.ts"),y=n("./src/helper/index.ts"),g=n("./src/selector/index.ts");t.initialContactMapState={pointsToPlot:new Array};var v=function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialContactMapState,r.onNodeSizeChange=function(e,t){return function(n,o){var a=r.state.pointsToPlot;r.setState({pointsToPlot:s(a.slice(0,e),[i({},a[e],{nodeSize:Math.min(Math.max(Math.abs(a[e].nodeSize+t),1),10)})],a.slice(e+1))})}},r.applyNodeSize=function(e){var t=r.state.pointsToPlot,n=t.findIndex(function(t){return t.name===e.name});return n>=0?i({},e,{nodeSize:t[n].nodeSize}):e},r.generateHoveredResiduePairs=function(e){return e.length>=1?[{i:e[0],j:1===e.length?e[0]:e[1]}]:[]},r.generateLockedResiduePairs=function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return r&&2===r.length&&t.push({i:r[0],j:r[1],dist:0}),t},new Array)},r.generateSelectedResiduesChartData=function(e,t,n,r){return h.generateChartDataEntry("none",e,t,"",n,r,{marker:{color:new Array(2*r.length).fill(e),line:{color:e,width:3},symbol:"circle-open"}})},r.getColorFromEntry=function(e){if(e.marker){if(e.marker.line&&e.marker.line.color)return e.marker.line.color;if(e.marker.color)return Array.isArray(e.marker.color)?e.marker.color[0]:e.marker.color;if(e.marker.colorscale)return Array.isArray(e.marker.colorscale)?e.marker.colorscale[0][1]:e.marker.colorscale}if(e.line&&e.line.color)return e.line.color},r.getDockConfigs=function(){return[{isVisibleCb:function(){return r.props.selectedSecondaryStructures.length>=1||Object.values(r.props.lockedResiduePairs).length>=1},onClick:function(){r.props.removeAllLockedResiduePairs(),r.props.removeAllSelectedSecondaryStructures(),r.props.removeHoveredResidues()},text:"Clear Selections"}]},r.getMenuConfigs=function(e,t){return[{component:{configs:{Filters:e},name:"POPUP"},description:"Filter",iconName:"filter"},{component:{configs:r.getNodeSizeSliderConfigs(t),name:"POPUP"},description:"Settings"}]},r.getNodeSizeSliderConfigs=function(e){return{"Node Sizes":e.map(function(e,t){var n=r.getColorFromEntry(e),o=[l.createElement(p.Icon,{key:"node-size-slider-"+t+"-minus",name:"minus",onClick:r.onNodeSizeChange(t,-1),size:"small",style:{color:n}}),l.createElement(p.Icon,{key:"node-size-slider-"+t+"-2",name:"circle",size:"small",style:{color:n}}),l.createElement(p.Icon,{key:"node-size-slider-"+t+"-plus",name:"plus",onClick:r.onNodeSizeChange(t,1),size:"small",style:{color:n}})];return{id:"node-size-slider-"+t,name:e.name,options:o,style:{padding:".5em"},type:m.CONFIGURATION_COMPONENT_TYPE.BUTTON_GROUP}})}},r.handleAxisClick=function(e){var t,n,o,i,a=r.props,l=a.addSelectedSecondaryStructure,u=a.data,d=a.removeSecondaryStructure,p=a.selectedSecondaryStructures;try{for(var f=c(u.secondaryStructures),h=f.next();!h.done;h=f.next()){var m=h.value;try{for(var y=(o=void 0,c(m)),g=y.next();!g.done;g=y.next()){var v=g.value;v.contains.apply(v,s(e.selectedPoints))&&(p.includes(v)?d(v):l(v))}}catch(e){o={error:e}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}},r.handleAxisEnter=function(e){var t,n,o,i,a=r.props,l=a.addHoveredSecondaryStructure,u=a.hoveredSecondaryStructures,d=a.data;try{for(var p=c(d.secondaryStructures),f=p.next();!f.done;f=p.next()){var h=f.value,m=function(t){t.contains.apply(t,s(e.selectedPoints))&&!u.find(function(e){return t.isEqual(e)})&&l(t)};try{for(var y=(o=void 0,c(h)),g=y.next();!g.done;g=y.next()){m(g.value)}}catch(e){o={error:e}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}},r.handleAxisLeave=function(e){var t,n,o,i,a=r.props,l=a.data,u=a.hoveredSecondaryStructures,d=a.removeHoveredSecondaryStructure;try{for(var p=c(l.secondaryStructures),f=p.next();!f.done;f=p.next()){var h=f.value,m=function(t){var n=u.find(function(e){return t.isEqual(e)});t.contains.apply(t,s(e.selectedPoints))&&n&&d(n)};try{for(var y=(o=void 0,c(h)),g=y.next();!g.done;g=y.next()){m(g.value)}}catch(e){o={error:e}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}},r.onMouseClick=function(e){return function(t){var n;t.isAxis()?r.handleAxisClick(t):e(((n={})[t.selectedPoints.sort().toString()]=t.selectedPoints,n))}},r.onMouseEnter=function(e){return function(t){t.isAxis()?r.handleAxisEnter(t):e(t.selectedPoints)}},r.onMouseLeave=function(e){return function(t){t.isAxis()?r.handleAxisLeave(t):e&&e(t.selectedPoints)}},r.onMouseSelect=function(e){return function(t){e&&e(t.selectedPoints.map(function(e){return e}))}},r}return o(n,e),n.prototype.componentDidMount=function(){this.setupPointsToPlot(this.props.data.couplingScores)},n.prototype.componentDidUpdate=function(e){var t=this.props,n=t.data,r=t.lockedResiduePairs;n===e.data&&r===e.lockedResiduePairs||this.setupPointsToPlot(n.couplingScores)},n.prototype.render=function(){var e=this.state.pointsToPlot;return this.renderContactMapChart(e)},n.prototype.renderContactMapChart=function(e){var t=this.props,n=t.addHoveredResidues,r=t.candidateResidues,o=t.configurations,i=t.data,a=t.height,s=t.isDataLoading,c=t.onBoxSelection,u=t.removeHoveredResidues,d=t.secondaryStructureColors,p=t.selectedSecondaryStructures,f=t.showConfigurations,m=t.toggleLockedResiduePair,y=t.width,g=i.couplingScores.totalContacts>=1?i.couplingScores.residueIndexRange.max:void 0;return l.createElement(h.ComponentCard,{componentName:"tSNE - TensorFlow",dockItems:this.getDockConfigs(),isDataReady:i.couplingScores.allContacts.length>=1,menuItems:this.getMenuConfigs(o,e)},l.createElement(h.ContactMapChart,{candidateResidues:r,contactData:e,height:a,isDataLoading:s,onClickCallback:this.onMouseClick(m),onHoverCallback:this.onMouseEnter(n),onSelectedCallback:this.onMouseSelect(c),onUnHoverCallback:this.onMouseLeave(u),range:g,secondaryStructures:i.secondaryStructures?i.secondaryStructures:[],secondaryStructureColors:d,selectedSecondaryStructures:[p],showConfigurations:f,width:y}))},n.prototype.setupPointsToPlot=function(e){var t=this.props,n=t.data,r=t.lockedResiduePairs,o=t.hoveredResidues,a=t.formattedPoints,c=t.observedColor,l=t.highlightColor,u={selected:"Selected Residue Pair",structure:(n.pdbData?n.pdbData.experimental?"X-ray":"Inferred":"Unknown")+" Structure Contact"},d=e.getObservedContacts().sort(function(e,t){return e.dist&&t.dist?t.dist-e.dist:0}),p=new(Array.bind.apply(Array,s([void 0,h.generateChartDataEntry("text",{start:c,end:"rgb(247,251,255)"},"Structure Contact ("+(n.couplingScores.isDerivedFromCouplingScores?"Coupling Scores":"PDB")+")",u.structure,4,d,{text:d.map(y.generateCouplingScoreHoverText)})],a))),f=new Array;f.push.apply(f,s(this.generateHoveredResiduePairs(o))),f.push.apply(f,s(this.generateLockedResiduePairs(r))),p.push(this.generateSelectedResiduesChartData(l,u.selected,4,f)),this.setState(i({},this.state,{pointsToPlot:p.map(this.applyNodeSize)}))},n.defaultProps={addHoveredResidues:y.EMPTY_FUNCTION,addHoveredSecondaryStructure:y.EMPTY_FUNCTION,addSelectedSecondaryStructure:y.EMPTY_FUNCTION,candidateResidues:[],configurations:new Array,data:{couplingScores:new m.CouplingContainer,pdbData:{experimental:void 0,predicted:void 0},secondaryStructures:new Array},enableSliders:!0,formattedPoints:new Array,height:"100%",highlightColor:"#ff8800",hoveredResidues:[],hoveredSecondaryStructures:[],isDataLoading:!1,lockedResiduePairs:{},observedColor:"#0000ff",removeAllLockedResiduePairs:y.EMPTY_FUNCTION,removeAllSelectedSecondaryStructures:y.EMPTY_FUNCTION,removeHoveredResidues:y.EMPTY_FUNCTION,removeHoveredSecondaryStructure:y.EMPTY_FUNCTION,removeSecondaryStructure:y.EMPTY_FUNCTION,selectedSecondaryStructures:[],showConfigurations:!0,toggleLockedResiduePair:y.EMPTY_FUNCTION,width:"100%"},n}(l.Component);t.ContactMapClass=v;t.ContactMap=u.connect(function(e){return{candidateResidues:g.getCandidates(e).toArray(),hoveredResidues:g.getHovered(e).toArray(),hoveredSecondaryStructures:g.selectCurrentItems(e,"secondaryStructure/hovered").toArray(),lockedResiduePairs:g.getLocked(e).toJS(),selectedSecondaryStructures:g.selectCurrentItems(e,"secondaryStructure/selected").toArray()}},function(e){return d.bindActionCreators({addHoveredResidues:f.createResiduePairActions().hovered.set,addHoveredSecondaryStructure:f.createContainerActions("secondaryStructure/hovered").add,addSelectedSecondaryStructure:f.createContainerActions("secondaryStructure/selected").add,removeAllLockedResiduePairs:f.createResiduePairActions().locked.clear,removeAllSelectedSecondaryStructures:f.createContainerActions("secondaryStructure/selected").clear,removeHoveredResidues:f.createResiduePairActions().hovered.clear,removeHoveredSecondaryStructure:f.createContainerActions("secondaryStructure/hovered").remove,removeSecondaryStructure:f.createContainerActions("secondaryStructure/selected").remove,toggleLockedResiduePair:f.createResiduePairActions().locked.toggle},e)})(v)},"./src/component/FeatureViewer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/react/index.js"),u=n("./node_modules/immutable/dist/immutable.js"),d=n("./src/component/index.ts"),p=n("./src/data/index.ts"),f=function(e){function t(t){var n=e.call(this,t)||this;return n.onFeatureHover=function(e){for(var t,r,o=n.props,i=o.data,s=o.getTextForHover,c=-1,l=[e.selectedPoints[0],e.selectedPoints[2]],u=0;u<i.length;++u)try{for(var d=(t=void 0,a(l)),p=d.next();!p.done;p=d.next()){var f=p.value;i[u].contains(f)&&(c=u)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}n.setState({hoverAnnotationText:s&&c>=0?s(i[c].label,c):"",hoveredFeatureIndex:c})},n.onFeatureClick=function(e){var t=n.props,r=t.data,o=t.onClickCallback,i=n.deriveFeatureIndices(r,e.selectedPoints);o&&o(n.deriveSelectedFeatures(r,i.toArray())),n.setState({selectedFeatureIndices:i,selectedRange:new p.Bioblocks1DSection("selection",-1,-1)})},n.onFeatureSelect=function(e){var t=n.props,r=t.data,o=t.onSelectCallback,i=n.deriveFeatureIndices(r,e.selectedPoints),a=e.plotlyEvent,s=n.state.selectedRange;if(a.range){var c={end:(s=new p.Bioblocks1DSection("selection",Math.floor(a.range.x[0]),Math.ceil(a.range.x[1]))).end,featuresSelected:n.deriveSelectedFeatures(r,i.toArray()),length:s.length,start:s.start};o&&o(c)}n.setState({selectedFeatureIndices:i,selectedRange:s})},n.deriveFeatureIndices=function(e,t){for(var n=u.Set(),r=function(r){var o=t[r];e.reduce(function(e,t,n){return t.contains(o)?c(e,[n]):e},new Array).forEach(function(e){n=n.add(e)})},o=0;o<t.length;o+=2)r(o);return n},n.deriveSelectedFeatures=function(e,t){return t.map(function(t){return new p.Bioblocks1DSection(e[t].label,e[t].start,e[t].end)})},n.state={hoverAnnotationText:"",hoveredFeatureIndex:-1,plotlyConfig:{showAxisDragHandles:!1,showAxisRangeEntryBoxes:!1},plotlyData:[],plotlyLayout:{},selectedFeatureIndices:u.Set(),selectedRange:new p.Bioblocks1DSection("selection",-1,-1)},n}return o(t,e),t.getDerivedStateFromProps=function(e,n){var r=e.backgroundBar,o=e.data,i=e.height,a=e.maxLength,s=e.showGrouped,l=e.title,u=e.width,d=n.hoverAnnotationText,f=n.hoveredFeatureIndex,h=n.selectedRange,m=-1,y=o.map(function(e,n){var r=s?n:o.findIndex(function(t){return 0===e.label.localeCompare(t.label)});return m=Math.max(m,r),t.getPlotlyDataObject(e,s,r)}),g=t.getPlotlyBackgroundBarObject(r||new p.TintedBioblocks1DSection("",0,o.reduce(function(e,t){return Math.max(e,t.end)},-1),"#b9bcb6"),s,m/2),v={fill:"toself",hoverinfo:"none",line:{width:0},marker:{color:"#f9f69f",opacity:.5},mode:"lines+markers",showlegend:!1,x:-1!==h.start&&-1!==h.end?[h.start,h.end,h.end,h.start]:[],y:[0,0,m+1,m+1]},b=c([g,v],y);return{plotlyData:b,plotlyLayout:{annotations:t.getAnnotationPlotlyData(f,d,b[f]),dragmode:"select",height:i,hovermode:"closest",margin:{b:30,t:60},showlegend:!1,title:l,width:u,xaxis:o.length>0?{autorange:!1,fixedrange:!0,range:[0,a||o.reduce(function(e,t){return Math.max(e,t.end)},-1)+200],showgrid:!1,tick0:0,tickmode:"auto",ticks:"outside"}:{visible:!1},yaxis:{autorange:!1,fixedrange:!0,range:[-.25,s?2:o.length],visible:!1}}}},t.getBoxForBioblocksSection=function(e){return[e.end-(e.end-e.start)/2,null,e.start,e.start,e.end,e.end,e.start]},t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,r=this.state,o=r.plotlyConfig,i=r.plotlyData,a=r.plotlyLayout;return l.createElement("div",{style:{height:n,width:t}},l.createElement(d.PlotlyChart,{config:o,data:i,layout:a,onClickCallback:this.onFeatureClick,onHoverCallback:this.onFeatureHover,onSelectedCallback:this.onFeatureSelect,showLoader:!1}))},t.defaultProps={data:[],height:200,showGrouped:!1,title:"",width:600},t.getAnnotationPlotlyData=function(e,t,n){return e>=0&&n.x&&n.y?[{align:"left",arrowhead:0,arrowsize:1,arrowwidth:1,ax:0,ay:-25,bgcolor:"#ffffff",bordercolor:"#000000",borderpad:5,showarrow:!0,text:t,x:n.x[0],xref:"x",y:n.y[n.y.length-3],yref:"y"}]:[]},t.getPlotlyBackgroundBarObject=function(e,n,r){return i({},t.getPlotlyDataObject(e,n,r),{y:n?[.25,null,.25,.75,.75,.25,.25]:[r+.5,null,r+1,r,r,r+1,r+1]})},t.getPlotlyDataObject=function(e,n,r){return{fill:"toself",fillcolor:e.color.toString(),hoverinfo:"none",hoveron:"fills",line:{width:0},mode:"text+lines",name:""+e.label,text:[e.label],textfont:{color:["#FFFFFF"]},type:"scatter",x:t.getBoxForBioblocksSection(e),y:n?[.5,null,0,1,1,0,0]:[r+.5,null,r+1,r,r,r+1,r+1]}},t}(l.Component);t.FeatureViewer=f},"./src/component/NGLComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/lodash/lodash.js"),u=n("./node_modules/ngl/dist/ngl.esm.js"),d=n("./node_modules/react/index.js"),p=n("./node_modules/semantic-ui-react/dist/es/index.js"),f=n("./src/data/AminoAcid.ts"),h=n("./src/component/index.ts"),m=n("./src/data/index.ts"),y=n("./src/helper/index.ts");t.initialNGLState={activeRepresentations:{experimental:{reps:new Array,structType:"default"},predicted:{reps:new Array,structType:"cartoon"}},isDistRepEnabled:!0,isMovePickEnabled:!1,stage:void 0,superpositionStatus:"NONE"};var g=function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialNGLState,r.prevCanvas=null,r.canvas=null,r.addNewHoveredResidue=function(e,t){var n=e.atom||e.closestBondAtom,o=r.props.addHoveredResidues,i=f.AminoAcid.fromThreeLetterCode(n.resname),a=i?i.singleLetterCode:n.resname;t.tooltip.textContent=""+n.resno+a,o([n.resno])},r.canvasRefCallback=function(e){if(r.prevCanvas=r.canvas,r.canvas=e,null===r.prevCanvas&&null!==r.canvas&&void 0!==r.state.stage){var t=r.state.stage.viewerControls.getOrientation();r.state.stage.removeAllComponents();var n=r.props,o=n.experimentalProteins,i=n.predictedProteins,a=r.state.superpositionStatus,c=s(o,i),l=r.state.stage.parameters,u=r.generateStage(r.canvas,l);c.map(function(e){r.initData(u,e.nglStructure)}),r.handleSuperposition(u,a),u.viewerControls.orient(t),u.viewer.requestRender(),r.setState({stage:u})}},r.centerCamera=function(){var e=r.state.stage;e&&e.autoView()},r.generateStage=function(e,t){var n=new u.Stage(e,t);return n.mouseControls.add("hoverPick",function(e,t){r.onHover(e,t)}),n.mouseControls.remove("clickPick-*",u.MouseActions.movePick),n.keyBehavior.domElement.focus=function(){},n},r.getDockItems=function(){var e="NONE"!==r.state.superpositionStatus;return[{isVisibleCb:function(){return r.props.selectedSecondaryStructures.length>=1||Object.values(r.props.lockedResiduePairs).length>=1||r.props.candidateResidues.length>=1},onClick:function(){r.props.removeAllLockedResiduePairs(),r.props.removeAllSelectedSecondaryStructures(),r.props.removeCandidateResidues(),r.props.removeHoveredResidues()},text:"Clear Selections"},{onClick:r.centerCamera,text:"Center View"},{isVisibleCb:function(){return r.props.experimentalProteins.length+r.props.predictedProteins.length>=2},onClick:r.onSuperpositionToggle,text:"Superimpose: "+(e?"On":"Off")},{onClick:r.switchCameraType,text:(r.state.stage&&"stereo"===r.state.stage.parameters.cameraType?"Disable":"Enable")+" Stereo"}]},r.getRepresentationConfigs=function(){var e=["default","spacefill","backbone","cartoon","surface","tube"];return{"Structure Representations":[{current:y.capitalizeFirstLetter(r.state.activeRepresentations.predicted.structType),name:"Predicted Structure Representation",onChange:function(t){var n=r.props.predictedProteins,o=r.state,a=o.activeRepresentations,s=o.stage;s&&(r.setState({activeRepresentations:i({},a,{predicted:r.updateRepresentation(s,e[t],n)})}),s.viewer.requestRender())},options:["Rainbow","Spacefill","Backbone","Cartoon","Surface","Tube"],type:m.CONFIGURATION_COMPONENT_TYPE.RADIO},{current:y.capitalizeFirstLetter(r.state.activeRepresentations.experimental.structType),name:"Experimental Structure Representation",onChange:function(t){var n=r.props.experimentalProteins,o=r.state,a=o.activeRepresentations,s=o.stage;s&&(r.setState({activeRepresentations:i({},a,{experimental:r.updateRepresentation(s,e[t],n)})}),s.viewer.requestRender())},options:["Rainbow","Spacefill","Backbone","Cartoon","Surface","Tube"],type:m.CONFIGURATION_COMPONENT_TYPE.RADIO}]}},r.getSettingsConfigurations=function(){var e=r.props.measuredProximity,t=r.state,n=t.isDistRepEnabled;return{"View Options":[{checked:t.isMovePickEnabled,name:"Zoom on Click",onChange:r.toggleMovePick,type:m.CONFIGURATION_COMPONENT_TYPE.CHECKBOX},{checked:n,name:"Display Distance in Ångström",onChange:r.toggleDistRep,type:m.CONFIGURATION_COMPONENT_TYPE.CHECKBOX},{current:e,name:"Proximity Metric",onChange:r.measuredProximityHandler,options:Object.values(m.CONTACT_DISTANCE_PROXIMITY).map(y.capitalizeEveryWord),type:m.CONFIGURATION_COMPONENT_TYPE.RADIO}]}},r.handleAtomClick=function(e){var t,n=r.props,o=n.addLockedResiduePair,i=n.addCandidateResidues,a=n.candidateResidues,c=n.removeCandidateResidues,l=e.atom||e.closestBondAtom;a.length>=1?(o(((t={})[s(a,[l.resno]).sort().toString()]=s(a,[l.resno]),t)),c()):i([l.resno])},r.handleBothSuperposition=function(e){for(var t,n,r=1;r<e.compList.length;++r)u.superpose(e.compList[r].object,e.compList[0].object,!0);try{for(var o=c(e.compList),i=o.next();!i.done;i=o.next()){var a=i.value;a.setPosition([0,0,0]),a.updateRepresentations({position:!0})}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}e.compList[0]?e.compList[0].autoView():e.autoView()},r.handleClickHover=function(e){r.props.hoveredResidues.forEach(function(t){r.handleHoveredDistances(t,e)})},r.handleClickPick=function(e){var t=r.props.removeLockedResiduePair;e.picker&&"distance"===e.picker.type?t([e.distance.atom1.resno,e.distance.atom2.resno].sort().toString()):(e.atom||e.closestBondAtom)&&r.handleAtomClick(e)},r.handleHoveredDistances=function(e,t){var n,o,i=r.props,a=i.addLockedResiduePair,c=i.candidateResidues,l=i.removeCandidateResidues,u=i.removeNonLockedResidues,d=t.stage.mouseObserver,p=d.down,f=d.canvasPosition,h=d.position,m=[p,f,d.prevClickCP,d.prevPosition,h].map(function(n){return function(n,r){for(var o=Number.MAX_SAFE_INTEGER,i=n.atomOffset[e],a=n.atomCount[e],s=0;s<a;++s){var c=t.structure.getAtomProxy(i+s),l=t.stage.viewerControls.getPositionOnCanvas(c.positionToVector3());o=Math.min(o,r.distanceTo(l))}return o}(t.structure.residueStore,n)});(void 0===o&&(o=100),m.filter(function(e){return e<o}).length>=1)?(a(((n={})[s(c,[e]).sort().toString()]=s(c,[e]),n)),l()):u()},r.handleStructureClick=function(e,t){var n=r.props,o=n.candidateResidues,i=n.hoveredResidues,a=n.removeNonLockedResidues;t?r.handleClickPick(t):o.length>=1&&i.length>=1?r.handleClickHover(e):a()},r.isExperimentalStructure=function(e){return!r.props.predictedProteins.find(function(t){return t.nglStructure.name===e.name})},r.measuredProximityHandler=function(e){var t=r.props.onMeasuredProximityChange;t&&t(e)},r.onCanvasLeave=function(){(0,r.props.removeNonLockedResidues)()},r.onClick=function(e){var t,n,o=r.state.stage,i=r.props,a=i.candidateResidues,s=i.hoveredResidues,l=i.removeNonLockedResidues;if(o)if(e)r.handleClickPick(e);else if(a.length>=1&&s.length>=1)try{for(var u=c(o.compList),d=u.next();!d.done;d=u.next()){var p=d.value;r.handleClickHover(p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}else l()},r.onKeyDown=function(e){e.preventDefault();27!==e.which&&27!==e.keyCode||(0,r.props.removeNonLockedResidues)()},r.onResizeHandler=function(e){var t=r.props.onResize,n=r.state.stage;n&&n.handleResize(),t&&t(e)},r.onSuperpositionToggle=function(e){"NONE"===r.state.superpositionStatus?r.setState({superpositionStatus:"BOTH"}):r.setState({superpositionStatus:"NONE"})},r.switchCameraType=function(){var e=r.state.stage;e&&("stereo"===e.parameters.cameraType?e.setParameters({cameraType:"perspective"}):e.setParameters({cameraFov:65,cameraType:"stereo"}),r.forceUpdate())},r.toggleDistRep=function(e){var t=r.state.isDistRepEnabled;r.setState({isDistRepEnabled:!t})},r.toggleMovePick=function(e){var t=r.state,n=t.isMovePickEnabled,o=t.stage;o&&(n?o.mouseControls.remove("clickPick-*",u.MouseActions.movePick):o.mouseControls.add("clickPick-left",u.MouseActions.movePick),r.setState({isMovePickEnabled:!n}))},r.updateRepresentation=function(e,t,n){var o,i,a={reps:new Array,structType:t},l=function(o){var i;n.find(function(e){return e.nglStructure.name===o.name})&&(o.removeAllRepresentations(),"default"===t?e.defaultFileRepresentation(o):o.addRepresentation(t),(i=a.reps).push.apply(i,s(r.deriveActiveRepresentations(o))))};try{for(var u=c(e.compList),d=u.next();!d.done;d=u.next()){l(d.value)}}catch(e){o={error:e}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return a},r}return o(n,e),n.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.backgroundColor,r=t.experimentalProteins,o=t.predictedProteins;if(this.canvas){var i=this.generateStage(this.canvas,{backgroundColor:n});i.removeAllComponents(),s(r,o).map(function(t){e.initData(i,t.nglStructure)}),this.setState({stage:i})}window.addEventListener("resize",this.onResizeHandler,!1)},n.prototype.componentWillUnmount=function(){var e=this.state.stage;e&&(e.viewer.renderer.forceContextLoss(),e.dispose(),this.setState({activeRepresentations:t.initialNGLState.activeRepresentations,stage:void 0})),window.removeEventListener("resize",this.onResizeHandler)},n.prototype.componentDidUpdate=function(e,t){var n=this,r=this.props,o=r.candidateResidues,a=r.experimentalProteins,c=r.hoveredResidues,l=r.hoveredSecondaryStructures,u=r.lockedResiduePairs,d=r.predictedProteins,p=r.measuredProximity,f=r.selectedSecondaryStructures,h=this.state,m=h.isDistRepEnabled,y=h.stage,g=h.superpositionStatus,v=s(a,d);(y&&v.length!==s(e.experimentalProteins,e.predictedProteins).length&&(y.removeAllComponents(),v.map(function(e){n.initData(y,e.nglStructure)}),this.handleSuperposition(y,g)),y&&y.compList.length>=1)&&(g!==t.superpositionStatus&&this.handleSuperposition(y,g),(o!==e.candidateResidues||c!==e.hoveredResidues||l!==e.hoveredSecondaryStructures||m!==t.isDistRepEnabled||u!==e.lockedResiduePairs||p!==e.measuredProximity||f!==e.selectedSecondaryStructures)&&this.setState({activeRepresentations:i({},this.handleRepresentationUpdate(y))}),y.viewer.requestRender())},n.prototype.render=function(){var e=this.props,t=e.experimentalProteins,n=e.height,r=e.isDataLoading,o=e.menuItems,a=e.predictedProteins,c=e.style,l=e.width,u=i({},c,{height:n,width:l});return d.createElement(h.ComponentCard,{componentName:"NGL Viewer",dockItems:this.getDockItems(),isDataReady:t.length>=1||a.length>=1,menuItems:s(o,[{component:{configs:i({},this.getSettingsConfigurations(),this.getRepresentationConfigs()),name:"POPUP",props:{trigger:d.createElement(p.Icon,{name:"setting"})}},description:"Settings"}])},d.createElement("div",{className:"NGLComponent",style:u},d.createElement(p.Dimmer,{active:r},d.createElement(p.Loader,null)),d.createElement("div",{className:"NGLCanvas",onKeyDown:this.onKeyDown,onMouseLeave:this.onCanvasLeave,ref:this.canvasRefCallback,role:"img",style:{height:"100%",width:"100%"}})))},n.prototype.addStructureToStage=function(e,t){var n=t.addComponentFromObject(e),r=this.props.predictedProteins,o=this.state.activeRepresentations;t.signals.clicked.add(this.onClick),r.find(function(e){return e.nglStructure.name===n.name})?("default"===o.predicted.structType?t.defaultFileRepresentation(n):n.addRepresentation(o.predicted.structType),this.setState({activeRepresentations:{experimental:i({},o.experimental),predicted:i({},o.predicted,{reps:s(this.deriveActiveRepresentations(n))})}})):("default"===o.experimental.structType?t.defaultFileRepresentation(n):n.addRepresentation(o.experimental.structType),this.setState({activeRepresentations:{experimental:i({},o.experimental,{reps:s(this.deriveActiveRepresentations(n))}),predicted:i({},o.predicted)}})),t.viewer.requestRender()},n.prototype.deriveActiveRepresentations=function(e){var t=this.props,n=t.candidateResidues,r=t.hoveredResidues,o=t.hoveredSecondaryStructures,i=t.lockedResiduePairs,a=t.selectedSecondaryStructures;return s(this.highlightCandidateResidues(e,s(n,r).filter(function(e,t,n){return n.indexOf(e)===t}).sort()),this.highlightLockedDistancePairs(e,i),this.highlightSecondaryStructures(e,s(o,a)))},n.prototype.getDistanceRepForResidues=function(e,t){var n=this.props,r=n.experimentalProteins,o=n.predictedProteins,i=n.measuredProximity,a=this.state.isDistRepEnabled,c=s(r,o).find(function(t){return t.nglStructure.name===e.name});if(i===m.CONTACT_DISTANCE_PROXIMITY.C_ALPHA)return y.createDistanceRepresentation(e,t.join(".CA, ")+".CA",a);if(c){var l=c.getMinDistBetweenResidues(t[0],t[1]),u=l.atomIndexI,d=l.atomIndexJ;return y.createDistanceRepresentation(e,[u,d],a)}},n.prototype.handleRepresentationUpdate=function(e){var t,n,r,o,i,a,l=this.state.activeRepresentations,u={experimental:{reps:new Array,structType:l.experimental.structType},predicted:{reps:new Array,structType:l.predicted.structType}};try{for(var d=c(e.compList),p=d.next();!p.done;p=d.next()){var f=p.value,h=this.isExperimentalStructure(f);try{for(var m=(r=void 0,c(s(l.experimental.reps,l.predicted.reps))),y=m.next();!y.done;y=m.next()){var g=y.value;f.reprList.includes(g)&&f.removeRepresentation(g)}}catch(e){r={error:e}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}h?(i=u.experimental.reps).push.apply(i,s(this.deriveActiveRepresentations(f))):(a=u.predicted.reps).push.apply(a,s(this.deriveActiveRepresentations(f)))}}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return u},n.prototype.handleSuperposition=function(e,t){"BOTH"===t?this.handleBothSuperposition(e):"NONE"===t&&(e.compList.forEach(function(e,t){e.setPosition([50*t,0,0]),e.updateRepresentations({position:!0})}),e.autoView())},n.prototype.highlightCandidateResidues=function(e,t){var n=new Array;if(t.length>=1&&(n.push(y.createBallStickRepresentation(e,t)),t.length>=2)){var r=this.getDistanceRepForResidues(e,t);r&&n.push(r)}return n},n.prototype.highlightLockedDistancePairs=function(e,t){var n,r,o=new Array;try{for(var i=c(Object.values(t)),a=i.next();!a.done;a=i.next()){var s=a.value;if(o.push(y.createBallStickRepresentation(e,s)),s.length>=2){var l=this.getDistanceRepForResidues(e,s);l&&o.push(l)}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},n.prototype.highlightSecondaryStructures=function(e,t){var n,r,o=new Array;try{for(var i=c(t),a=i.next();!a.done;a=i.next()){var s=a.value;o.push(y.createSecStructRepresentation(e,s))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},n.prototype.initData=function(e,t){t&&this.addStructureToStage(l.cloneDeep(t),e),e.viewer.requestRender()},n.prototype.onHover=function(e,t){var n=this.props,r=n.candidateResidues,o=n.hoveredResidues,i=n.removeHoveredResidues,a=this.state.stage;a&&(t&&(t.atom||t.closestBondAtom)?this.addNewHoveredResidue(t,a):0===r.length&&0!==o.length&&i())},n.defaultProps={addCandidateResidues:y.EMPTY_FUNCTION,addHoveredResidues:y.EMPTY_FUNCTION,addLockedResiduePair:y.EMPTY_FUNCTION,backgroundColor:"#ffffff",candidateResidues:[],experimentalProteins:[],height:"92%",hoveredResidues:[],hoveredSecondaryStructures:[],isDataLoading:!1,lockedResiduePairs:{},measuredProximity:m.CONTACT_DISTANCE_PROXIMITY.C_ALPHA,menuItems:[],onMeasuredProximityChange:y.EMPTY_FUNCTION,onResize:y.EMPTY_FUNCTION,predictedProteins:[],removeAllLockedResiduePairs:y.EMPTY_FUNCTION,removeAllSelectedSecondaryStructures:y.EMPTY_FUNCTION,removeCandidateResidues:y.EMPTY_FUNCTION,removeHoveredResidues:y.EMPTY_FUNCTION,removeLockedResiduePair:y.EMPTY_FUNCTION,removeNonLockedResidues:y.EMPTY_FUNCTION,selectedSecondaryStructures:[],width:"100%"},n}(d.Component);t.NGLComponent=g},"./src/component/TensorTComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),s=n("./src/component/index.ts"),c=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.onSelectedCallback,n=e.pointsToPlot;return a.createElement(s.PlotlyChart,{data:n,layout:i({},s.defaultPlotlyLayout,{dragmode:"select",margin:{b:20},xaxis:{autorange:!1,range:[0,1],showline:!0},yaxis:{autorange:!1,range:[0,1],showline:!0}}),onSelectedCallback:t})},t.defaultProps={pointsToPlot:[],style:{padding:0}},t}(a.Component);t.TensorTComponent=function(e){return a.createElement(c,i({},e))}},"./src/component/chart/AuxiliaryAxis.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./src/helper/index.ts"),c=function(){function e(e,t,n,o,i){var a=this;void 0===t&&(t=2),void 0===n&&(n=new s.ColorMapper),void 0===i&&(i=function(){return!1}),this.sections=e,this.axisIndex=t,this.colorMap=n,this.dataTransformFn=o,this.filterFn=i,this.axes=new Map,this.highlightedAxes=new Map,this.generateXAxisSegment=function(e){return r({},a.auxiliaryAxisDefaults(e),{orientation:"h",xaxis:"x",yaxis:"y"+a.axisIndex})},this.generateHighlightedXAxisSegment=function(e){return r({},a.highlightedAuxiliaryAxisDefaults(e),{orientation:"h",xaxis:"x",yaxis:"y"+a.axisIndex})},this.generateYAxisSegment=function(e){return r({},a.auxiliaryAxisDefaults(e),{orientation:"v",xaxis:"x"+a.axisIndex,yaxis:"y"})},this.generateHighlightedYAxisSegment=function(e){return r({},a.highlightedAuxiliaryAxisDefaults(e),{orientation:"v",xaxis:"x"+a.axisIndex,yaxis:"y"})},this.auxiliaryAxisDefaults=function(e){return{connectgaps:!1,hoverinfo:"none",line:{color:a.colorMap.getColorFor(e),shape:"spline",smoothing:1.3,width:1.5},marker:{symbol:[]},mode:"lines",name:e,showlegend:!1,type:"scatter",x:[],y:[]}},this.highlightedAuxiliaryAxisDefaults=function(e){return r({},a.auxiliaryAxisDefaults(e),{fill:"toself",line:{color:a.colorMap.getColorFor(e),width:0}})},this.derivePointsInAxis=function(e){for(var t={main:[e.start],opposite:[null]},n=e.start;n<=e.end;++n){var r=a.dataTransformFn&&a.dataTransformFn[e.label]?a.dataTransformFn[e.label](e,n):{main:n,opposite:-1};t.main.push(r.main),t.opposite.push(r.opposite)}return t.main.push(e.end),t.opposite.push(null),t},this.deriveHighlightedPointsInAxis=function(e){var t={main:[e.start],opposite:[null]};return t.main.push(e.start),t.opposite.push(-1),t.main.push(e.start),t.opposite.push(1),t.main.push(e.end),t.opposite.push(1),t.main.push(e.end),t.opposite.push(-1),t.main.push(e.end),t.opposite.push(null),t},this.setupAuxiliaryAxis()}return Object.defineProperty(e.prototype,"axis",{get:function(){return this.axes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xAxes",{get:function(){var e=new Array;return this.axes.forEach(function(t){e.push(t.x)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightedXAxes",{get:function(){var e=new Array;return this.highlightedAxes.forEach(function(t){e.push(t.x)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxes",{get:function(){var e=new Array;return this.axes.forEach(function(t){e.push(t.y)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightedYAxes",{get:function(){var e=new Array;return this.highlightedAxes.forEach(function(t){e.push(t.y)}),e},enumerable:!0,configurable:!0}),e.prototype.getAxisById=function(e){return this.axes.get(e)},e.prototype.setupAuxiliaryAxis=function(){var e,t,n,r,i,s,c,l,u,d;try{for(var p=o(this.sections),f=p.next();!f.done;f=p.next()){var h=f.value;if(!this.filterFn(h)){var m=h.label;this.axes.has(m)||this.axes.set(m,{x:this.generateXAxisSegment(m),y:this.generateYAxisSegment(m)}),this.highlightedAxes.has(m)||this.highlightedAxes.set(m,{x:this.generateHighlightedXAxisSegment(m),y:this.generateHighlightedYAxisSegment(m)});var y=this.axes.get(m),g=this.highlightedAxes.get(m);if(y&&g){var v=this.derivePointsInAxis(h);(n=y.x.x).push.apply(n,a(v.main)),(r=y.x.y).push.apply(r,a(v.opposite)),(i=y.y.y).push.apply(i,a(v.main)),(s=y.y.x).push.apply(s,a(v.opposite));var b=this.deriveHighlightedPointsInAxis(h);(c=g.x.x).push.apply(c,a(b.main)),(l=g.x.y).push.apply(l,a(b.opposite)),(u=g.y.y).push.apply(u,a(b.main)),(d=g.y.x).push.apply(d,a(b.opposite))}}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}},e}();t.AuxiliaryAxis=c},"./src/component/chart/ContactMapChart.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/react/index.js"),u=n("./src/component/index.ts"),d=n("./src/helper/index.ts");t.generateChartDataEntry=function(e,t,n,r,o,a,s){return void 0===s&&(s={}),i({hoverinfo:e,marker:"string"==typeof t?{color:new Array(2*a.length).fill(t)}:{colorscale:[[0,t.start],[1,t.end]]},mode:"lines+markers",name:n,nodeSize:o,points:a,subtitle:r},s)};var p=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleLegendVisibility=function(){n.setState({showlegend:!n.state.showlegend})},n.state={numLegends:0,plotlyData:[],showlegend:!1},n}return o(t,e),t.prototype.componentDidMount=function(){this.setupData()},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.contactData,r=t.secondaryStructures,o=t.selectedSecondaryStructures;e.contactData===n&&e.secondaryStructures===r&&e.selectedSecondaryStructures===o||this.setupData()},t.prototype.render=function(){var e=this.props,t=(e.configurations,e.contactData,e.isDataLoading),n=e.legendModifiers,r=e.marginModifiers,o=e.range,s=(e.showConfigurations,a(e,["configurations","contactData","isDataLoading","legendModifiers","marginModifiers","range","showConfigurations"])),c=this.state,d=c.plotlyData,p=c.showlegend;return l.createElement(u.PlotlyChart,i({data:d,showLoader:t,layout:{legend:{orientation:"h",y:n.y,yanchor:"bottom"},margin:{b:r.b,l:r.l},showlegend:p,xaxis:{fixedrange:!0,nticks:10,range:[0,o],rangemode:"nonnegative",showline:!0,tickmode:"auto",title:"Residue #"},yaxis:{fixedrange:!0,nticks:10,range:[o,0],rangemode:"nonnegative",showline:!0,tickmode:"auto",title:"Residue #"}}},s))},t.prototype.setupData=function(){var e=this.props,t=e.contactData,n=e.dataTransformFn,r=e.secondaryStructures,o=e.secondaryStructureColors,i=e.selectedSecondaryStructures,a=c(t.map(function(e){return n(e,!0)}));r.forEach(function(e,t){var n=new u.SecondaryStructureAxis(e,3,t+2,o);a.push.apply(a,c(n.xAxes,n.yAxes))});var s=new Array;i.forEach(function(e,t){var n=new u.AuxiliaryAxis(e,t+2,new d.ColorMapper(new Map,"orange"));s.push.apply(s,c(n.highlightedXAxes,n.highlightedYAxes))}),this.setState({numLegends:new Set(a.filter(function(e){return!1!==e.showlegend&&void 0!==e.name}).map(function(e){return e.name})).size,plotlyData:c(s,a)})},t.defaultProps={candidateResidues:new Array,configurations:new Array,dataTransformFn:d.generateScatterGLData,height:"100%",isDataLoading:!1,legendModifiers:{y:-.4},marginModifiers:{b:67,l:67},range:33e3,secondaryStructures:[],selectedSecondaryStructures:[],selectedSecondaryStructuresColor:"#feb83f",showConfigurations:!0,width:"100%"},t}(l.Component);t.ContactMapChart=p},"./src/component/chart/PlotlyChart.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},l=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/immutable/dist/immutable.js"),p=n("./node_modules/lodash/lodash.js"),f=n("./node_modules/plotly.js/dist/plotly-gl2d.min.js"),h=n("./node_modules/react/index.js"),m=n("./node_modules/semantic-ui-react/dist/es/index.js"),y=n("./src/data/index.ts");t.defaultPlotlyConfig={displayModeBar:!1,doubleClick:"reset",scrollZoom:!1,showAxisDragHandles:!1,staticPlot:!1},t.defaultPlotlyLayout={autosize:!0,dragmode:"zoom",hovermode:"closest",legend:{},margin:{b:10,l:40,r:10,t:10},showlegend:!1,title:""};var g=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.plotlyCanvas=null,n.isDoubleClickInProgress=!1,n.canvasRef=null,n.plotlyFormattedData=[],n.draw=function(){return a(n,void 0,void 0,function(){var e,t,n,r,o,i;return s(this,function(a){switch(a.label){case 0:return e=this.props,t=e.config,n=e.layout,this.plotlyCanvas&&this.canvasRef?(r=this.getMergedLayout(n,this.plotlyFormattedData),o=this.getMergedConfig(t),i=this,[4,f.react(this.canvasRef,this.plotlyFormattedData,r,o)]):[3,2];case 1:i.plotlyCanvas=a.sent(),a.label=2;case 2:return[2]}})})},n.resize=function(){n.plotlyCanvas&&f.Plots.resize(n.plotlyCanvas)},n.deriveChartPiece=function(e,t,n){var r=e,o=t;if(n){var i=n.xaxis&&"x"!==n.xaxis,a=n.yaxis&&"y"!==n.yaxis;if(i||a)return{chartPiece:y.BIOBLOCKS_CHART_PIECE.AXIS,selectedPoints:i?[o]:[r]}}return{chartPiece:y.BIOBLOCKS_CHART_PIECE.POINT,selectedPoints:[r,o]}},n.generateExtraPlotlyAxis=function(e){return Array.from(e.values()).filter(function(e){return e.length>=2}).map(function(e){return n.generateExtraPlotlyAxisFromId(e)}).reduce(function(e,t){return i({},e,t)},{})},n.getMergedConfig=function(e){void 0===e&&(e={});var n=d.fromJS(i({},t.defaultPlotlyConfig)),r=d.fromJS(i({},e));return i({},n.mergeDeep(r).toJS())},n.getMergedLayout=function(e,r){void 0===e&&(e={}),void 0===r&&(r=[]);var o=d.fromJS(i({},e)),a=d.fromJS(i({},t.defaultPlotlyLayout,n.deriveAxisParams(r))),s=i({},a.mergeDeep(o).toJS());return n.savedAxisZoom&&s.xaxis&&s.yaxis&&(s.xaxis.range=n.savedAxisZoom.xaxis.range,s.yaxis.range=n.savedAxisZoom.yaxis.range),s},n.onAfterPlot=function(){var e=n.props.onAfterPlotCallback;e&&e(new y.BioblocksChartEvent(y.BIOBLOCKS_CHART_EVENT_TYPE.AFTER_PLOT))},n.onClick=function(e){if(!1===n.isDoubleClickInProgress&&void 0!==e.points&&e.points.length>0){var t=n.props.onClickCallback;if(t){var r=e.points[0].x?e.points[0].x:e.points[0].data.x[0],o=e.points[0].y?e.points[0].y:e.points[0].data.y[0],i=n.deriveChartPiece(r,o,e.points[0].data),a=i.chartPiece,s=i.selectedPoints;t(new y.BioblocksChartEvent(y.BIOBLOCKS_CHART_EVENT_TYPE.CLICK,a,s))}}},n.onDoubleClick=function(){n.isDoubleClickInProgress=!0;var e=n.props.onDoubleClickCallback;e&&e(new y.BioblocksChartEvent(y.BIOBLOCKS_CHART_EVENT_TYPE.DOUBLE_CLICK))},n.onHover=function(e){var t=n.props.onHoverCallback;if(e.points&&e.points[0]&&t){var r=e.points[0].x?e.points[0].x:e.points[0].data.x[0],o=e.points[0].y?e.points[0].y:e.points[0].data.y[0],i=n.deriveChartPiece(r,o,e.points[0].data),a=i.chartPiece,s=i.selectedPoints;t(new y.BioblocksChartEvent(y.BIOBLOCKS_CHART_EVENT_TYPE.HOVER,a,s))}},n.onRelayout=function(e){n.isDoubleClickInProgress=!1;var t=["xaxis.range[0]","xaxis.range[1]","yaxis.range[0]","yaxis.range[1]"],r=void 0!==e&&!0===t.reduce(function(t,n){return t&&void 0!==e[n]},!0);n.savedAxisZoom=r?{xaxis:{autorange:!1,range:[e[t[0]],e[t[1]]]},yaxis:{autorange:!1,range:[e[t[2]],e[t[3]]]}}:void 0;var o=n.props.onRelayoutCallback;o&&o(new y.BioblocksChartEvent(y.BIOBLOCKS_CHART_EVENT_TYPE.RELAYOUT))},n.onSelect=function(e){return a(n,void 0,void 0,function(){var t,n,r;return s(this,function(o){switch(o.label){case 0:return t=this.props.onSelectedCallback,e&&t&&(n=new Array,e.points.length>=1?n=e.points.reduce(function(e,t){return e.push.apply(e,l([t.x,t.y])),e},n):e.range&&n.push(e.range.x[0],e.range.y[0],e.range.x[1],e.range.y[1]),r=(n.length>0?this.deriveChartPiece(n[0],n[1]):{chartPiece:y.BIOBLOCKS_CHART_PIECE.POINT}).chartPiece,t(new y.BioblocksChartEvent(y.BIOBLOCKS_CHART_EVENT_TYPE.SELECTION,r,n,e))),[4,this.draw()];case 1:return o.sent(),[2]}})})},n.onUnHover=function(e){var t=n.props.onUnHoverCallback;if(e&&t){var r=e.points[0],o=r.data,i=r.x,a=r.y,s=n.deriveChartPiece(i,a,o),c=s.chartPiece,l=s.selectedPoints;t(new y.BioblocksChartEvent(y.BIOBLOCKS_CHART_EVENT_TYPE.UNHOVER,c,l))}},n}return o(n,e),n.prototype.attachListeners=function(){this.plotlyCanvas&&(this.plotlyCanvas.on("plotly_afterplot",this.onAfterPlot),this.plotlyCanvas.on("plotly_click",this.onClick),this.plotlyCanvas.on("plotly_doubleclick",this.onDoubleClick),this.plotlyCanvas.on("plotly_hover",this.onHover),this.plotlyCanvas.on("plotly_relayout",this.onRelayout),this.plotlyCanvas.on("plotly_selected",this.onSelect),this.plotlyCanvas.on("plotly_unhover",this.onUnHover)),window.removeEventListener("resize",this.resize),window.addEventListener("resize",this.resize)},n.prototype.componentDidMount=function(){return a(this,void 0,void 0,function(){var e,t,n;return s(this,function(r){switch(r.label){case 0:return!this.canvasRef||this.plotlyCanvas?[3,3]:(e=this.props.data,t=d.fromJS(e),this.plotlyFormattedData=t.toJS(),n=this,[4,f.react(this.canvasRef,this.plotlyFormattedData)]);case 1:return n.plotlyCanvas=r.sent(),this.attachListeners(),[4,this.draw()];case 2:r.sent(),r.label=3;case 3:return[2]}})})},n.prototype.componentWillUnmount=function(){this.renderTimeout&&clearTimeout(this.renderTimeout),this.plotlyCanvas&&(f.purge(this.plotlyCanvas),this.plotlyCanvas=null,this.canvasRef=null),window.removeEventListener("resize",this.resize)},n.prototype.componentDidUpdate=function(e){return a(this,void 0,void 0,function(){var t,n,r,o;return s(this,function(i){switch(i.label){case 0:return t=this.props,n=t.data,r=t.layout,o=t.config,p.isEqual(n[0],e.data[0])&&p.isEqual(r,e.layout)&&p.isEqual(o,e.config)?[3,2]:(this.plotlyFormattedData=p.isEqual(n[0],e.data[0])?this.plotlyFormattedData:d.fromJS(n).toJS(),[4,this.draw()]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.render=function(){var e=this,t=this.props,n=t.height,r=t.showLoader,o=t.style,a=t.width;return h.createElement(h.Fragment,null,r&&h.createElement(m.Dimmer,{active:!this.isDataLoaded()},h.createElement(m.Loader,null)),h.createElement("div",{className:"plotly-chart",ref:function(t){return e.canvasRef=t||null},style:i({marginBottom:5},o,{height:n,width:a})}))},n.prototype.deriveAxisParams=function(e){var t,n,r=new Set,o=new Set;try{for(var a=u(e),s=a.next();!s.done;s=a.next()){var c=s.value,l=c.xaxis,d=c.yaxis;l&&r.add(l),d&&o.add(d)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i({},this.generateExtraPlotlyAxis(r),this.generateExtraPlotlyAxis(o),{xaxis:{domain:[0,1-.05*r.size],zeroline:!1},yaxis:{domain:[0,1-.05*r.size],zeroline:!1}})},n.prototype.generateExtraPlotlyAxisFromId=function(e){var t,n=e.substr(0,1),r=Number.parseInt(e.substr(1),10);return(t={})[n+"axis"+r]={domain:[1-.05*(r-1),1-.05*(r-2)],fixedrange:!0,visible:!1},t},n.prototype.isDataLoaded=function(){var e=function(e){return e.filter(function(e){return e.x&&e.x.length>=1||e.xy&&e.xy.length>=1}).length>0};return e(this.props.data)||e(this.plotlyFormattedData)},n.defaultProps={config:{},data:[],height:"100%",layout:{},showLoader:!0,width:"100%"},n}(h.Component);t.PlotlyChart=g},"./src/component/chart/SecondaryStructureAxis.ts":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./src/component/chart/index.ts"),s=n("./src/helper/index.ts"),c=function(e){function t(n,r,o,i,a,c){void 0===r&&(r=3),void 0===o&&(o=2),void 0===i&&(i=new s.ColorMapper(new Map([["C","red"],["E","green"],["H","blue"]]),"black")),void 0===a&&(a={C:t.centerSectionPositionFn,E:t.centerSectionPositionFn,H:function(e,t){return{main:t,opposite:Math.sin(t)}}}),void 0===c&&(c=function(e){return e.length<=r});var l=e.call(this,n,o,i,a)||this;return l.sections=n,l.minimumRequiredResidues=r,l.axisIndex=o,l.colorMap=i,l.dataTransformFn=a,l.filterFn=c,l}return o(t,e),t.prototype.setupAuxiliaryAxis=function(){e.prototype.setupAuxiliaryAxis.call(this);var t=this.getAxisById("E");if(t&&t.x.x&&t.x.y){for(var n={main:new Array(t.x.x.length).fill("line-ne"),opposite:new Array(t.x.x.length).fill("line-ne")},r=1;r<t.x.x.length-1;++r)null===t.x.y[r+1]&&(n.main[r]="triangle-right",n.opposite[r]="triangle-down");t.x=i({},t.x,this.generateBetaSheetStyle(t.x,n.main)),t.y=i({},t.y,this.generateBetaSheetStyle(t.y,n.opposite))}},t.prototype.generateBetaSheetStyle=function(e,t){return{line:i({},e.line,{width:5}),marker:i({},e.marker,{color:this.colorMap.getColorFor("E"),size:10,symbol:t}),mode:"lines+markers"}},t.centerSectionPositionFn=function(e,t){return{main:t,opposite:0}},t}(a.AuxiliaryAxis);t.SecondaryStructureAxis=c},"./src/component/chart/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/component/chart/PlotlyChart.tsx")),r(n("./src/component/chart/AuxiliaryAxis.ts")),r(n("./src/component/chart/ContactMapChart.tsx")),r(n("./src/component/chart/SecondaryStructureAxis.ts"))},"./src/component/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/component/chart/index.ts")),r(n("./src/component/widget/index.ts")),r(n("./src/component/ContactMap.tsx")),r(n("./src/component/FeatureViewer.tsx")),r(n("./src/component/NGLComponent.tsx")),r(n("./src/component/TensorTComponent.tsx"))},"./src/component/widget/BioblocksRadioGroup.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),a=n("./node_modules/semantic-ui-react/dist/es/index.js"),s=function(e){function t(t){var n=e.call(this,t)||this;n.handleChange=function(e){return function(t,r){var o=n.props.onChange;n.setState({selectedIndex:e}),o&&o(e)}},n.renderOptions=function(e,t,r,o){return e.map(function(e,s){return i.createElement(a.Grid.Column,{key:t+"-"+e+"-"+s,style:{paddingBottom:0,paddingTop:"7px"}},i.createElement(a.Form.Radio,{checked:n.state.selectedIndex===s,disabled:r,label:{children:e,style:o},name:e,onChange:n.handleChange(s),value:s}))})};var r=t.defaultOption,o=t.options,s=t.selectedOption,c=0;return s&&o.includes(s)?c=o.indexOf(s):r&&o.includes(r)&&(c=o.indexOf(r)),n.state={selectedIndex:c},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.id,r=e.options,o=e.style,s=e.title;return i.createElement("div",{style:o},i.createElement(a.Form,null,i.createElement(a.Grid,{centered:!0,columns:2,padded:!0},i.createElement(a.Grid.Row,null,i.createElement("div",{style:{fontStyle:"italic",fontWeight:"bold",textDecoration:"underline"}},s)),this.renderOptions(r,n,t,o))))},t.defaultProps={disabled:!1,style:{},title:"How to calculate distance between two residues:"},t}(i.Component);t.BioblocksRadioGroup=s},"./src/component/widget/BioblocksRangeSlider.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/rc-slider/es/index.js"),c=n("./node_modules/react/index.js");n("./node_modules/rc-slider/assets/index.css");var l=n("./node_modules/semantic-ui-react/dist/es/index.js"),u=function(e){function t(t){var n=e.call(this,t)||this;return n.onAfterChange=function(e){return function(t){e&&e(t),n.setState({range:t})}},n.onChange=function(e){return function(t){e&&e(t),n.setState({range:t})}},n.onReset=function(){n.onChange(n.props.onChange)(n.state.defaultValue)},n.state={defaultValue:t.defaultValue?t.defaultValue:t.value,range:t.value},n}return o(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.defaultValue,r=t.value;r&&r!==e.value&&this.setState({range:r});var o=n||r;o!==this.state.defaultValue&&this.setState({defaultValue:o})},t.prototype.render=function(){var e=this.props,t=e.value,n=e.hideLabelValue,r=e.max,o=e.min,u=e.label,d=e.onAfterChange,p=e.onChange,f=e.style,h=a(e,["value","hideLabelValue","max","min","label","onAfterChange","onChange","style"]),m=this.state.range;return c.createElement("div",{style:f},c.createElement(l.Grid.Column,{style:{float:"left",height:"100%",width:"75%"}},!n&&c.createElement("p",null,u+": ["+m.join(" - ")+"]"),c.createElement(s.Range,i({allowCross:!1,pushable:!1,max:r,min:o,onAfterChange:this.onAfterChange(d),onChange:this.onChange(p),value:t},h))),c.createElement(l.Grid.Column,{style:{float:"right",padding:"5% 0",width:"20%"},verticalAlign:"middle"},c.createElement(l.Button,{icon:"undo",onClick:this.onReset,size:"small"})))},t}(c.Component);t.BioblocksRangeSlider=u},"./src/component/widget/BioblocksSlider.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/rc-slider/es/index.js"),c=n("./node_modules/react/index.js");n("./node_modules/rc-slider/assets/index.css");var l=n("./node_modules/semantic-ui-react/dist/es/index.js"),u=function(e){function t(t){var n=e.call(this,t)||this;return n.onAfterChange=function(e){return function(t){e&&e(t),n.setState({value:t})}},n.onChange=function(e){return function(t){e&&e(t),n.setState({value:t})}},n.onReset=function(){n.onChange(n.props.onChange)(n.state.defaultValue)},n.state={defaultValue:t.defaultValue?t.defaultValue:t.value,value:t.value},n}return o(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.defaultValue,r=t.value;r&&r!==e.value&&this.setState({value:r});var o=n||r;-1===this.state.defaultValue&&o!==this.state.defaultValue&&this.setState({defaultValue:o})},t.prototype.render=function(){var e=this.props,t=e.value,n=e.hideLabelValue,r=e.max,o=e.min,u=e.label,d=e.onAfterChange,p=e.onChange,f=e.style,h=a(e,["value","hideLabelValue","max","min","label","onAfterChange","onChange","style"]);return c.createElement("div",{style:f},c.createElement(l.Grid.Column,{style:{float:"left",height:"100%",width:"75%"}},!n&&c.createElement("p",null,u+": "+this.state.value),c.createElement(s.default,i({max:r,min:o,onAfterChange:this.onAfterChange(d),onChange:this.onChange(p),value:t},h))),c.createElement(l.Grid.Column,{style:{float:"right",padding:"5% 0",width:"20%"},verticalAlign:"middle"},c.createElement(l.Button,{icon:"undo",onClick:this.onReset,size:"small"})))},t}(c.Component);t.BioblocksSlider=u},"./src/component/widget/CategorySelector.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.categories,n=e.onCategoryChange;return this.props.categories&&s.createElement(c.Dropdown,{fluid:!0,onChange:n,options:a(t.map(function(e){return{key:e,text:e,value:e}})),placeholder:"Select Category",search:!0})},t.defaultProps={categories:[]},t}(s.Component);t.CategorySelector=l},"./src/component/widget/ComponentCard.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),s=n("./node_modules/react-dom/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=n("./src/component/widget/index.ts"),u=function(e){function t(t){var n=e.call(this,t)||this;return n.cardRef=null,n.renderCard=function(e,t,r){return t?a.createElement(c.Modal,{closeOnDimmerClick:!0,closeOnEscape:!0,onClose:n.onFullPageToggle,open:!0,size:"large",style:i({},r,{willChange:"unset"})},e):e},n.renderCardChildren=function(){var e=n.props,t=e.children,r=e.headerHeight,o=e.isFramedComponent,i=n.state.framedStyle;return a.createElement(a.Fragment,null,a.createElement("div",{style:{height:"6%"}},n.renderTopMenu(r)),a.createElement("div",{style:{height:"91%",width:"100%"}},o?a.createElement("div",{style:i},t):t),a.createElement("div",{style:{height:"3%"}},n.renderDock()))},n.renderDock=function(){var e=n.props,t=e.dockItems,r=e.isDataReady;return t.length>=1&&a.createElement(l.ComponentDock,{dockItems:t,visible:r})},n.renderTopMenu=function(e){var t=n.props,r=t.componentName,o=t.iconSrc,i=t.menuItems,s=n.state.isFullPage;return a.createElement(l.ComponentMenuBar,{componentName:r,height:e,iconSrc:o,isExpanded:s,menuItems:i,onExpandToggleCb:n.onFullPageToggle})},n.onFullPageToggle=function(){n.setState({isFullPage:!n.state.isFullPage}),n.forceUpdate()},n.state={framedStyle:{transformOrigin:"top left"},isFullPage:t.isFullPage},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.isFramedComponent&&(window.onresize=function(){e.props.isFramedComponent&&e.resizeFramedComponent()},this.resizeFramedComponent())},t.prototype.componentDidUpdate=function(e,t){this.state.isFullPage!==t.isFullPage&&this.resizeFramedComponent()},t.prototype.render=function(){var e=this,t=this.props,n=t.expandedStyle,r=t.height,o=t.width,s=this.state.isFullPage,l="string"==typeof r?parseInt(r,10):r,u=i({maxWidth:"unset",padding:"0 0 5px 5px"},s?i({},n,{padding:"5px"}):{height:1.01*l+"px",width:o}),d=a.createElement(c.Card,{centered:!0,className:"bioblocks-component-card",ref:function(t){return e.cardRef=t},style:u},this.renderCardChildren());return this.renderCard(d,s,n)},t.prototype.resizeFramedComponent=function(){var e=this.props,t=e.frameHeight,n=e.frameWidth,r=e.headerHeight,o=this.state,a=o.framedStyle,c=o.isFullPage,l=s.findDOMNode(this.cardRef);if(l){var u=window.getComputedStyle(l);if(u&&null!==u.width&&null!==u.height){document.body.style.overflowY=c?"hidden":"auto";var d=parseInt(u.height,10)-18,p=parseInt(u.width,10)-10;this.setState({framedStyle:i({},a,{transform:"scale(calc("+p+"/"+n+"),calc(("+d+" - "+r+")/"+t+"))"})})}}},t.defaultProps={dockItems:[],expandedStyle:{height:"85vh",width:"85vh"},frameHeight:0,frameWidth:0,headerHeight:20,height:"525px",iconSrc:"https://bioblocks.org/media/5d3f528028d9720a3428e4b2",isDataReady:!1,isFramedComponent:!1,isFullPage:!1,menuItems:[],padding:0,showSettings:!1,width:"525px"},t}(a.Component);t.ComponentCard=u},"./src/component/widget/ComponentDock.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),a=n("./node_modules/semantic-ui-react/dist/es/index.js"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.renderSingleDockItem=function(e,t){if(e.isVisibleCb&&!1===e.isVisibleCb())return null;var n=void 0===e.isLink||e.isLink;return i.createElement(a.Grid.Column,{key:"dock-item-"+t,style:{padding:0,paddingTop:"3px"}},n?i.createElement("div",{style:{userSelect:"none"}},i.createElement("a",{"aria-pressed":!1,onClick:e.onClick,role:"button"},e.text)):i.createElement("div",null,e.text))},n}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.dockItems;return t.visible&&i.createElement(a.Grid,{centered:!0,columns:"equal",style:{marginLeft:"initial",marginRight:"initial",marginTop:"-0.5rem",padding:0},stretched:!0},n.map(function(t,n){return e.renderSingleDockItem(t,n)}))},t.defaultProps={visible:!0},t}(i.Component);t.ComponentDock=s},"./src/component/widget/ComponentMenuBar.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=n("./src/component/widget/index.ts"),u=n("./src/data/index.ts");t.DEFAULT_POPUP_PROPS={closeOnPortalMouseLeave:!1,closeOnTriggerClick:!0,closeOnTriggerMouseLeave:!1,hoverable:!1,openOnTriggerClick:!0,openOnTriggerFocus:!1,openOnTriggerMouseEnter:!1,position:"bottom left",style:{marginTop:0,maxHeight:"350px",overflow:"auto",zIndex:3}};var d=function(e){function n(t){var n=e.call(this,t)||this;return n.renderConfigs=function(e){return Object.keys(e).map(function(t){var r;return(r={})[t]=e[t].map(function(e,r){return s.createElement(c.Grid.Row,{columns:1,key:"menu-bar-"+t+"-row-"+r,style:{padding:"5px 0",width:"100%"}},n.renderConfig(e,t+"-row-"+r))}),r})},n.onMenuEnter=function(){n.setState({isHovered:!0})},n.onMenuLeave=function(){n.setState({isHovered:!1})},n.state={isHovered:!1},n}return o(n,e),n.prototype.render=function(){var e=this.props,t=e.componentName,n=e.height,r=e.iconSrc,o=e.isExpanded,i=e.menuItems,a=e.onExpandToggleCb;return s.createElement("div",{onMouseEnter:this.onMenuEnter,onMouseLeave:this.onMenuLeave},s.createElement(c.Menu,{secondary:!0,style:{margin:0,height:n},widths:2},s.createElement(c.Menu,{secondary:!0,widths:1},s.createElement(c.Menu.Item,{fitted:"horizontally",position:"left",style:{margin:0,padding:0,width:"auto"}},r&&s.createElement("img",{alt:"component icon",src:r,style:{height:"32px",padding:"2px",width:"32px"}}),t)),s.createElement(c.Menu,{secondary:!0,widths:4},this.renderMenuItems(i,t),s.createElement(c.Menu.Item,{fitted:"horizontally",position:"right",style:{flexDirection:"column"}},s.createElement(c.Icon,{name:o?"compress":"expand arrows alternate",onClick:a}),this.renderMenuIconText(o?"Close":"Expand")))))},n.prototype.renderConfig=function(e,t){switch(e.type){case u.CONFIGURATION_COMPONENT_TYPE.BUTTON:return this.renderConfigurationButton(e,"button-"+t);case u.CONFIGURATION_COMPONENT_TYPE.BUTTON_GROUP:return this.renderConfigurationButtonGroup(e,"button-"+t);case u.CONFIGURATION_COMPONENT_TYPE.CHECKBOX:return this.renderConfigurationCheckbox(e,"label-"+t);case u.CONFIGURATION_COMPONENT_TYPE.LABEL:return this.renderConfigurationLabel(e,"label-"+t);case u.CONFIGURATION_COMPONENT_TYPE.RADIO:return this.renderConfigurationRadioButton(e,"radio-"+t);case u.CONFIGURATION_COMPONENT_TYPE.RANGE_SLIDER:return this.renderConfigurationRangeSlider(e,"range-slider-"+t);case u.CONFIGURATION_COMPONENT_TYPE.SLIDER:return this.renderConfigurationSlider(e,"slider-"+t);default:return"configuration for "+t}},n.prototype.renderConfigurationButton=function(e,t){return s.createElement(c.Button,{compact:!0,key:t,onClick:e.onClick,style:e.style},e.icon&&s.createElement(c.Icon,{name:e.icon}),e.name)},n.prototype.renderConfigurationButtonGroup=function(e,t){return s.createElement(c.Grid,{padded:!0,style:{padding:"initial 0"}},s.createElement(c.Grid.Row,{columns:2},s.createElement(c.Grid.Column,{width:11},e.name),s.createElement(c.Grid.Column,{width:5},s.createElement(c.Button.Group,null,e.options.map(function(n,r){return s.createElement(c.Button,{icon:n,key:t+"-"+r,style:e.style,basic:!0,compact:!0})})))))},n.prototype.renderConfigurationCheckbox=function(e,t){return s.createElement(c.Checkbox,{key:t,checked:e.checked,label:e.name,onChange:e.onChange,style:e.style})},n.prototype.renderConfigurationLabel=function(e,t){return s.createElement(c.Label,{basic:!0,key:t,style:e.style,color:"orange"},e.name)},n.prototype.renderConfigurationRadioButton=function(e,t){return s.createElement(l.BioblocksRadioGroup,{defaultOption:e.defaultOption,id:t,key:t,options:e.options,onChange:e.onChange,selectedOption:e.current,style:e.style,title:e.name})},n.prototype.renderConfigurationRangeSlider=function(e,t){return s.createElement(l.BioblocksRangeSlider,{key:t,label:e.name,defaultValue:e.range.defaultRange,max:e.range.max,min:e.range.min,onAfterChange:e.onAfterChange,onChange:e.onChange,style:i({padding:"2px 0 3px 18px",width:"100%"},e.style),value:e.range.current})},n.prototype.renderConfigurationSlider=function(e,t){return s.createElement(l.BioblocksSlider,{key:t,label:e.name,defaultValue:e.values.defaultValue,marks:e.marks,max:e.values.max,min:e.values.min,onAfterChange:e.onAfterChange,onChange:e.onChange,step:e.step,style:i({padding:"2px 0 3px 18px",width:"100%"},e.style),value:e.values.current})},n.prototype.renderMenuIconText=function(e){var t=this.state.isHovered;return s.createElement("span",{style:{fontSize:"11px",visibility:t?"visible":"hidden"}},e)},n.prototype.renderMenuItems=function(e,n){var r=this,o=this.props.opacity;return e.map(function(e,u){var d=i({},t.DEFAULT_POPUP_PROPS,e.component.props),p=d.style,f=a(d,["style"]),h=null;if("POPUP"===e.component.name){var m=s.createElement(c.Icon,{name:e.iconName?e.iconName:"setting"});h=e.component.configs?s.createElement(c.Popup,i({trigger:m},f,{wide:!0,style:{opacity:o}}),s.createElement(l.ConfigAccordion,{configs:r.renderConfigs(e.component.configs),gridStyle:p,title:"Config"})):s.createElement(c.Popup,i({trigger:m},f,{style:{opacity:o}}))}return h&&s.createElement(c.Menu.Item,{fitted:"horizontally",key:n+"-menu-item-"+u,position:"right",style:{flexDirection:"column"}},h,r.renderMenuIconText(e.description))})},n.defaultProps={height:"100%",isExpanded:!1,menuItems:[],opacity:.85,width:"100%"},n}(s.Component);t.ComponentMenuBar=d},"./src/component/widget/ConfigAccordion.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.renderConfigs=function(e,t){return e.map(function(r,o){return Object.keys(r).map(function(r){return s.createElement(c.Grid.Row,{key:"accordion-"+r,textAlign:"left"},s.createElement(c.Accordion.Title,{active:t.includes(o),index:o,key:r+"-title",onClick:n.onClick,style:{fontWeight:"bolder",textAlign:"left"}},s.createElement(c.Icon,{name:"dropdown"}),r),s.createElement(c.Accordion.Content,{active:t.includes(o),key:r+"-content",style:{width:"100%"}},n.renderSingleConfig(Object.entries(e)[o])))})})},n.onClick=function(e,t){var r=n.props.allowMultipleOpen,o=n.state.activeIndices;void 0!==t&&void 0!==t.index&&(o.includes(t.index)?n.setState({activeIndices:o.filter(function(e){return e!==t.index})}):r?n.setState({activeIndices:a(o,[t.index])}):n.setState({activeIndices:[t.index]}))},n.renderSingleConfig=function(e){return s.createElement(c.Grid.Row,{key:"accordion-"+e[0],textAlign:"left"},s.createElement(c.Grid,{padded:!0,relaxed:!0,stretched:!0,style:{marginTop:"7px"}},Object.values(e[1])))},n.state={activeIndices:t.configs.length>=1?[0]:[]},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.configs,n=e.gridStyle,r=this.state.activeIndices;return s.createElement(c.Accordion,null,s.createElement(c.Grid,{padded:!0,stretched:!0,style:n},this.renderConfigs(t,r)))},t.defaultProps={allowMultipleOpen:!1,gridStyle:{}},t}(s.Component);t.ConfigAccordion=l},"./src/component/widget/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/component/widget/BioblocksRadioGroup.tsx")),r(n("./src/component/widget/BioblocksRangeSlider.tsx")),r(n("./src/component/widget/BioblocksSlider.tsx")),r(n("./src/component/widget/CategorySelector.tsx")),r(n("./src/component/widget/ComponentCard.tsx")),r(n("./src/component/widget/ComponentDock.tsx")),r(n("./src/component/widget/ComponentMenuBar.tsx")),r(n("./src/component/widget/ConfigAccordion.tsx"))},"./src/container/AnatomogramContainer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/anatomogram/lib/index.js"),s=n("./node_modules/immutable/dist/immutable.js"),c=n("./node_modules/react/index.js"),l=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/redux/es/redux.js"),d=n("./src/action/index.ts"),p=n("./src/component/index.ts"),f=n("./src/container/index.ts"),h=n("./src/data/index.ts"),m=n("./src/helper/index.ts"),y=n("./src/reducer/index.ts"),g=n("./src/selector/index.ts"),v=function(e){function t(t){var n=e.call(this,t)||this;return n.divRef=null,n.onClick=function(e){var t=e[0],r=n.props,o=r.addLabel,i=r.removeLabel;r.selectIds.includes(t)?i(t):o(t)},n.deriveIdsFromSpecies=function(e){return Object.keys(h.AnatomogramMapping[e])},n.onMouseOut=function(e){},n.onMouseOver=function(e){},n.parseCategory=function(e){return e.split(/-|_/)[0]},n.resizeSVGElement=function(e,t){if(n.divRef){var r=t.height.baseVal.value>t.width.baseVal.value;t.style.height=r?"calc("+n.divRef.style.height+" - 50px)":"auto",t.style.padding="0",t.style.width=r?"auto":"calc("+n.divRef.style.width+" - 75px)"}},n.state={ids:n.deriveIdsFromSpecies(t.species)},n}return o(t,e),t.prototype.setupDataServices=function(){var e=this;this.registerDataset("cells",[]),this.registerDataset("labels",[]),y.BioblocksMiddlewareTransformer.addTransform({fn:function(t){var n=e.props,r=n.species,o=n.selectIds,i=g.getSpring(t).graphData,a=h.AnatomogramMapping[r],c=s.Set();o.forEach(function(e){c=e&&a[e]?c.merge(a[e]):c});var l=s.Set();return i.nodes.forEach(function(e){c.forEach(function(t){t&&Object.values(e.labelForCategory).includes(t)&&(l=l.add(e.number))})}),l},fromState:"bioblocks/labels",toState:"bioblocks/cells"}),y.BioblocksMiddlewareTransformer.addTransform({fn:function(t){var n,r,o,a,c,l,u=e.props.species,d=g.selectCurrentItems(t,"cells").toArray(),p=g.getSpring(t),f=p.category,m=p.graphData,y=s.Set();try{for(var v=i(d),b=v.next();!b.done;b=v.next()){var _=b.value,C=m.nodes[_]?m.nodes[_].labelForCategory:{},S=h.AnatomogramMapping[u][C[f]];S&&S.forEach(function(e){return y=y.add(e)});try{for(var P=(o=void 0,i(Object.keys(h.AnatomogramMapping[u]))),x=P.next();!x.done;x=P.next()){var A=x.value;try{for(var w=(c=void 0,i(Object.values(C))),T=w.next();!T.done;T=w.next()){var O=T.value;h.AnatomogramMapping[u][A].includes(O)&&(y=y.add(A))}}catch(e){c={error:e}}finally{try{T&&!T.done&&(l=w.return)&&l.call(w)}finally{if(c)throw c.error}}}}catch(e){o={error:e}}finally{try{x&&!x.done&&(a=P.return)&&a.call(P)}finally{if(o)throw o.error}}}}catch(e){n={error:e}}finally{try{b&&!b.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}return y},fromState:{stateName:"cells"},toState:{stateName:"labels"}})},t.prototype.componentDidUpdate=function(e){var t=this.props.species;t!==e.species&&this.setState({ids:this.deriveIdsFromSpecies(t)})},t.prototype.render=function(){var e=this,t=this.props,n=t.iconSrc,r=t.species,o=t.selectIds,i=this.state.ids;return c.createElement(l.Provider,{store:y.BBStore},c.createElement("div",{className:"anatomogram-container",ref:function(t){t&&(e.divRef=t.getElementsByTagName("div")[0])}},c.createElement(p.ComponentCard,{componentName:"Anatomogram",iconSrc:n},c.createElement(a.default,{atlasUrl:"",highlightColour:"yellow",onClick:this.onClick,onInjected:this.resizeSVGElement,onMouseOut:this.onMouseOut,onMouseOver:this.onMouseOver,selectColour:"ffaa00",selectIds:o.toArray(),showIds:i,species:r,selectedView:"mus_musculus"===r?"female":"male"}))))},t.defaultProps={addLabel:m.EMPTY_FUNCTION,removeLabel:m.EMPTY_FUNCTION,selectIds:s.Set()},t.displayName="Anatomogram",t}(f.BioblocksVisualization);t.AnatomogramContainerClass=v;t.AnatomogramContainer=l.connect(function(e){return{selectIds:g.selectCurrentItems(e,"labels")}},function(e){return u.bindActionCreators({addLabel:d.createContainerActions("labels").add,removeLabel:d.createContainerActions("labels").remove},e)})(v)},"./src/container/BioblocksVisualization.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/immutable/dist/immutable.js"),a=n("./node_modules/react/index.js"),s=n("./node_modules/util/util.js"),c=n("./src/data/index.ts"),l=n("./src/reducer/index.ts"),u=function(e){function t(n){var r=e.call(this,n)||this;return r.bioblocksHooks={},r.datasets=i.Set(),r.loadingStatus=2,t.activeBioblocksVisualizations=t.activeBioblocksVisualizations.add(r),r.setupDataServices(),r}return o(t,e),t.prototype.componentWillUnmount=function(){this.teardown()},t.prototype.addBioblocksHook=function(e,t){this.bioblocksHooks[e]=t},t.prototype.registerDataset=function(e,t,n){void 0===n&&(n="bioblocks"),this.datasets=this.datasets.add(new c.Dataset(e,n)),this.createReducer(e,t,n)},t.prototype.finishLoading=function(){this.loadingStatus=3},t.prototype.getDatasets=function(){return this.datasets},t.prototype.getComponentBioblocksHooks=function(){return this.bioblocksHooks},t.prototype.getLoadingStatus=function(){return this.loadingStatus},t.prototype.teardown=function(){t.activeBioblocksVisualizations=t.activeBioblocksVisualizations.remove(this)},t.prototype.createReducer=function(e,t,n){void 0===n&&(n="bioblocks"),s.isArray(t)?l.createContainerReducer(e,n):"object"==typeof t?l.createObjectReducer(e,n):l.createValueReducer(e,t,n)},t.getActiveBioblocksVisualizations=function(){return t.activeBioblocksVisualizations},t.activeBioblocksVisualizations=i.Set(),t}(a.Component);t.BioblocksVisualization=u},"./src/container/InfoPanelContainer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/react/index.js"),s=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=n("./src/data/index.ts"),u=n("./src/selector/index.ts"),d=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.data,r=t.height,o=t.lockedResiduePairs,i=t.selectedSecondaryStructures,s=t.width,l=n.pdbData,u=l&&l.experimental?this.renderUnassignedResidues(l.experimental):[a.createElement(c.Label,{key:"unassigned-residues-none"})];return a.createElement("div",{className:"InfoPanel",style:{height:r,width:s}},a.createElement(c.Accordion,{exclusive:!1,panels:[l&&l.experimental&&l.experimental.secondaryStructureSections.map(function(t){return{content:e.renderSecondaryStructures(t),key:"all-secondary-structures",title:"All Secondary Structures ("+(l.experimental?l.experimental.secondaryStructureSections.length:0)+"):"}}),{content:u,key:"unassigned-residues",title:"Unassigned Residues ("+u.length+"):"},{content:this.renderSecondaryStructures(i),key:"selected-secondary-structures",title:"Selected Secondary Structures ("+i.length+"):"},{content:this.renderLockedResiduePairs(o),key:"selected-residue-pairs",title:"Selected Residue Pairs ("+o.size+"):"}]}))},t.prototype.renderLockedResiduePairs=function(e){return 0===Object.keys(e).length?[a.createElement(c.Label,{key:"locked-residue-pair-none"},"None")]:Array.from(Object.values(e)).map(function(e,t){return a.createElement(c.Label,{key:"locked-residue-pair-"+t},e.join(", "))})},t.prototype.renderSecondaryStructures=function(e){return 0===e.length?[a.createElement(c.Label,{key:"sec-struct-none"},"None")]:e.map(function(e,t){return a.createElement(c.Label,{key:"sec-struct-"+t},"["+e.start+"-"+e.end+"]: "+e.label+" - "+l.SECONDARY_STRUCTURE_CODES[e.label])})},t.prototype.renderUnassignedResidues=function(e){var t=new Array;return e.eachResidue(function(n){var r,o,s,l;if(n.isProtein()){var u=!0;try{for(var d=i(e.secondaryStructureSections),p=d.next();!p.done;p=d.next()){var f=p.value;try{for(var h=(s=void 0,i(f)),m=h.next();!m.done;m=h.next()){if(m.value.contains(n.resno)){u=!1;break}}}catch(e){s={error:e}}finally{try{m&&!m.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}u&&t.push(a.createElement(c.Label,{key:"unassigned-residue-"+n.resno},"["+n.resno+": isCg? "+n.isCg()+",               isDna? "+n.isDna()+",               isHelix? "+n.isHelix()+",               isNucleic? "+n.isNucleic()+",               isProtein? "+n.isProtein()+",               isPolymer? "+n.isPolymer()+",               isSaccharide? "+n.isSaccharide()+",               isSheet? "+n.isSheet()+",              isTurn? "+n.isTurn(),"}"))}}),t},t.defaultProps={data:{couplingScores:new l.CouplingContainer,pdbData:{},secondaryStructures:new Array},height:400,lockedResiduePairs:{},selectedSecondaryStructures:[],width:400},t}(a.Component);t.InfoPanelContainerClass=d;t.InfoPanelContainer=s.connect(function(e){return{lockedResiduePairs:u.getLocked(e).toJS(),selectedSecondaryStructures:u.selectCurrentItems(e,"secondaryStructure/selected").toArray()}})(d)},"./src/container/NGLContainer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n("./node_modules/immutable/dist/immutable.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/redux/es/redux.js"),f=n("./node_modules/semantic-ui-react/dist/es/index.js"),h=n("./src/action/index.ts"),m=n("./src/action/ResiduePairAction.ts"),y=n("./src/component/index.ts"),g=n("./src/container/index.ts"),v=n("./src/data/index.ts"),b=n("./src/helper/index.ts"),_=n("./src/reducer/index.ts"),C=n("./src/selector/index.ts"),S=function(e){function t(t){var n=e.call(this,t)||this;return n.onExperimentalProteinSelect=function(e,t){var r=t.value.split(" ")[0];n.setState({selectedExperimentalProteins:t.checked?c(n.state.selectedExperimentalProteins,[r]):n.state.selectedExperimentalProteins.filter(function(e){return e!==r})})},n.onPredictedProteinSelect=function(e,t){var r=t.value.split(" ")[0];n.setState({selectedPredictedProteins:t.checked?c(n.state.selectedPredictedProteins,[r]):n.state.selectedPredictedProteins.filter(function(e){return e!==r})})},n.renderPDBTableBody=function(e,t,r,o){return u.createElement(f.Table.Body,null,n.renderPDBTableBodyRows(e,t,r,o))},n.renderPDBTableBodyRows=function(e,t,r,o){var i=n.state,a=i.selectedExperimentalProteins,s=i.selectedPredictedProteins;return e.map(function(e,i){return u.createElement(f.Table.Row,{key:"pdb-radio-"+t+"-"+i},u.createElement(f.Table.Cell,{style:r},u.createElement(f.Popup,{position:"bottom center",pinned:!0,trigger:u.createElement(f.Checkbox,{checked:("experimental"===t?a:s).includes(e.name),onChange:o,value:e.name,label:e.name.split("_").reverse().slice(0,4).reverse().join("_")})},e.name)),n.renderPDBTableSequenceCell(t,r,e),n.renderPDBTableSourceCell(t,r,e),n.renderPDBTableRankCell(t,r,e))})},n.renderPDBTableHeader=function(e,t){return u.createElement(f.Table.Header,null,u.createElement(f.Table.Row,null,u.createElement(f.Table.HeaderCell,{style:t},"Name"),n.renderPDBTableSequenceHeader(e,t),n.renderPDBTableSourceHeader(e,t),n.renderPDBTableRankHeader(e,t)))},n.renderPDBTableRankCell=function(e,t,n){return"predicted"===e&&u.createElement(f.Table.Cell,{style:t},n.rank)},n.renderPDBTableRankHeader=function(e,t){return"predicted"===e&&u.createElement(f.Table.HeaderCell,{style:t},"Rank")},n.renderPDBTableSequenceCell=function(e,t,r){return"experimental"===e&&u.createElement(f.Table.Cell,{style:t},n.props.predictedProteins.length>=1?""+n.sequenceSimilarityPercent(r.sequence,n.props.predictedProteins[0].sequence):"N/A")},n.renderPDBTableSequenceHeader=function(e,t){return"experimental"===e&&u.createElement(f.Table.HeaderCell,{style:t},"Seq. ID")},n.renderPDBTableSourceCell=function(e,t,n){return"experimental"===e&&u.createElement(f.Table.Cell,{style:t},n.source)},n.renderPDBTableSourceHeader=function(e,t){return"experimental"===e&&u.createElement(f.Table.HeaderCell,{style:t},"Source")},n.state={selectedExperimentalProteins:[],selectedPredictedProteins:[]},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.experimentalProteins,n=e.predictedProteins,r=t.length>=1?[t[0].name]:[],o=n.length>=1?[n[0].name]:[];this.setState({selectedExperimentalProteins:r,selectedPredictedProteins:o})},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.experimentalProteins,r=t.predictedProteins,o=this.state,i=o.selectedExperimentalProteins,a=o.selectedPredictedProteins,s=!1;this.isBioblocksPDBArrayEqual(n,e.experimentalProteins)&&(s=!0,i=0===n.length?[]:[n[0].name]),this.isBioblocksPDBArrayEqual(r,e.predictedProteins)&&(s=!0,a=0===r.length?[]:[r[0].name]),s&&this.setState({selectedExperimentalProteins:i,selectedPredictedProteins:a})},t.prototype.setupDataServices=function(){_.createContainerReducer("secondaryStructure/hovered"),_.createContainerReducer("secondaryStructure/selected"),_.createContainerReducer("pdb"),_.createResiduePairReducer()},t.prototype.render=function(){var e=this.props,t=e.experimentalProteins,n=e.lockedResiduePairs,r=e.predictedProteins,o=a(e,["experimentalProteins","lockedResiduePairs","predictedProteins"]),s=this.state,c=s.selectedExperimentalProteins,l=s.selectedPredictedProteins;return u.createElement(d.Provider,{store:_.BBStore},u.createElement(f.Grid,{padded:!0},u.createElement(f.Grid.Row,null,u.createElement(y.NGLComponent,i({experimentalProteins:t.filter(function(e){return c.includes(e.name)}),lockedResiduePairs:n.toJS(),menuItems:[{component:{name:"POPUP",props:{children:this.renderPDBSelector(),disabled:0===t.length&&0===r.length,position:"top center",wide:"very"}},description:"PDB Selector",iconName:"tasks"}],predictedProteins:r.filter(function(e){return l.includes(e.name)})},o)))))},t.prototype.isBioblocksPDBArrayEqual=function(e,t){return e.length!==t.length||e.reduce(function(e,n,r){return e||n.name!==t[r].name},!1)},t.prototype.renderPDBSelector=function(){return u.createElement(f.Grid,{divided:!0,padded:!0},u.createElement(f.Grid.Row,null,u.createElement(f.Grid.Column,null,u.createElement(f.Header,null,"Select Structures to Display"))),u.createElement(f.Grid.Row,{columns:2,style:{padding:"5px 0"}},u.createElement(f.Grid.Column,{width:9},"Experimental ("+this.state.selectedExperimentalProteins.length+"/"+this.props.experimentalProteins.length+")",this.renderPDBTable(this.props.experimentalProteins,"experimental",this.onExperimentalProteinSelect)),u.createElement(f.Grid.Column,{width:7},"Predicted ("+this.state.selectedPredictedProteins.length+"/"+this.props.predictedProteins.length+")",this.renderPDBTable(this.props.predictedProteins,"predicted",this.onPredictedProteinSelect))))},t.prototype.renderPDBTable=function(e,t,n){var r=this.props.maxPDBPerPopup,o={padding:"5px 0"};return u.createElement("div",{style:{height:50*r+"px",overflow:"auto"}},u.createElement(f.Table,{basic:"very",compact:!0,padded:!0},this.renderPDBTableHeader(t,o),this.renderPDBTableBody(e,t,o,n)))},t.prototype.sequenceSimilarityPercent=function(e,t,n){void 0===n&&(n=1);var r=e.split("").reduce(function(e,n,r){return e+(n===t[r]?1:0)},0)/e.length*100;return isNaN(r)?"N/A":r.toFixed(n)+"%"},t.defaultProps={dispatchNglFetch:b.EMPTY_FUNCTION,experimentalProteins:[],isDataLoading:!1,lockedResiduePairs:l.Map(),maxPDBPerPopup:5,measuredProximity:v.CONTACT_DISTANCE_PROXIMITY.C_ALPHA,predictedProteins:[],showConfigurations:!0},t}(g.BioblocksVisualization);t.NGLContainerClass=S;t.NGLContainer=d.connect(function(e){return{candidateResidues:C.getCandidates(e).toArray(),hoveredResidues:C.getHovered(e).toArray(),hoveredSecondaryStructures:C.selectCurrentItems(e,"secondaryStructure/hovered").toArray(),lockedResiduePairs:C.getLocked(e),removeNonLockedResidues:function(){var e=m.createResiduePairActions(),t=e.candidates,n=e.hovered;t.clear(),n.clear()},selectedSecondaryStructures:C.selectCurrentItems(e,"secondaryStructure/selected").toArray()}},function(e){return p.bindActionCreators({addCandidateResidues:m.createResiduePairActions().candidates.addMultiple,addHoveredResidues:m.createResiduePairActions().hovered.set,addLockedResiduePair:m.createResiduePairActions().locked.add,removeAllLockedResiduePairs:m.createResiduePairActions().locked.clear,removeAllSelectedSecondaryStructures:h.createContainerActions("secondaryStructure/selected").clear,removeCandidateResidues:m.createResiduePairActions().candidates.clear,removeHoveredResidues:m.createResiduePairActions().hovered.clear,removeLockedResiduePair:m.createResiduePairActions().locked.remove},e)})(S)},"./src/container/PredictedContactMap.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),l=n("./src/component/index.ts"),u=n("./src/data/index.ts"),d=n("./src/helper/index.ts"),p=n("./src/reducer/index.ts");t.initialPredictedContactMapState={linearDistFilter:5,minimumProbability:.9,minimumScore:0,numPredictionsToShow:-1,pointsToPlot:[],rankFilter:[1,100]};var f=function(e){function n(n){var r=e.call(this,n)||this;return r.state=t.initialPredictedContactMapState,r.onLinearDistFilterChange=function(){return function(e){r.setState({linearDistFilter:e})}},r.onMinimumProbabilityChange=function(){return function(e){r.setState({minimumProbability:e})}},r.onNumPredictionsToShowChange=function(){return function(e){r.setState({numPredictionsToShow:e})}},r.getConfigs=function(){var e,n=r.state,o=n.linearDistFilter,i=n.minimumProbability,a=n.numPredictionsToShow,s=r.props.data.couplingScores.chainLength;return[{marks:(e={},e[Math.floor(s/2)]="L/2",e[Math.floor(s/4)]="L/4",e[0]="0",e[s]="L",e[2*s]="2L",e[3*s]="3L",e),name:"# Couplings to Display",onChange:r.onNumPredictionsToShowChange(),type:u.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:a,defaultValue:Math.floor(s/2),max:3*s,min:0}},{name:"Linear Distance Filter (|i - j|)",onChange:r.onLinearDistFilterChange(),type:u.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:o,defaultValue:t.initialPredictedContactMapState.linearDistFilter,max:10,min:1}},{name:"Minimum Probability",onChange:r.onMinimumProbabilityChange(),step:.01,type:u.CONFIGURATION_COMPONENT_TYPE.SLIDER,values:{current:i,defaultValue:t.initialPredictedContactMapState.minimumProbability,max:1,min:0}}]},r.getPredictedFilters=function(){var e=r.state,t=e.linearDistFilter,n=e.minimumProbability,o=e.minimumScore;return new Array({filterFn:function(e){return!e.probability||e.probability>=n}},{filterFn:function(e){return!e.score||e.score>=o}},{filterFn:function(e){return Math.abs(e.i-e.j)>=t}})},r}return o(n,e),n.prototype.componentDidMount=function(){this.setupData(!0)},n.prototype.componentDidUpdate=function(e,t){var n=this.props.data,r=this.state,o=r.linearDistFilter,i=r.minimumProbability,a=r.minimumScore,s=r.numPredictionsToShow,c=r.rankFilter;(n.couplingScores!==e.data.couplingScores||o!==t.linearDistFilter||i!==t.minimumProbability||a!==t.minimumScore||s!==t.numPredictionsToShow||c!==t.rankFilter)&&this.setupData(n.couplingScores!==e.data.couplingScores)},n.prototype.render=function(){var e=this.props,t=e.data,n=e.style,r=a(e,["data","style"]),o=this.state.pointsToPlot;return s.createElement(c.Provider,{store:p.BBStore},s.createElement("div",{className:"PredictedContactMapComponent",style:n},s.createElement(l.ContactMap,i({configurations:this.getConfigs(),data:{couplingScores:t.couplingScores,pdbData:t.pdbData,secondaryStructures:t.secondaryStructures},formattedPoints:o},r))))},n.prototype.setupData=function(e){var t=this.props,n=t.agreementColor,r=t.data,o=t.allColor,i=this.state,a=i.linearDistFilter,s=i.numPredictionsToShow,c=r.couplingScores,u=c.chainLength,p=new Array;if(c.isDerivedFromCouplingScores){var f=c.getPredictedContacts(s,a,this.getPredictedFilters()),h=(f.correct.length/f.predicted.length*100).toFixed(1);p.push(l.generateChartDataEntry("text",o,"Experimental Contact","(N="+s+", L="+u+")",4,f.predicted,{text:f.predicted.map(d.generateCouplingScoreHoverText)}),l.generateChartDataEntry("text",n,"Inferred Contact Agrees with Experimental Contact","(N="+f.correct.length+", "+h+"%)",6,f.correct,{text:f.correct.map(d.generateCouplingScoreHoverText)}))}this.setState({numPredictionsToShow:e?Math.floor(u/2):s,pointsToPlot:p})},n.defaultProps={agreementColor:"#ff0000",allColor:"#000000",data:{couplingScores:new u.CouplingContainer,secondaryStructures:new Array},filters:[],height:"100%",isDataLoading:!1,width:"100%"},n}(s.Component);t.PredictedContactMap=f},"./src/container/ProteinFeatureViewer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=n("./src/component/index.ts"),u=n("./src/data/index.ts"),d=n("./src/helper/index.ts");t.SAMPLE_PROTEIN_IDS={"3Domains":"Q8TDF5","5Domains":"Q96L73",DLL3_HUMAN:"Q9NYJ7",SMAD4_HUMAN:"Q13485"};var p=function(e){function n(t){var n=e.call(this,t)||this;return n.getPFamFamilyLink=function(e){return'<a href="http://pfam.xfam.org/family/'+e.id+'">PFAM</a>'},n.getPFamDomainLink=function(e){return'<a href="http://mutationaligner.org/domains/'+e.id+'">Mutagen Aligner</a>'},n.getPFamLinks=function(e){return n.getPFamFamilyLink(e[0])+" "+n.getPFamDomainLink(e[0])},n.initializeProteinData=function(e){var t=e.features.filter(function(e){return"DOMAIN"===e.type}),r=new d.ColorMapper,o=t.map(function(e,t){var n=e.begin,o=e.description,i=void 0===o?"":o,a=e.end,s=i.split("-like")[0];return new u.TintedBioblocks1DSection(s,n?Number.parseInt(n,10):-1,a?Number.parseInt(a,10):-1,r.getColorFor(s))});n.setState({domainData:o,protein:e})},n.onProteinInputChange=function(e,t){n.setState({proteinId:t.value})},n.onProteinInputSubmit=function(e,t){return i(n,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.deriveProteinData()];case 1:return e.sent(),[2]}})})},n.onShowGroupedChange=function(e,t){n.setState({showGrouped:void 0!==t.checked?t.checked:n.state.showGrouped})},n.renderAnnotationText=function(e,t){var r=n.state,o=r.domainData,i=r.protein,a=i?i.dbReferences.filter(function(e){return"Pfam"===e.type}).filter(function(n){var r=n.properties,o=r?r["entry name"]:null;return o&&(o===e||o.localeCompare(e+"-like "+t))}):[];return a.length>=1?e+": "+e+" domain ("+o[t].start+" - "+o[t].end+")<br />"+n.getPFamLinks(a):""},n.renderProteinForm=function(e){return s.createElement(c.Form,{onSubmit:n.onProteinInputSubmit},s.createElement(c.Form.Input,{onChange:n.onProteinInputChange,value:e,fluid:!1,width:"three"}),s.createElement(c.Form.Button,null,"Submit Protein ID"),s.createElement(c.Form.Checkbox,{defaultChecked:!0,label:"Show grouped?",onChange:n.onShowGroupedChange}))},n.state={data:[],domainData:[],proteinId:t.initialProteinId,showGrouped:!0},n}return o(n,e),n.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.deriveProteinData()];case 1:return e.sent(),[2]}})})},n.prototype.render=function(){var e=this.state,t=e.domainData,n=e.protein,r=e.proteinId,o=e.showGrouped;return s.createElement("div",{className:"protein-feature-viewer"},s.createElement(c.GridRow,{centered:!0,stretched:!1},s.createElement(c.GridColumn,null,s.createElement(l.FeatureViewer,{data:t,getTextForHover:this.renderAnnotationText,title:n?n.id:"",showGrouped:o})),s.createElement(c.GridColumn,null,this.renderProteinForm(r))))},n.prototype.deriveProteinData=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,fetch("https://www.ebi.ac.uk/proteins/api/proteins/"+this.state.proteinId)];case 1:return(e=r.sent())&&e.ok?[4,e.json()]:[3,3];case 2:t=r.sent(),this.initializeProteinData(t),r.label=3;case 3:return[3,5];case 4:return n=r.sent(),console.error(n),[3,5];case 5:return[2]}})})},n.defaultProps={initialProteinId:t.SAMPLE_PROTEIN_IDS.DLL3_HUMAN},n}(s.Component);t.ProteinFeatureViewer=p},"./src/container/SpringContainer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/immutable/dist/immutable.js"),c=n("./node_modules/react/index.js"),l=n("./node_modules/react-redux/es/index.js"),u=n("./node_modules/redux/es/redux.js"),d=n("./node_modules/react-iframe-comm/dist/IframeComm.js"),p=n("./src/action/index.ts"),f=n("./src/component/index.ts"),h=n("./src/container/index.ts"),m=n("./src/helper/index.ts"),y=n("./src/reducer/index.ts"),g=n("./src/selector/index.ts"),v=function(e){function t(t){var n=e.call(this,t)||this;return n.onReady=function(){},n.onReceiveMessage=function(e){var t=n.props,r=t.currentCells,o=t.setCurrentCategory,i=t.setCurrentCells,a=e.data;switch(a.type){case"selected-category-update":case"selected-cells-update":var s=a.payload,c=s.currentCategory,l=s.indices;o(c||""),i(l);break;case"loaded":n.setState({postMessageData:{payload:{indices:r.toArray()},type:"init"}});break;default:if(e.isTrusted&&1===Object.keys(e).length)return;console.log("Got this msg for ya: "+JSON.stringify(e))}},n.generateSpringURL=function(e){return n.props.springSrc+"?datasets/"+e},n.state={postMessageData:{payload:{},type:"init"},springUrl:n.generateSpringURL(n.props.datasetLocation)},n}return o(t,e),t.prototype.setupDataServices=function(){y.createSpringReducer()},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.datasetLocation,r=t.datasetsURI;(0,t.dispatchSpringFetch)(function(){return i(e,void 0,void 0,function(){return a(this,function(e){return[2,m.fetchSpringData(r+"/"+n)]})})})},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.currentCells,o=n.datasetLocation;if(r!==e.currentCells)this.setState({postMessageData:{payload:{indices:r.toArray()},type:"selected-cells-update"}});else if(e.datasetLocation!==o){var i=this.generateSpringURL(o);this.setState({springUrl:i})}},t.prototype.render=function(){var e=this.props,n=e.headerHeight,r=e.iconSrc,o=e.isFullPage,i=e.springHeight,a=e.springWidth,s=this.state,u=s.postMessageData,p=s.springUrl,h={allowFullScreen:!0,height:i+n,src:p,width:a},m=p.split("/");return c.createElement(l.Provider,{store:y.BBStore},c.createElement(f.ComponentCard,{componentName:t.displayName,iconSrc:r,isFramedComponent:!0,isFullPage:o,frameHeight:i,frameWidth:a},c.createElement(d.default,{attributes:h,postMessageData:u,handleReady:this.onReady,handleReceiveMessage:this.onReceiveMessage,targetOrigin:m[0]+"//"+m[2]})))},t.defaultProps={categories:s.Set(),currentCells:s.Set(),datasetLocation:"hpc/full",datasetsURI:"",dispatchSpringFetch:m.EMPTY_FUNCTION,headerHeight:18,isFullPage:!1,padding:0,selectedCategory:"",setCurrentCategory:m.EMPTY_FUNCTION,setCurrentCells:m.EMPTY_FUNCTION,springGraphData:{links:new Array,nodes:new Array},springHeight:1150,springSrc:window.location.origin+"/"+window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/"))+"/springViewer.html",springWidth:1150},t.displayName="SPRING",t}(h.BioblocksVisualization);t.SpringContainerClass=v;t.SpringContainer=l.connect(function(e){return{categories:g.getCategories(e,void 0),currentCells:g.selectCurrentItems(e,"cells"),springGraphData:g.getGraphData(e)}},function(e){return u.bindActionCreators({dispatchSpringFetch:p.fetchSpringGraphData,setCurrentCategory:p.createSpringActions().category.set,setCurrentCells:p.createContainerActions("cells").set},e)})(v)},"./src/container/TensorTContainer.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/@tensorflow/tfjs-core/dist/tf-core.esm.js"),c=n("./node_modules/@tensorflow/tfjs-tsne/dist/tsne.js"),l=n("./node_modules/immutable/dist/immutable.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/redux/es/redux.js"),f=n("./node_modules/semantic-ui-react/dist/es/index.js"),h=n("./src/action/index.ts"),m=n("./src/component/index.ts"),y=n("./src/container/index.ts"),g=n("./src/data/index.ts"),v=n("./src/helper/index.ts"),b=n("./src/reducer/index.ts"),_=n("./src/selector/ContainerSelectors.ts"),C=function(e){function t(t){var n=e.call(this,t)||this;return n.canvasContext=null,n.getPlotlyCoordsFromTsne=function(e){var t=n.props,r=t.currentCells;return[{marker:{color:t.pointColor},mode:"markers",type:"scattergl",x:e.map(function(e){return e[0]}),y:e.map(function(e){return e[1]})},{marker:{color:"#ffaa00"},mode:"markers",type:"scattergl",x:r.toArray().map(function(t){return e[t][0]}),y:r.toArray().map(function(t){return e[t][1]})}]},n.getPlotlyCoordsFromSpring=function(e,t){return[{marker:{color:n.props.pointColor},mode:"markers",type:"scattergl",x:e.map(function(e){return e[0]}),y:e.map(function(e){return e[1]})},{marker:{color:"#ffaa00"},mode:"markers",type:"scattergl",x:t.map(function(t){return e[t][0]}),y:t.map(function(t){return e[t][1]})}]},n.getTensorConfigs=function(){return[{name:"Iterate Once",onClick:n.onIterateForward(),type:g.CONFIGURATION_COMPONENT_TYPE.BUTTON},{name:"Iterate Ten Times",onClick:n.onIterateForward(10),type:g.CONFIGURATION_COMPONENT_TYPE.BUTTON},{name:"Iterate Fifty Times",onClick:n.onIterateForward(50),type:g.CONFIGURATION_COMPONENT_TYPE.BUTTON},{name:"Reset",onClick:n.onReset(),type:g.CONFIGURATION_COMPONENT_TYPE.BUTTON},{icon:"hashtag",name:"Total Iterations: "+n.state.numIterations,type:g.CONFIGURATION_COMPONENT_TYPE.LABEL}]},n.handlePointSelection=function(e){for(var t=n.props.setCurrentCells,r=n.state.coordsArray,o=new Array,i=function(t){var n=e.selectedPoints[t],i=e.selectedPoints[t+1],a=r.findIndex(function(e){return e[0]===n&&e[1]===i});a>=0&&o.push(a)},a=0;a<e.selectedPoints.length-1;a+=2)i(a);t(o)},n.renderIterateLabel=function(){return u.createElement("label",null,"iterations: "+n.state.numIterations)},n.renderIterateButton=function(){return u.createElement(f.Radio,{label:u.createElement("label",{style:{fontSize:"14px",fontWeight:"bold"}},"iterate"),onClick:n.onIterationToggle(),toggle:!0})},n.renderResetButton=function(){return u.createElement(f.Icon,{name:"undo",onClick:n.onReset()})},n.onIterateForward=function(e){return void 0===e&&(e=1),function(){return i(n,void 0,void 0,function(){var t,n,r,o,i;return a(this,function(a){switch(a.label){case 0:return t=this.state,n=t.isComputing,!(r=t.tsne)||n?[3,3]:(this.setState({isComputing:!0}),[4,r.iterate(e)]);case 1:return a.sent(),[4,r.coordsArray()];case 2:o=a.sent(),i=this.getPlotlyCoordsFromTsne(o),this.setState({coordsArray:o,isComputing:!1,numIterations:this.state.numIterations+e,plotlyCoords:i}),a.label=3;case 3:return[2]}})})}},n.onIterationToggle=function(){return function(){var e=!n.state.isAnimating;if(e){var t=function(){return i(n,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.onIterateForward(1)()];case 1:return e.sent(),this.state.isAnimating&&this.state.numIterations<500?requestAnimationFrame(t):this.setState({isAnimating:!1}),[2]}})})};requestAnimationFrame(t)}n.setState({isAnimating:e})}},n.onReset=function(){return function(){return i(n,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.computeTensorTsne(0)];case 1:return e.sent(),[2]}})})}},n.renderPlaybackControls=function(){return u.createElement(f.Grid.Row,{columns:"equal",style:{maxHeight:"42px",padding:"14px 0 0 0"}},u.createElement(f.Grid.Column,{floated:"left"},n.renderIterateButton()),u.createElement(f.Grid.Column,null,n.renderIterateLabel()),u.createElement(f.Grid.Column,{floated:"right"},n.renderResetButton()))},n.state={coordsArray:[],isAnimating:!1,isComputing:!1,numIterations:0,plotlyCoords:[]},n}return o(t,e),t.prototype.setupDataServices=function(){this.registerDataset("cells",[])},t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t,r,o;return a(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,v.fetchTensorTSneCoordinateData(this.props.datasetLocation)];case 1:return e=i.sent(),t=s.tensor(e),[4,Promise.resolve().then(function(){return n("./node_modules/@tensorflow/tfjs-tsne/dist-es6/index.js")})];case 2:return r=i.sent().tsne(t),this.setState({tsne:r}),[4,this.computeTensorTsne(this.state.numIterations)];case 3:return i.sent(),[3,5];case 4:return o=i.sent(),console.log(o),[3,5];case 5:return[2]}})})},t.prototype.componentDidUpdate=function(e){return i(this,void 0,void 0,function(){var t,n,r,o,i,s,c;return a(this,function(a){switch(a.label){case 0:return t=this.props,n=t.currentCells,r=t.datasetLocation,o=this.state.tsne,r===e.datasetLocation?[3,2]:[4,this.setupTensorData()];case 1:return a.sent(),[3,4];case 2:return o?n===e.currentCells?[3,4]:(i=this.setState,s={},c=this.getPlotlyCoordsFromTsne,[4,o.coordsArray()]):[3,4];case 3:i.apply(this,[(s.plotlyCoords=c.apply(this,[a.sent()]),s)]),a.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.props,n=e.iconSrc,r=e.isFullPage,o=this.state.plotlyCoords;return u.createElement(d.Provider,{store:b.BBStore},u.createElement(m.ComponentCard,{componentName:t.displayName,iconSrc:n,isFullPage:r},u.createElement(f.Grid,{centered:!0,style:{height:"100%",marginLeft:0,width:"100%"}},this.renderPlaybackControls(),u.createElement(f.Grid.Row,{style:{height:"100%",margin:0}},u.createElement(m.TensorTComponent,{onSelectedCallback:this.handlePointSelection,pointsToPlot:o})))))},t.prototype.computeTensorTsne=function(e){return i(this,void 0,void 0,function(){var t,n,r,o,i;return a(this,function(a){switch(a.label){case 0:return t=this.state,n=t.isComputing,!(r=t.tsne)||n?[3,3]:(this.setState({isComputing:!0}),[4,r.compute(e)]);case 1:return a.sent(),[4,r.coordsArray()];case 2:o=a.sent(),i=this.getPlotlyCoordsFromTsne(o),this.setState({coordsArray:o,isComputing:!1,numIterations:e,plotlyCoords:i}),a.label=3;case 3:return[2]}})})},t.prototype.setupTensorData=function(){return i(this,void 0,void 0,function(){var e,t,n,r,o,i,l;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),this.setState({isAnimating:!1,isComputing:!0,plotlyCoords:[],tsne:void 0}),[4,v.fetchTensorTSneCoordinateData(this.props.datasetLocation)];case 1:return e=a.sent(),t=s.tensor(e),n=new c.TSNE(t),r=0,[4,n.compute(r)];case 2:return a.sent(),[4,n.coordsArray()];case 3:return o=a.sent(),i=this.getPlotlyCoordsFromTsne(o),this.setState({coordsArray:o,isComputing:!1,numIterations:r,plotlyCoords:i}),[3,5];case 4:return l=a.sent(),console.log(l),[3,5];case 5:return[2]}})})},t.defaultProps={currentCells:l.Set(),datasetLocation:"hpc/full",height:400,isFullPage:!1,pointColor:"#aa0000",setCurrentCells:v.EMPTY_FUNCTION,style:{padding:0},width:400},t.displayName="tSNE - TensorFlow",t}(y.BioblocksVisualization);t.TensorTContainerClass=C;t.TensorTContainer=d.connect(function(e){return{currentCells:_.selectCurrentItems(e,"cells")}},function(e){return p.bindActionCreators({setCurrentCells:h.createContainerActions("cells").set},e)})(C)},"./src/container/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/container/BioblocksVisualization.tsx")),r(n("./src/container/AnatomogramContainer.tsx")),r(n("./src/container/InfoPanelContainer.tsx")),r(n("./src/container/NGLContainer.tsx")),r(n("./src/container/PredictedContactMap.tsx")),r(n("./src/container/ProteinFeatureViewer.tsx")),r(n("./src/container/SpringContainer.tsx")),r(n("./src/container/TensorTContainer.tsx"))},"./src/data/AminoAcid.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/lodash/lodash.js"),o=function(){function e(e,t,n,r){this.fullName=e,this.singleLetterCode=t,this.threeLetterCode=n,this.codons=r}return e.getAllCanonicalAminoAcids=function(){return Object.keys(e).reduce(function(t,n){var r=e[n];return r instanceof e&&t.push(r),t},new Array)},e.fromSingleLetterCode=function(t){return e.getAllCanonicalAminoAcids().find(function(e){return e.singleLetterCode.toUpperCase()===t.toUpperCase()})},e.fromThreeLetterCode=function(t){e.getAllCanonicalAminoAcids().forEach(function(e){if(e.threeLetterCode.toUpperCase()===t.toUpperCase())return e})},e.fromCodon=function(t){e.getAllCanonicalAminoAcids().forEach(function(e){e.codons.forEach(function(n){if(n.toUpperCase()===t.toUpperCase())return e})})},e.Alanine=new e("Alanine","A","ALA",["GCT","GCC","GCA","GCG"]),e.Arginine=new e("Arginine","R","ARG",["CGT","CGC","CGA","CGG","AGA","AGG"]),e.Asparagine=new e("Asparagine","N","ASN",["AAT","AAC"]),e.AsparticAcid=new e("Aspartic Acid","D","ASP",["GAT","GAC"]),e.Cysteine=new e("Cysteine","C","CYS",["TGT","TGC"]),e.Glutamine=new e("Glutamine","Q","GLN",["CAA","CAG"]),e.GlutamicAcid=new e("Glutamic Acid","E","GLU",["GAA","GAG"]),e.Glycine=new e("Glycine","G","GLY",["GGT","GGC","GGA","GGG"]),e.Histidine=new e("Histidine","H","HIS",["CAT","CAC"]),e.Isoleucine=new e("Isoleucine","I","ILE",["ATT","ATC","ATA"]),e.Leucine=new e("Leucine","L","LEU",["TTA","TTG","CTT","CTC","CTA","CTG"]),e.Lysine=new e("Lysine","K","LYS",["AAA","AAG"]),e.Methionine=new e("Methionine","M","MET",["ATG"]),e.Phenylalanine=new e("Phenylalanine","F","PHE",["TTT","TTC"]),e.Proline=new e("Proline","P","PRO",["CCT","CCC","CCA","CCG"]),e.Serine=new e("Serine","S","SER",["TCT","TCC","TCA","TCG","AGT","AGC"]),e.Threonine=new e("Threonine","T","THR",["ACT","ACC","ACA","ACG"]),e.Tryptophan=new e("Tryptophan","W","TRP",["TGG"]),e.Tyrosine=new e("Tyrosine","Y","TYR",["TAT","TAC"]),e.Valine=new e("Valine","V","VAL",["GTT","GTC","GTA","GTG"]),e.ALL_FULL_NAMES=function(){return e.getAllCanonicalAminoAcids().map(function(e){return e.fullName})},e.ALL_1LETTER_CODES=function(){return e.getAllCanonicalAminoAcids().map(function(e){return e.singleLetterCode})},e.ALL_3LETTER_CODES=function(){return e.getAllCanonicalAminoAcids().map(function(e){return e.threeLetterCode})},e.ALL_CODONS=function(){return r.flatten(e.getAllCanonicalAminoAcids().map(function(e){return e.codons}))},e}();t.AminoAcid=o,t.getPDBAndCouplingMismatch=function(e,n){var r=e.sequence,o=n.sequence,i=t.getSequenceMismatch(r,o);return 0===i.length?e.getResidueNumberingMismatches(n):i},t.getSequenceMismatch=function(e,t){var n=new Array;if(e.length===t.length)for(var r=0;r<e.length;++r){var i=o.fromSingleLetterCode(e[r]),a=o.fromSingleLetterCode(t[r]);e[r]!==t[r]&&i&&a&&n.push({couplingAminoAcid:i,pdbAminoAcid:a,resno:r})}return n}},"./src/data/AnatomogramMapping.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnatomogramMapping={homo_sapiens:{P11A:["UBERON_0000178"],P11B:["UBERON_0001155"],P12A:["UBERON_0000955"],P9A:["UBERON_0000977"],UBERON_0000178:["P11A"],UBERON_0000955:["P12A"],UBERON_0000977:["P9A"],UBERON_0001155:["P11B"]},mus_musculus:{UBERON_0000948:["Heart","Heart_and_Aorta","Heart_and_Aorta-10X_P7_4"],UBERON_0001255:["Bladder","Bladder-10X_P4_3","Bladder-10X_P4_4","Bladder-10X_P7_7"],UBERON_0001723:["Tongue","Tongue-10X_P4_0","Tongue-10X_P4_1","Tongue-10X_P7_10"],UBERON_0001911:["Mammary","Mammary_Gland","Mammary_Gland-10X_P7_12","Mammary_Gland-10X_P7_13"],UBERON_0002048:["Lung","Lung-10X_P7_8","Lung-10X_P7_9","Lung-10X_P8_12","Lung-10X_P8_13"],UBERON_0002106:["Spleen","Spleen-10X_P4_7","Spleen-10X_P7_6"],UBERON_0002107:["Liver","Liver-10X_P4_2","Liver-10X_P7_0","Liver-10X_P7_1"],UBERON_0002113:["Kidney","Kidney-10X_P4_5","Kidney-10X_P4_6","Kidney-10X_P7_5"],UBERON_0002370:["Thymus","Thymus-10X_P7_11"],UBERON_0002371:["Marrow","Marrow-10X_P7_2","Marrow-10X_P7_3"],UBERON_0003126:["Trachea","Trachea-10X_P8_14","Trachea-10X_P8_15"],UBERON_0014892:["Muscle","Limb","Limb_Muscle","Limb_Muscle-10X_P7_14","Limb_Muscle-10X_P7_15"]}}},"./src/data/Bioblocks1DSection.ts":function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,n){void 0===n&&(n=t),this.label=e,this.sectionEnd=0,this.sectionStart=0,this.sectionEnd=Math.max(n,t),this.sectionStart=Math.min(t,n)}return Object.defineProperty(e.prototype,"end",{get:function(){return this.sectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.sectionEnd-this.sectionStart+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.sectionStart},enumerable:!0,configurable:!0}),e.prototype.contains=function(){for(var e,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{for(var i=r(n),a=i.next();!a.done;a=i.next()){var s=a.value;if(s<this.sectionStart||s>this.sectionEnd||void 0===s)return!1}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!0},e.prototype.isEqual=function(e){return e.end===this.end&&e.label===this.label&&e.start===this.start},e.prototype.updateStart=function(e){e>this.sectionEnd?(this.sectionStart=this.sectionEnd,this.sectionEnd=e):this.sectionStart=e},e.prototype.updateEnd=function(e){e<this.sectionStart?(this.sectionEnd=this.sectionStart,this.sectionStart=e):this.sectionEnd=e},e}();t.Bioblocks1DSection=o},"./src/data/BioblocksConfig.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.LABEL="LABEL",e.CHECKBOX="CHECKBOX",e.RADIO="RADIO",e.RANGE_SLIDER="RANGE_SLIDER",e.SLIDER="SLIDER"}(t.CONFIGURATION_COMPONENT_TYPE||(t.CONFIGURATION_COMPONENT_TYPE={}))},"./src/data/BioblocksData.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CONTACT_MAP="Contact Map",e.INFO_PANEL="Info Panel",e.NGL="NGL",e.SPRING="Spring",e["TENSOR-T-SNE"]="TENSOR-T-SNE",e["T-SNE"]="T-SNE",e.UMAP_SEQUENCE="UMAP Sequence",e.UMAP_TRANSCRIPTION="UMAP Transcription"}(t.VIZ_TYPE||(t.VIZ_TYPE={})),function(e){e.cn="cn",e.dist="dist",e.dist_intra="dist_intra",e.dist_multimer="dist_multimer",e.fn="fn",e.probability="probability",e.precision="precision",e.score="score"}(t.COUPLING_SCORE_SOURCE||(t.COUPLING_SCORE_SOURCE={})),function(e){e.CLOSEST="CLOSEST ATOM",e.C_ALPHA="C-α"}(t.CONTACT_DISTANCE_PROXIMITY||(t.CONTACT_DISTANCE_PROXIMITY={})),function(e){e.G="310_HELIX",e.H="ALPHA_HELIX",e.I="PI_HELIX",e.T="HYDROGEN_BONDED_TURN",e.E="BETA_SHEET",e.B="BETA_BRIDGE",e.S="BEND",e.C="COIL"}(t.SECONDARY_STRUCTURE_CODES||(t.SECONDARY_STRUCTURE_CODES={})),function(e){e[e.AFTER_PLOT=0]="AFTER_PLOT",e[e.CLICK=1]="CLICK",e[e.DOUBLE_CLICK=2]="DOUBLE_CLICK",e[e.HOVER=3]="HOVER",e[e.RELAYOUT=4]="RELAYOUT",e[e.SELECTION=5]="SELECTION",e[e.UNHOVER=6]="UNHOVER"}(t.BIOBLOCKS_CHART_EVENT_TYPE||(t.BIOBLOCKS_CHART_EVENT_TYPE={})),function(e){e[e.AXIS=0]="AXIS",e[e.POINT=1]="POINT"}(t.BIOBLOCKS_CHART_PIECE||(t.BIOBLOCKS_CHART_PIECE={}))},"./src/data/BioblocksPDB.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/ngl/dist/ngl.esm.js"),a=n("./src/data/index.ts"),s=function(){function e(){this.fileName="",this.nglData=new i.Structure,this.getSecStructFromNGLResidue=function(e,t){for(var n=e.chainIndex;!t[n];)t.push(new Array);var r="C";e.isSheet()?r="E":e.isHelix()&&(r="H"),t[n].length>=1&&t[n][t[n].length-1].label===r?t[n][t[n].length-1].updateEnd(e.resno):t[n].push(new a.Bioblocks1DSection(r,e.resno))}}return Object.defineProperty(e.prototype,"contactInformation",{get:function(){var e=this;if(!this.contactInfo){var t=new a.CouplingContainer;this.nglData.eachResidue(function(n){if(n.isProtein()){var r=n.resno;e.nglData.eachResidue(function(n){var o=n.resno;n.isProtein()&&r!==o&&t.addCouplingScore({dist:e.getMinDistBetweenResidues(r,o).dist,i:r,j:o})})}}),this.contactInfo=t}return this.contactInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){var e=this.fileName.split("/"),t=e[e.length-1],n=t.lastIndexOf(".");return t.slice(0,-1===n?void 0:n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nglStructure",{get:function(){return this.nglData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rank",{get:function(){return"UNK"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryStructure",{get:function(){var e=new Array;return this.nglData.eachResidue(function(t){if(t.isProtein()){var n="C";if(t.isSheet())n="E";else if(t.isHelix())n="H";else if(t.isTurn())return;e.push({resno:t.resno,structId:n})}}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryStructureSections",{get:function(){var e=this,t=new Array;return this.nglData.eachResidue(function(n){n.isProtein()&&e.getSecStructFromNGLResidue(n,t)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sequence",{get:function(){return this.nglData?this.nglData.getSequence().join(""):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return"UKN"},enumerable:!0,configurable:!0}),e.createEmptyPDB=function(){return new e},e.createPDB=function(t){return void 0===t&&(t=""),r(this,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return n=new e,r=n,[4,i.autoLoad(t)];case 1:return r.nglData=o.sent(),n.fileName="string"==typeof t?t:t.name,[2,n]}})})},e.createPDBFromNGLData=function(t){var n=new e;return n.nglData=t,n.fileName=t.path?t.path:t.name,n},e.prototype.eachResidue=function(e){this.nglData.eachResidue(e)},e.prototype.amendPDBWithCouplingScores=function(t,n){var r=this,o=new a.CouplingContainer(t),i=this.nglData.atomMap.dict[e.NGL_C_ALPHA_INDEX],s={};return this.nglData.eachResidue(function(e){r.nglData.eachResidue(function(t){if(e.isProtein()&&t.isProtein())if(n===a.CONTACT_DISTANCE_PROXIMITY.C_ALPHA){var c=r.getCAlphaAtomIndexFromResidue(e.index,i),l=r.getCAlphaAtomIndexFromResidue(t.index,i),u=r.nglData.getAtomProxy(c).distanceTo(r.nglData.getAtomProxy(l));0!==u&&o.addCouplingScore({dist:u,i:e.resno,j:t.resno})}else{var d=Math.min(e.resno,t.resno)+","+Math.max(e.resno,t.resno);s[d]||(s[d]=r.getMinDistBetweenResidueIndices(e.index,t.index).dist),0!==s[d]&&o.addCouplingScore({dist:s[d],i:e.resno,j:t.resno})}})}),this.contactInfo=o,this.contactInfo},e.prototype.getCAlphaAtomIndexFromResidue=function(e,t){for(var n=this.nglData.residueStore,r=n.atomOffset[e],o=n.atomCount[e],i=r;n.residueTypeId[i]!==t&&i<r+o;)i++;return i},e.prototype.getMinDistBetweenResidues=function(e,t){return this.getMinDistBetweenResidueIndices(this.nglData.residueStore.resno.indexOf(e),this.nglData.residueStore.resno.indexOf(t))},e.prototype.getResidueNumberingMismatches=function(e){var t=new Array;return this.eachResidue(function(n){var r=n.resname.toUpperCase(),o=e.getAminoAcidOfContact(n.resno);if(o&&a.AminoAcid.fromSingleLetterCode(r)!==a.AminoAcid.fromSingleLetterCode(o.singleLetterCode)){var i=a.AminoAcid.fromSingleLetterCode(o.singleLetterCode),s=a.AminoAcid.fromSingleLetterCode(r);i&&s&&t.push({couplingAminoAcid:i,pdbAminoAcid:s,resno:n.resno})}}),t},e.prototype.getTrimmedName=function(e,t,n){void 0===e&&(e="_"),void 0===t&&(t=3),void 0===n&&(n="back");var r=this.name.split(e);return r.length>t?("back"===n?r.slice(0,r.length-t):r.slice(t)).join(e):this.name},e.prototype.getMinDistBetweenResidueIndices=function(e,t){for(var n=this.nglData.residueStore,r=n.atomCount[e],o=n.atomCount[t],i=n.atomOffset[e],a=n.atomOffset[t],s={atomIndexI:-1,atomIndexJ:-1,dist:Number.MAX_SAFE_INTEGER},c=0;c<r;++c)for(var l=0;l<o;++l){var u=i+c,d=a+l,p=this.nglData.getAtomProxy(u).distanceTo(this.nglData.getAtomProxy(d));p<s.dist&&(s={atomIndexI:u,atomIndexJ:d,dist:p})}return s},e.NGL_C_ALPHA_INDEX="CA|C",e}();t.BioblocksPDB=s},"./src/data/CodonTable.ts":function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,n,r,o,i){this.id=e,this.name=t,this.altName=n,this.table=r,this.startCodons=o,this.stopCodons=i}return e.rnaTableFromDNACodonTable=function(t,n,o,i){return new e(t,n,o,Object.entries(i.table).reduce(function(e,t){var n=r(t,2),o=n[0],i=n[1];return e[o.replace(/T/g,"U").replace(/t/g,"u")]=i,e},{}),i.startCodons.map(function(e){return e.replace(/T/g,"U").replace(/t/g,"u")}),i.stopCodons.map(function(e){return e.replace(/T/g,"U").replace(/t/g,"u")}))},e}();t.CodonTable=o,t.standardDnaCodonTable=new o(1,"standard","SGC0",{AAA:"K",AAC:"N",AAG:"K",AAT:"N",ACA:"T",ACC:"T",ACG:"T",ACT:"T",AGA:"R",AGC:"S",AGG:"R",AGT:"S",ATA:"I",ATC:"I",ATG:"M",ATT:"I",CAA:"Q",CAC:"H",CAG:"Q",CAT:"H",CCA:"P",CCC:"P",CCG:"P",CCT:"P",CGA:"R",CGC:"R",CGG:"R",CGT:"R",CTA:"L",CTC:"L",CTG:"L",CTT:"L",GAA:"E",GAC:"D",GAG:"E",GAT:"D",GCA:"A",GCC:"A",GCG:"A",GCT:"A",GGA:"G",GGC:"G",GGG:"G",GGT:"G",GTA:"V",GTC:"V",GTG:"V",GTT:"V",TAC:"Y",TAT:"Y",TCA:"S",TCC:"S",TCG:"S",TCT:"S",TGC:"C",TGG:"W",TGT:"C",TTA:"L",TTC:"F",TTG:"L",TTT:"F"},["TAA","TAG","TGA"],["TTG","CTG","ATG"]),t.standardRnaCodonTable=o.rnaTableFromDNACodonTable(2,"standard","SGC0",t.standardDnaCodonTable)},"./src/data/CouplingContainer.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./src/data/index.ts"),a=function(){function e(e,t){var n,r,a=this;void 0===e&&(e=[]),void 0===t&&(t=i.COUPLING_SCORE_SOURCE.cn),this.scoreSource=t,this.contacts=new Array,this.indexRange={max:1,min:1},this.totalStoredContacts=0,this.derivedFromCouplingScoresFlag=!0,this.rowCounter=0,this.colCounter=0,this.getCouplingScore=function(e,t){var n=a.contacts[Math.min(e,t)-1];return n?n[Math.max(e,t)-1]:void 0},this.includes=function(e,t){return a.contacts[Math.min(e,t)-1]&&void 0!==a.contacts[Math.min(e,t)-1][Math.max(e,t)-1]};try{for(var s=o(e),c=s.next();!c.done;c=s.next()){var l=c.value;this.addCouplingScore(l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}return e.getScore=function(e,t){switch(t){case"cn":return e.cn;case"dist":return e.dist;case"dist_intra":return e.dist_intra;case"dist_multimer":return e.dist_multimer;case"fn":return e.fn;case"probability":return e.probability;case"precision":return e.precision;case"score":return e.score;default:console.log("Unknown score source "+t)}},Object.defineProperty(e.prototype,"isDerivedFromCouplingScores",{get:function(){return this.derivedFromCouplingScoresFlag},set:function(e){this.derivedFromCouplingScoresFlag=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allContacts",{get:function(){return this.contacts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chainLength",{get:function(){return this.indexRange.max-this.indexRange.min+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rankedContacts",{get:function(){var t=this;return Array.from(this).sort(function(n,r){var o=e.getScore(n,t.scoreSource),i=e.getScore(r,t.scoreSource);return o&&i?i-o:o&&!i?-1:!o&&i?1:0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"residueIndexRange",{get:function(){return this.indexRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sequence",{get:function(){for(var e="",t=this.indexRange.min;t<=this.indexRange.max;++t){var n=this.getAminoAcidOfContact(t);n&&(e+=n.singleLetterCode)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalContacts",{get:function(){return this.totalStoredContacts},enumerable:!0,configurable:!0}),e.prototype[Symbol.iterator]=function(){return this},e.prototype.addCouplingScore=function(e){var t=e.A_i,n=e.A_j,o=e.i,i=e.j,a=Math.min(o,i)-1,s=Math.max(o,i)-1,c=a+1===i;this.contacts[a]||(this.contacts[a]=new Array),this.contacts[a][s]||this.totalStoredContacts++,this.contacts[a][s]=r({},this.contacts[a][s],e),c&&(this.contacts[a][s].i=i,this.contacts[a][s].j=o,t&&n&&(this.contacts[a][s].A_i=n,this.contacts[a][s].A_j=t)),this.indexRange={max:Math.max(this.indexRange.max,s+1),min:Math.min(this.indexRange.min,a+1)}},e.prototype.getAminoAcidOfContact=function(e){var t,n,r,a;if(!(e>this.chainLength+1))try{for(var s=o(this.allContacts),c=s.next();!c.done;c=s.next()){var l=c.value;if(l)try{for(var u=(r=void 0,o(l)),d=u.next();!d.done;d=u.next()){var p=d.value;if(p&&p.i===e&&p.A_i)return i.AminoAcid.fromSingleLetterCode(p.A_i);if(p&&p.j===e&&p.A_j)return i.AminoAcid.fromSingleLetterCode(p.A_j)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},e.prototype.getObservedContacts=function(e){var t,n;void 0===e&&(e=10);var r=new Array;try{for(var i=o(this),a=i.next();!a.done;a=i.next()){var s=a.value;s.dist&&s.dist<=e&&r.push(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.getPredictedContacts=function(e,t,n){var r,i;void 0===t&&(t=5),void 0===n&&(n=[]);var a={correct:new Array,predicted:new Array};try{for(var s=o(this.rankedContacts.filter(function(e){return n.reduce(function(t,n){return t&&n.filterFn(e)},!0)}).slice(0,e)),c=s.next();!c.done;c=s.next()){var l=c.value;l.dist&&l.dist<t&&a.correct.push(l),a.predicted.push(l)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},e.prototype.next=function(){for(var e=this.rowCounter;e<this.contacts.length;++e)if(this.contacts[e]){for(var t=this.colCounter;t<this.contacts[e].length;++t){var n=this.contacts[e][t];if(n)return this.rowCounter=e,this.colCounter=t+1,{done:!1,value:n}}this.colCounter=0}return this.rowCounter=0,this.colCounter=0,{done:!0,value:null}},e.prototype.updateContact=function(e,t,n){this.addCouplingScore(r({i:e,j:t},n))},e}();t.CouplingContainer=a},"./src/data/Dataset.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t="bioblocks"),this.name=e,this.namespace=t}return Object.defineProperty(e.prototype,"fullName",{get:function(){return this.namespace+"/"+this.name},enumerable:!0,configurable:!0}),e}();t.Dataset=r},"./src/data/IUPACData.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.proteinLetters="ACDEFGHIKLMNPQRSTVWY",t.extendedProteinLetters="ACDEFGHIKLMNPQRSTVWYBXZJUO",t.proteinLetters1to3={A:"Ala",C:"Cys",D:"Asp",E:"Glu",F:"Phe",G:"Gly",H:"His",I:"Ile",K:"Lys",L:"Leu",M:"Met",N:"Asn",P:"Pro",Q:"Gln",R:"Arg",S:"Ser",T:"Thr",V:"Val",W:"Trp",Y:"Tyr"},t.proteinLetters1to3Extended=r({},t.proteinLetters1to3,{B:"Asx",J:"Xle",O:"Pyl",U:"Sec",X:"Xaa",Z:"Glx"}),t.proteinLetters3to1=Object.assign.apply(Object,i([{}],Object.entries(t.proteinLetters1to3).map(function(e){var t,n=o(e,2),r=n[0];return(t={})[n[1]]=r,t}))),t.proteinLetters3to1Extended=Object.assign.apply(Object,i([{}],Object.entries(t.proteinLetters1to3Extended).map(function(e){var t,n=o(e,2),r=n[0];return(t={})[n[1]]=r,t}))),t.ambiguousDnaLetters="GATCRYWSMKHBVDN",t.unambiguousDnaLetters="GATC",t.ambiguousRnaLetters="GAUCRYWSMKHBVDN",t.unambiguousRnaLetters="GAUC",t.extendedDnaLetters="GATCBDSW",t.ambiguousDnaValues={A:"A",B:"CGT",C:"C",D:"AGT",G:"G",H:"ACT",K:"GT",M:"AC",N:"GATC",R:"AG",S:"CG",T:"T",V:"ACG",W:"AT",X:"GATC",Y:"CT"},t.ambiguousRnaValues={A:"A",B:"CGU",C:"C",D:"AGU",G:"G",H:"ACU",K:"GU",M:"AC",N:"GAUC",R:"AG",S:"CG",U:"U",V:"ACG",W:"AU",X:"GAUC",Y:"CU"},t.ambiguousDnaComplement={A:"T",B:"V",C:"G",D:"H",G:"C",H:"D",K:"M",M:"K",N:"N",R:"Y",S:"S",T:"A",V:"B",W:"W",X:"X",Y:"R"},t.ambiguousRnaComplement={A:"U",B:"V",C:"G",D:"H",G:"C",H:"D",K:"M",M:"K",N:"N",R:"Y",S:"S",U:"A",V:"B",W:"W",X:"X",Y:"R"},t.unambiguousDnaWeights={A:331.2218,C:307.1971,G:347.2212,T:322.2085},t.monoisotopicUnambiguousDnaWeights={A:331.06817,C:307.056936,G:347.063084,T:322.056602},t.unambiguousRnaWeights={A:347.2212,C:323.1965,G:363.2206,U:324.1813},t.monoisotopicUnambiguousRnaWeights={A:347.063084,C:323.051851,G:363.057999,U:324.035867},t.proteinWeights={A:89.0932,C:121.1582,D:133.1027,E:147.1293,F:165.1891,G:75.0666,H:155.1546,I:131.1729,K:146.1876,L:131.1729,M:149.2113,N:132.1179,O:255.3134,P:115.1305,Q:146.1445,R:174.201,S:105.0926,T:119.1192,U:168.0532,V:117.1463,W:204.2252,Y:181.1885},t.monoisotopicProteinWeights={A:89.047678,C:121.019749,D:133.037508,E:147.053158,F:165.078979,G:75.032028,H:155.069477,I:131.094629,K:146.105528,L:131.094629,M:149.051049,N:132.053492,O:255.158292,P:115.063329,Q:146.069142,R:174.111676,S:105.042593,T:119.058243,U:168.964203,V:117.078979,W:204.089878,Y:181.073893},t.extendedProteinValues={A:"A",B:"ND",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"IL",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"ACDEFGHIKLMNPQRSTVWY",Y:"Y",Z:"QE"},t.atomWeights={H:1.00794,D:2.0141,He:4.002602,Li:6.941,Be:9.012182,B:10.811,C:12.0107,N:14.0067,O:15.9994,F:18.9984032,Ne:20.1797,Na:22.98977,Mg:24.305,Al:26.981538,Si:28.0855,P:30.973761,S:32.065,Cl:35.453,Ar:39.948,K:39.0983,Ca:40.078,Sc:44.95591,Ti:47.867,V:50.9415,Cr:51.9961,Mn:54.938049,Fe:55.845,Co:58.9332,Ni:58.6934,Cu:63.546,Zn:65.39,Ga:69.723,Ge:72.64,As:74.9216,Se:78.96,Br:79.904,Kr:83.8,Rb:85.4678,Sr:87.62,Y:88.90585,Zr:91.224,Nb:92.90638,Mo:95.94,Tc:98,Ru:101.07,Rh:102.9055,Pd:106.42,Ag:107.8682,Cd:112.411,In:114.818,Sn:118.71,Sb:121.76,Te:127.6,I:126.90447,Xe:131.293,Cs:132.90545,Ba:137.327,La:138.9055,Ce:140.116,Pr:140.90765,Nd:144.24,Pm:145,Sm:150.36,Eu:151.964,Gd:157.25,Tb:158.92534,Dy:162.5,Ho:164.93032,Er:167.259,Tm:168.93421,Yb:173.04,Lu:174.967,Hf:178.49,Ta:180.9479,W:183.84,Re:186.207,Os:190.23,Ir:192.217,Pt:195.078,Au:196.96655,Hg:200.59,Tl:204.3833,Pb:207.2,Bi:208.98038,Po:208.98,At:209.99,Rn:222.02,Fr:223.02,Ra:226.03,Ac:227.03,Th:232.0381,Pa:231.03588,U:238.02891,Np:237.05,Pu:244.06,Am:243.06,Cm:247.07,Bk:247.07,Cf:251.08,Es:252.08,Fm:257.1,Md:258.1,No:259.1,Lr:262.11,Rf:261.11,Db:262.11,Sg:266.12,Bh:264.12,Hs:269.13,Mt:268.14}},"./src/data/Markers.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.colors={autoColorFromStates:function(t,n){void 0===n&&(n=e.colorSets.colorBrewer);var r=t.reduce(function(e,t){return t&&(e[t]||(e[t]=0),e[t]+=1),e},{}),o=Object.entries(r).sort(function(e,t){return e[1]===t[1]?0:e[1]>t[1]?-1:1}).reduce(function(e,t,r){return e[t[0]]=void 0,r<n.length&&(e[t[0]]={color:n[r],name:t[0]}),e},{});return t.map(function(e){if(e)return o[e]})}},e.colorSets={categorical:["#069668","#75e7dd","#145a6a","#c5d5f0","#82269b","#5361c7","#e8a2de","#479abc","#11e38c","#0b5313","#bbcf7a","#6e390d","#f4d403","#ae301f","#34f50e","#7c8a4f","#f6bb86","#b5753e","#fe1d66","#9bea30"],colorBrewer:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},e}();t.Marker=r},"./src/data/Nucleotide.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.fullName=e,this.singleLetterCode=t,this.fullName=e,this.singleLetterCode=t}return e.fromSingleLetterCode=function(t){var n=e.allNucleotides.find(function(e){return e.singleLetterCode.toUpperCase()===t.toUpperCase()});return n||e.Unknown},e.fromFullName=function(t){var n=e.allNucleotides.find(function(e){return e.fullName.toUpperCase()===t.toUpperCase()});return n||e.Unknown},e.prototype.getComplementDNA=function(){return this===e.A?e.T:this===e.T?e.A:this===e.G?e.C:this===e.C?e.G:e.Unknown},e.prototype.getComplementRNA=function(){return this===e.T?e.U:this===e.U?e.T:this.getComplementDNA()},e.A=new e("Adenine","A"),e.C=new e("Cytosine","C"),e.G=new e("Guanine","G"),e.T=new e("Thymine","T"),e.U=new e("Uracil","U"),e.UKN=new e("Unknown","-"),e.Adenine=e.A,e.Cytosine=e.C,e.Guanine=e.G,e.Thymine=e.T,e.Uracil=e.U,e.Unknown=e.UKN,e.allNucleotides=[e.A,e.C,e.G,e.T,e.U,e.UKN],e}();t.Nucleotide=r},"./src/data/PfamProtein.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DOMAIN="Domain",e.FAMILY="Family",e.MOTIF="Motif",e.REPEAT="Repeat"}(t.PFAM_A_TYPE||(t.PFAM_A_TYPE={})),function(e){e.P_FAM_A_SEARCH="pfamASearch",e.P_FAM_B_SEARCH="pfamBSearch"}(t.PFAM_SEARCH_TYPE||(t.PFAM_SEARCH_TYPE={})),function(e){e.FS="fs",e.LS="ls"}(t.PFAM_MODEL_TYPE||(t.PFAM_MODEL_TYPE={})),function(e){e.P_FAM_A="Pfam-A",e.P_FAM_B="Pfam-B"}(t.PFAM_ELEMENT_TYPE||(t.PFAM_ELEMENT_TYPE={}))},"./src/data/PlotlyData.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.bar="bar",e.pointcloud="pointcloud",e.scatter="scatter",e.scattergl="scattergl",e.scatter3d="scatter3d"}(t.PLOTLY_CHART_TYPE||(t.PLOTLY_CHART_TYPE={}))},"./src/data/Protein.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DISEASE=0]="DISEASE",e[e.DOMAIN=1]="DOMAIN",e[e.FUNCTION=2]="FUNCTION",e[e.INTERACTION=3]="INTERACTION",e[e.MIM=4]="MIM",e[e.PTM=5]="PTM",e[e.SIMILARITY=6]="SIMILARITY",e[e.SUBCELLULAR_LOCATION=7]="SUBCELLULAR_LOCATION",e[e.SUBUNIT=8]="SUBUNIT",e[e.WEBRESOURCE=9]="WEBRESOURCE"}(t.PROTEIN_COMMENT_TYPE||(t.PROTEIN_COMMENT_TYPE={}))},"./src/data/Seq.ts":function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("./src/data/index.ts");!function(e){e.generic_dna="generic_dna",e.generic_rna="generic_rna",e.generic_protein="generic_protein"}(i=t.ALPHABET||(t.ALPHABET={}));var s=function(){function e(e,t,n){if(void 0===n&&(n=["-"]),this.sequence=e,this.alphabet=t,this.ignoredCharacters=n||[],this.alphabet===i.generic_dna&&!1===this.isValidDNA(this.ignoredCharacters))throw Error('Cannot create DNA Seq from sequence "'+this.sequence+'"');if(this.alphabet===i.generic_rna&&!1===this.isValidRNA(this.ignoredCharacters))throw Error('Cannot create RNA Seq from sequence "'+this.sequence+'"');if(this.alphabet===i.generic_protein&&!1===this.isValidProtein(this.ignoredCharacters))throw Error('Cannot create Protein Seq from sequence "'+this.sequence+'"')}return e.checkSequenceValidity=function(e,t,n){var r=(""+n.join().toLowerCase()+n.join().toUpperCase()).replace(/(.)(?=.*\1)/g,"");return new RegExp("^["+t.toLowerCase()+t.toUpperCase()+r+"]+$").test(e)},e.prototype.isValidProtein=function(t){return void 0===t&&(t=this.ignoredCharacters),e.checkSequenceValidity(this.sequence,a.proteinLetters,t)},e.prototype.isValidDNA=function(t){return void 0===t&&(t=this.ignoredCharacters),e.checkSequenceValidity(this.sequence,a.unambiguousDnaLetters,t)},e.prototype.isValidRNA=function(t){return void 0===t&&(t=this.ignoredCharacters),e.checkSequenceValidity(this.sequence,a.unambiguousRnaLetters,t)},e.prototype.determineAlphabet=function(e){return void 0===e&&(e=["-"]),this.alphabet?this.alphabet:this.isValidDNA(e)?i.generic_dna:this.isValidRNA(e)?i.generic_rna:this.isValidProtein(e)?i.generic_protein:void 0},e.prototype.equal=function(e){return this.alphabet===e.alphabet&&this.sequence.length===e.sequence.length&&this.sequence.toUpperCase()===e.sequence.toUpperCase()},e.prototype.binaryRepresentation=function(e){void 0===e&&(e=["-"]);var t=this.determineAlphabet(e),n=a.proteinLetters;t===i.generic_dna?n=a.unambiguousDnaLetters:t===i.generic_rna&&(n=a.unambiguousRnaLetters);var r=(n=(n+=e.join()).toUpperCase()).length;return this.sequence.toUpperCase().split("").reduce(function(e,t){var i=new Array(r).fill(0);return n.includes(t)&&(i[n.indexOf(t)]=1),e.push.apply(e,o(i)),e},new Array)},e.prototype.integerRepresentation=function(e){void 0===e&&(e=["-"]);var t=this.determineAlphabet(e),n=a.proteinLetters;return t===i.generic_dna?n=a.unambiguousDnaLetters:t===i.generic_rna&&(n=a.unambiguousRnaLetters),n=(n+=e.join()).toUpperCase(),this.sequence.toUpperCase().split("").map(function(e){return n.indexOf(e)},new Array)},e.prototype.toString=function(){return this.sequence},e.prototype.upper=function(){return new e(this.sequence.toUpperCase(),this.alphabet)},e.prototype.lower=function(){return new e(this.sequence.toLowerCase(),this.alphabet)},e.prototype.subSequence=function(t,n){return void 0===t&&(t=0),new e(this.sequence.slice(t,n),this.alphabet)},e.prototype.complement=function(t){var n=this;if(void 0===t&&(t=!1),this.alphabet===i.generic_protein)throw Error("Proteins do not have complements!");if((this.sequence.includes("U")||this.sequence.includes("u"))&&(this.sequence.includes("T")||this.sequence.includes("t")))throw Error("Mixed RNA/DNA found");var r=a.ambiguousDnaComplement,o=i.generic_dna;return(this.sequence.includes("U")||this.sequence.includes("u"))&&(r=a.ambiguousRnaComplement,o=i.generic_rna),new e((t?this.sequence.split("").reverse().join():this.sequence).split("").map(function(e){if(n.ignoredCharacters.includes(e))return e;var t=e.toUpperCase();return t===e?r[t]:r[t].toLowerCase()}).join(""),o,this.ignoredCharacters)},e.prototype.reverse_complement=function(){return this.complement(!0)},e.prototype.transcribe=function(){if(this.alphabet===i.generic_protein)throw Error("Proteins sequences cannot be transcribed!");return new e(this.sequence.replace(/T/g,"U").replace(/t/g,"u"),i.generic_rna)},e.prototype.back_transcribe=function(){if(this.alphabet===i.generic_protein)throw Error("Proteins sequences cannot be back transcribed!");return new e(this.sequence.replace(/U/g,"T").replace(/u/g,"t"),i.generic_dna)},e.prototype.translate=function(t,n,r){if(void 0===t&&(t="*"),void 0===n&&(n=!1),void 0===r&&(r=!1),this.alphabet===i.generic_protein)throw Error("Proteins sequences cannot be translated!");var o=a.standardDnaCodonTable;(this.sequence.includes("U")||this.sequence.includes("u"))&&(o=a.standardRnaCodonTable);var s=this.sequence.match(/.{1,3}/g);if(r){if(this.sequence.length%3!=0)throw Error("Invalid coding sequence - sequence length must be a multiple of 3!");if(this.sequence.length<6||s[0]in o.startCodons==!1||s[s.length-1]in o.stopCodons==!1)throw Error("Invalid coding sequence - sequence must have a valid start and stop codon!")}if(!s)return new e("",i.generic_protein);var c="";return s.forEach(function(e){if(3===e.length){var r=e.toUpperCase();if(r in o.table)c+=o.table[r];else if(r in o.stopCodons&&(c+=t,n))return}}),new e(c,i.generic_protein)},e}();t.Seq=s},"./src/data/SeqIO.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a,s=n("./src/data/index.ts");!function(e){e.fasta="fasta"}(a=t.SEQUENCE_FILE_TYPES||(t.SEQUENCE_FILE_TYPES={}));var c=function(){function e(){}return e.parseFile=function(t,n,o){var i=r({},e.DEFAULT_SEQ_PROPERTIES,o),c=new Array;if(n!==a.fasta)throw Error('File type "'+n+'" not recognized');t.split(/\r|\n|\r\n/).reduce(function(e,t){var n=t.trim();if(n.length>0)if(">"===n[0])e.push({annotations:{name:n.substr(1)},sequence:""});else if(e.length>0){var r=n.replace(/\./g,"-");e[e.length-1].sequence+=r}return e},c);return c.map(function(e){i.alphabet,i.ignoredCharacters;return new s.SeqRecord(new s.Seq(e.sequence,i.alphabet,i.ignoredCharacters),{id:e.annotations.id,name:e.annotations.name})})},e.getRandomSetOfSequences=function(e,t){var n=i(e);if(t>e.length)return n;for(var r=new Array;r.length<t;){var o=Math.floor(Math.random()*n.length);r.push(n[o]),n.splice(o,1)}return r},e.DEFAULT_SEQ_PROPERTIES={alphabet:void 0,ignoredCharacters:[]},e}();t.SeqIO=c},"./src/data/SeqRecord.ts":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./src/data/index.ts"),s=function(e){function t(n,r){void 0===r&&(r={});var o=e.call(this,n.sequence,n.alphabet,n.ignoredCharacters)||this;return o.annotations=r,o.annotations=i({},t.DEFAULT_ANNOTATIONS,r),Object.keys(a.Seq.prototype).forEach(function(n){var i=n,s=Reflect.getOwnPropertyDescriptor(a.Seq.prototype,n);"function"==typeof o[i]&&s&&s.writable&&Reflect.set(o,i,function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var c=e.prototype[i].call(o,n);return c instanceof a.Seq?new t(c,r):c})}),o}return o(t,e),t.DEFAULT_ANNOTATIONS={dbxrefs:[],description:"<unknown description>",id:"<unknown id>",letterAnnotations:{},metadata:{},name:"<unknown name>"},t}(a.Seq);t.SeqRecord=s},"./src/data/TintedBioblocks1DSection.ts":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n,r,o){void 0===r&&(r=n),void 0===o&&(o="orange");var i=e.call(this,t,n,r)||this;return i.label=t,i.sectionColor="orange",i.sectionColor=o,i}return o(t,e),Object.defineProperty(t.prototype,"color",{get:function(){return this.sectionColor},enumerable:!0,configurable:!0}),t.prototype.updateColor=function(e){this.sectionColor=e},t}(n("./src/data/index.ts").Bioblocks1DSection);t.TintedBioblocks1DSection=i},"./src/data/event/BioblocksChartEvent.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/data/index.ts"),o=function(){function e(e,t,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.type=e,this.chartPiece=t,this.selectedPoints=n,this.plotlyEvent=r}return e.prototype.isAxis=function(){return this.chartPiece===r.BIOBLOCKS_CHART_PIECE.AXIS},e}();t.BioblocksChartEvent=o},"./src/data/event/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/data/event/BioblocksChartEvent.ts"))},"./src/data/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/data/AminoAcid.ts")),r(n("./src/data/Nucleotide.ts")),r(n("./src/data/AnatomogramMapping.ts")),r(n("./src/data/Bioblocks1DSection.ts")),r(n("./src/data/BioblocksConfig.ts")),r(n("./src/data/BioblocksData.ts")),r(n("./src/data/BioblocksPDB.ts")),r(n("./src/data/CodonTable.ts")),r(n("./src/data/CouplingContainer.ts")),r(n("./src/data/Dataset.ts")),r(n("./src/data/IUPACData.ts")),r(n("./src/data/Markers.ts")),r(n("./src/data/PfamProtein.ts")),r(n("./src/data/PlotlyData.ts")),r(n("./src/data/Protein.ts")),r(n("./src/data/Seq.ts")),r(n("./src/data/SeqIO.ts")),r(n("./src/data/SeqRecord.ts")),r(n("./src/data/TintedBioblocks1DSection.ts")),r(n("./src/data/event/index.ts"))},"./src/helper/ColorMapper.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t,n,r){void 0===t&&(t=new Map),void 0===n&&(n="black"),void 0===r&&(r=e.DEFAULT_COLORS),this.colorMap=t,this.defaultColor=n,this.colors=r}return e.prototype.getColorFor=function(e){return this.colorMap.has(e)||this.addColorToMapper(e),this.colorMap.get(e)},e.prototype.addEntry=function(e,t,n){void 0===n&&(n=!0),this.colorMap.has(e)||this.addColorToMapper(e,t,n)},e.prototype.addColorToMapper=function(e,t,n){void 0===t&&(t=this.defaultColor),this.colorMap.set(e,t),t&&n&&!this.colors.includes(t)&&this.colors.push(t)},e.DEFAULT_COLORS=["red","green","blue","orange","purple","teal","pink","yellow","violet","olive","brown"],e}();t.ColorMapper=r},"./src/helper/CouplingMapper.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getCouplingHeaderIndices=function(e,t){if(t){var n={};return e.filter(function(e){return e.length>=1}).map(function(t){n[t.trim()]=e.indexOf(t)}),n}return function(e){return{A_i:e.length-2,A_j:e.length-1,cn:2,dist:3,i:0,j:1}}(e)}},"./src/helper/DataHelper.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},s=this;Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/ngl/dist/ngl.esm.js"),l=n("./src/data/index.ts"),u=n("./src/helper/index.ts");t.fetchAppropriateData=function(e,n){return o(s,void 0,void 0,function(){return i(this,function(r){switch(e){case l.VIZ_TYPE["T-SNE"]:return[2,t.fetchTSneCoordinateData(n)];case l.VIZ_TYPE["TENSOR-T-SNE"]:return[2,t.fetchTensorTSneCoordinateData(n)];case l.VIZ_TYPE.SPRING:return[2,t.fetchSpringData(n)];case l.VIZ_TYPE.NGL:return[2,t.fetchNGLDataFromDirectory(n)];case l.VIZ_TYPE.CONTACT_MAP:case l.VIZ_TYPE.INFO_PANEL:return[2,t.fetchContactMapData(n)];default:return[2,Promise.reject({error:"Currently no appropriate data getter for "+e})]}return[2]})})},t.fetchAppropriateDataFromFile=function(e,n){return o(s,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:switch(e){case l.VIZ_TYPE.NGL:return[3,1];case l.VIZ_TYPE.CONTACT_MAP:return[3,2]}return[3,4];case 1:return[2,t.fetchNGLDataFromFile(n)];case 2:return r={},o=t.getCouplingScoresData,[4,u.readFileAsText(n)];case 3:return[2,(r.couplingScores=o.apply(void 0,[i.sent()]),r)];case 4:return[2,Promise.reject({error:"Currently no appropriate data getter for "+e+" files"})]}})})},t.fetchSpringData=function(e){return o(s,void 0,void 0,function(){var t,n,o;return i(this,function(i){switch(i.label){case 0:return[4,d(e+"/categorical_coloring_data.json")];case 1:return t=i.sent(),n=new Array,o=Object.keys(t),t[o[0]].label_list.forEach(function(e,i){n.push({labelForCategory:o.reduce(function(e,n){var o;return r({},e,((o={})[n]=t[n].label_list[i],o))},{}),number:i})}),[2,{nodes:n}]}})})};var d=function(e){return o(s,void 0,void 0,function(){var t,n,r,o,s,c,l,d,f;return i(this,function(i){switch(i.label){case 0:return[4,u.fetchJSONFile(e)];case 1:t=i.sent(),n={};try{for(r=a(Object.keys(t)),o=r.next();!o.done;o=r.next()){if(s=o.value,!(c=t[s]).label_colors||!c.label_list)throw new Error("Unable to parse color data - does it have keys named 'label_colors' and 'label_list'");l=p(c,t),n[s]=l}}catch(e){d={error:e}}finally{try{o&&!o.done&&(f=r.return)&&f.call(r)}finally{if(d)throw d.error}}return[2,n]}})})};t.fetchSpringCoordinateData=function(e){return o(s,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return[4,u.fetchCSVFile(e)];case 1:return t=r.sent(),n=[],(t?t.split("\n"):[]).forEach(function(e,t,r){var o=e.split(",");if(o.length>=3){var i=parseFloat(o[1].trim()),a=parseFloat(o[2].trim()),s=parseInt(o[0].trim(),10);n[s]=[i,a]}else if(0!==e.localeCompare(""))throw new Error("Unable to parse coordinate data - Row "+t+" does not have at least 3 columns!")}),[2,n]}})})},t.fetchMatrixData=function(e){return o(s,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return[4,u.fetchCSVFile(""+e)];case 1:return t=r.sent(),n=[],t.split("\n").forEach(function(e){if(e.length>0){var t=e.split(",").map(Number.parseFloat);n.push(t)}}),[2,n]}})})},t.fetchTSneCoordinateData=function(e){return o(s,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return[4,u.fetchCSVFile(e+"/tsne_output.csv")];case 1:return t=r.sent(),n=[],t.split("\n").forEach(function(e){if(e.length>0){var t=e.split(","),r=[parseFloat(t[0]),parseFloat(t[1])];n.push(r)}}),[2,n]}})})},t.fetchTensorTSneCoordinateDataFromFile=function(e){return o(s,void 0,void 0,function(){var t,n,r,o,s,c,l;return i(this,function(i){switch(i.label){case 0:return[4,u.fetchCSVFile(e)];case 1:t=i.sent(),n=new Array;try{for(r=a(t.split("\n")),o=r.next();!o.done;o=r.next())(s=o.value).length>=1&&n.push(s.split(",").map(parseFloat))}catch(e){c={error:e}}finally{try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(c)throw c.error}}return[2,n]}})})},t.fetchTensorTSneCoordinateData=function(e){return o(s,void 0,void 0,function(){return i(this,function(n){return[2,t.fetchTensorTSneCoordinateDataFromFile(e+"/tsne_matrix.csv")]})})},t.fetchGraphData=function(e){return o(s,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,u.fetchJSONFile(e)];case 1:if(!(t=n.sent()).nodes||!t.links)throw new Error("Unable to parse graph data - does it have keys named 'nodes' and 'links'");return[2,t]}})})},t.fetchNGLDataFromDirectory=function(e){return o(s,void 0,void 0,function(){var n;return i(this,function(r){return 0===e.length?[2,Promise.reject("Empty path.")]:(n=e+"/protein.pdb",[2,t.fetchNGLDataFromFile(n)])})})},t.fetchNGLDataFromFile=function(e,t){return void 0===t&&(t={}),o(s,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,c.autoLoad(e,t)];case 1:return[2,n.sent()]}})})},t.fetchContactMapData=function(e,n){return void 0===n&&(n="known"),o(s,void 0,void 0,function(){var r,a,s,c,d,p=this;return i(this,function(f){switch(f.label){case 0:return 0===e.length?[2,Promise.reject("Empty path.")]:(r=["coupling_scores.csv","residue_mapping.csv"],[4,Promise.all(r.map(function(t){return o(p,void 0,void 0,function(){return i(this,function(n){return[2,u.fetchCSVFile(e+"/"+t)]})})}))]);case 1:return a=f.sent(),[4,l.BioblocksPDB.createPDB(e+"/protein.pdb")];case 2:return s=f.sent(),(d={})[n]=s,c=d,[2,{couplingScores:s.amendPDBWithCouplingScores(t.getCouplingScoresData(a[0],u.generateResidueMapping(a[1])).rankedContacts,l.CONTACT_DISTANCE_PROXIMITY.CLOSEST),pdbData:c,secondaryStructures:[]}]}})})};var p=function(e,t){var n,r,o={label_colors:{},label_list:e.label_list},i=t[Object.keys(t)[0]].label_colors;try{for(var s=a(Object.keys(i)),c=s.next();!c.done;c=s.next()){var l=c.value,u=i[l];"number"==typeof u?o.label_colors[l]=u:"#"===u.charAt(0)?o.label_colors[l]=Number.parseInt("0x"+u.slice(1),16):o.label_colors[l]=Number.parseInt(u,16)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o};t.getCouplingScoresData=function(e,t){void 0===t&&(t=[]);var n=e.split("\n")[0].split(","),o=f(n),i=u.getCouplingHeaderIndices(n,o),a=new l.CouplingContainer;return e.split("\n").slice(o?1:0).filter(function(e){return e.split(",").length>=2}).map(function(e){var n=e.split(","),o=h(n,i);if(t.length>=1){var s=t.findIndex(function(e){return e.couplingsResno===o.i}),c=t.findIndex(function(e){return e.couplingsResno===o.j});a.addCouplingScore(r({},o,{A_i:t[s].pdbResCode,A_j:t[c].pdbResCode,i:t[s].pdbResno,j:t[c].pdbResno}))}else a.addCouplingScore(o)}),a};var f=function(e){return["cn","dist","i","j"].filter(function(t){return e.includes(t)}).length>=1},h=function(e,t){return Object.entries(t).reduce(function(t,n){var o,i=n[0],a=n[1];return r({},t,((o={})[i]=isNaN(Number(e[a]))?e[a]:Number(e[a]),o))},{i:-1,j:-1})};t.augmentCouplingScoresWithResidueMapping=function(e,t){var n,o;void 0===t&&(t=[]);var i=new l.CouplingContainer,s=function(e){var n=t.findIndex(function(t){return t.couplingsResno===e.i}),o=t.findIndex(function(t){return t.couplingsResno===e.j});i.addCouplingScore(r({},e,{A_i:t[n].pdbResCode,A_j:t[o].pdbResCode,i:t[n].pdbResno,j:t[o].pdbResno}))};try{for(var c=a(e),u=c.next();!u.done;u=c.next()){s(u.value)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return i},t.getSecondaryStructureData=function(e){return e.split("\n").slice(1).filter(function(e){return e.split(",").length>=3}).map(function(e){var t=e.split(",");return{resno:parseFloat(t[1]),structId:t[2]}})}},"./src/helper/FetchHelper.ts":function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this;Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCSVFile=function(e){return r(i,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,fetch(e)];case 1:if((t=n.sent()).ok)return[2,t.text()];throw new Error(a("CSV",t))}})})},t.fetchJSONFile=function(e){return r(i,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,fetch(e)];case 1:if((t=n.sent()).ok)return[2,t.json()];throw new Error(a("JSON",t))}})})};var a=function(e,t){return"Bioblocks-viz error fetching "+e+" File!\nStatus: "+t.status+"\nMessage: "+t.statusText+"\n"};t.readFileAsText=function(e){return r(i,void 0,void 0,function(){var t;return o(this,function(n){return t=new FileReader,[2,new Promise(function(n,r){t.onerror=function(){t.abort(),r("Problem parsing input file.")},t.onload=function(){n(t.result)},t.readAsText(e)})]})})}},"./src/helper/FunctionHelper.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_FUNCTION=function(){}},"./src/helper/NGLHelper.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultDistanceParams={color:"red"},t.defaultDistanceTooltipParams={labelBackground:!0,labelBackgroundColor:"lightgrey",labelBackgroundMargin:.75,labelBorder:!0,labelBorderColor:"white",labelBorderWidth:.3,labelColor:"black",labelSize:5,labelUnit:"angstrom",labelZOffset:35},t.createDistanceRepresentation=function(e,n,o,i){void 0===i&&(i={});var a=r({},t.defaultDistanceParams,i,{atomPair:Array.isArray(n)?[n]:[n.split(",")]});return o&&(a=r({},a,t.defaultDistanceTooltipParams)),e.addRepresentation("distance",a)},t.createBallStickRepresentation=function(e,t){return e.addRepresentation("ball+stick",{sele:t.join(", ")})},t.createSecStructRepresentation=function(e,t,n,r){void 0===n&&(n=2),void 0===r&&(r="#feb83f");var o=e.addRepresentation("cartoon",{color:r,radiusScale:n,sele:t.start+"-"+t.end});return o.setParameters({wireframe:!0}),o}},"./src/helper/PlotlyHelper.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./src/data/index.ts");t.generateScatterGLData=function(e,n){return void 0===n&&(n=!1),r({},t.generateScatterData(e,n),{type:a.PLOTLY_CHART_TYPE.scattergl})},t.generateScatterData=function(e,t){void 0===t&&(t=!1);var n=e.marker,o=e.points,i=e.hoverinfo,u=e.subtitle,d=e.name,p=e.text,f=o.map(function(e){return e.i}),h=o.map(function(e){return e.j}),m=o.map(function(e){return e.dist?e.dist:-1}),y=p?Array.isArray(p)?p:[p]:[];return{hoverinfo:i||"x+y+z",marker:r({color:s(t,m,e),size:e.nodeSize},n),mode:"markers",name:d+" "+u,text:l(t,y),type:a.PLOTLY_CHART_TYPE.scatter,x:c(t,f,h),y:c(t,h,f),z:c(t,m,m)}};var s=function(e,t,n){var r=e?2*t.length:t.length,o=new Array(r);if(n.marker&&"string"==typeof n.marker.color)return o.fill(n.marker.color);var a=t.map(function(e){return e.toString()});return e?i(a,a):a},c=function(e,t,n){return e?i(t,n):t},l=function(e,t){return e?i(t,t.map(function(e){if(e.includes("<br>")&&e.includes("(")){var t=e.indexOf("<br>");return"("+e.substr(1,t-2).split(", ").reverse().join(", ")+")"+e.substring(t)}return e.includes("(")?"("+e.substr(1,e.length-2).split(", ").reverse().join(", ")+")":""+e.split(", ").reverse().join(", ")})):t};t.generateCouplingScoreHoverText=function(e){var t="";return e&&(t=e.A_i&&e.A_j?"("+e.i+e.A_i+", "+e.j+e.A_j+")":"("+e.i+", "+e.j+")",e.score&&(t=t+"<br>Score: "+e.score),e.probability&&(t=t+"<br>Probability: "+e.probability.toFixed(1))),t},t.generateFloat32ArrayFromContacts=function(e){var t=new Float32Array(2*e.length);return e.forEach(function(e,n){t[2*n]=e.i,t[2*n+1]=e.j}),t},t.generatePointCloudData=function(e,n){void 0===n&&(n=!1);var o=e.points,s=t.generateFloat32ArrayFromContacts(o);return{marker:r({},e.marker,{sizemax:2*e.nodeSize,sizemin:e.nodeSize}),mode:"markers",type:a.PLOTLY_CHART_TYPE.pointcloud,xy:n?new Float32Array(i(Array.from(s),Array.from(s).slice().reverse())):s}}},"./src/helper/ResidueMapper.ts":function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=["up_index","up_residue","pdb_index","pdb_residue"],i=["id","coord_id","one_letter_code"];t.generateResidueMapping=function(e){var t=/\t|,/,n=e.split("\n")[0].split(t),r=s(n),i=a(n,r),c=r?i.id:i.up_index,l=r?i.coord_id:i.pdb_index,u=r?i.one_letter_code:i.pdb_residue;return e.split("\n").slice(1).reduce(function(e,n){var a=n.split(t);return a.length>=o.length&&e.push({couplingsResCode:r?a[u]:a[i.up_residue],couplingsResno:parseInt(a[c],10),pdbResCode:a[u],pdbResno:parseInt(a[l],10)}),e},new Array)};var a=function(e,t){var n={},r=t?i:o;return e.length>=o.length&&r.map(function(t){if(!e.includes(t))throw new Error("Missing error "+t+" in residue mapping file!");n[t]=e.indexOf(t)}),n},s=function(e){var t,n;try{for(var o=r(i),a=o.next();!a.done;a=o.next()){var s=a.value;if(!e.includes(s))return!1}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}},"./src/helper/StringHelper.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalizeFirstLetter=function(e){return""+e.substr(0,1).toLocaleUpperCase()+e.substr(1).toLocaleLowerCase()},t.capitalizeEveryWord=function(e){return e.split(" ").map(function(e){return""+e.substr(0,1).toLocaleUpperCase()+e.substr(1).toLocaleLowerCase()}).join(" ")}},"./src/helper/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/helper/ColorMapper.ts")),r(n("./src/helper/CouplingMapper.ts")),r(n("./src/helper/DataHelper.ts")),r(n("./src/helper/FetchHelper.ts")),r(n("./src/helper/FunctionHelper.ts")),r(n("./src/helper/NGLHelper.ts")),r(n("./src/helper/PlotlyHelper.ts")),r(n("./src/helper/ResidueMapper.ts")),r(n("./src/helper/StringHelper.ts"))},"./src/reducer/BBStore.ts":function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/redux/es/redux.js"),a=(n("./node_modules/redux-logger/dist/redux-logger.js"),n("./node_modules/redux-thunk/es/index.js")),s=n("./src/reducer/index.ts"),c=[a.default];c.push(s.BioblocksMiddleware);var l={visualizations:new Array},u=function(e){var t=Object.keys(e);return Object.keys(l).forEach(function(n){-1===t.indexOf(n)&&(e[n]=function(e){return void 0===e&&(e=null),e})}),i.combineReducers(e)},d=u(s.ReducerRegistry.getReducers());s.ReducerRegistry.setChangeListener(function(e){t.BBStore.replaceReducer(u(e))});t.BBStore=i.createStore(d,l,i.applyMiddleware.apply(void 0,o(c)))},"./src/reducer/BioblocksMiddleware.ts":function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BioblocksMiddleware=function(e){return function(t){return function(n){var i,a,s=t(n);try{for(var c=r(o.transforms.keys()),l=c.next();!l.done;l=c.next()){var u=l.value,d=u.split("-");if(d[0].includes(n.meta)){var p=o.transforms.get(u);if(p){var f=p(e.getState());e.dispatch({payload:f,type:(d[d.length-1]+"_SET").toUpperCase()})}}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return s}}};var o=function(){function e(e){void 0===e&&(e=[]),this.requiredDataSubs=e}return e.addTransform=function(e){var t=e.fromState,n=e.toState,r="string"==typeof t?t:(t.namespace?t.namespace:"bioblocks")+"/"+t.stateName,o="string"==typeof n?n:(n.namespace?n.namespace:"bioblocks")+"/"+n.stateName;this.transforms.set(r+"-"+o,e.fn)},e.transforms=new Map,e}();t.BioblocksMiddlewareTransformer=o},"./src/reducer/ContainerReducer.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/immutable/dist/immutable.js"),o=n("./node_modules/typesafe-actions/dist/index.umd.js"),i=n("./src/action/index.ts"),a=n("./src/reducer/index.ts");t.ContainerReducer=function(e,t){void 0===t&&(t="bioblocks");var n=i.createContainerActions(e,t),a=r.Set();return function(e,t){switch(void 0===e&&(e=a),t.type){case o.getType(n.add):var i=t.payload;return e.add(i);case o.getType(n.addMultiple):return(i=t.payload).reduce(function(e,t){return e.add(t)},e);case o.getType(n.clear):return r.Set();case o.getType(n.remove):i=t.payload;return e.remove(i);case o.getType(n.removeMultiple):return(i=t.payload).reduce(function(e,t){return e.remove(t)},e);case o.getType(n.set):i=t.payload;return r.Set(i);default:return e}}},t.createContainerReducer=function(e,n){void 0===n&&(n="bioblocks");var r=t.ContainerReducer(e,n),o=n+"/"+e;a.ReducerRegistry.register(o,r)}},"./src/reducer/DataReducer.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/typesafe-actions/dist/index.umd.js"),o=n("./src/action/index.ts"),i=n("./src/reducer/index.ts");t.DataReducer=function(e,t,n){void 0===n&&(n="bioblocks");var i=o.createDataActions(e,n);return function(e,n){switch(void 0===e&&(e=t),n.type){case r.getType(i.success):return n.payload;case r.getType(i.failure):var o=n.payload;return console.error(o),t;default:return e}}},t.createDataReducer=function(e,n,r){void 0===r&&(r="bioblocks");var o=t.DataReducer(e,n,r),a=r+"/"+e;i.ReducerRegistry.register(a,o)}},"./src/reducer/ObjectReducer.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/immutable/dist/immutable.js"),o=n("./node_modules/typesafe-actions/dist/index.umd.js"),i=n("./src/action/index.ts"),a=n("./src/reducer/index.ts");t.ObjectReducer=function(e,t){void 0===t&&(t="bioblocks");var n=i.createObjectActions(e,t),a=r.Map();return function(e,t){switch(void 0===e&&(e=a),t.type){case o.getType(n.add):var i=t.payload;return e.merge(i);case o.getType(n.clear):return r.Map();case o.getType(n.remove):i=t.payload;return e.remove(i);case o.getType(n.removeMultiple):return(i=t.payload).reduce(function(e,t){return e.remove(t)},e);case o.getType(n.set):i=t.payload;return r.Map(i);case o.getType(n.toggle):var s=t.payload,c=e;return Object.keys(s).forEach(function(t){c=e.has(t)?e.remove(t):e.set(t,s[t])}),c;default:return e}}},t.createObjectReducer=function(e,n){void 0===n&&(n="bioblocks");var r=t.ObjectReducer(e,n),o=n+"/"+e;a.ReducerRegistry.register(o,r)}},"./src/reducer/ResiduePairReducer.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/redux/es/redux.js"),o=n("./src/reducer/index.ts");t.RESIDUE_PAIR_DATASET_NAME="residuePair",t.ResiduePairReducer=function(e){return void 0===e&&(e="bioblocks"),r.combineReducers({candidates:o.ContainerReducer(t.RESIDUE_PAIR_DATASET_NAME+"/candidates",e),hovered:o.ContainerReducer(t.RESIDUE_PAIR_DATASET_NAME+"/hovered",e),locked:o.ObjectReducer(t.RESIDUE_PAIR_DATASET_NAME+"/locked",e)})},t.createResiduePairReducer=function(e){void 0===e&&(e="bioblocks");var n=t.ResiduePairReducer(e),r=e+"/"+t.RESIDUE_PAIR_DATASET_NAME;o.ReducerRegistry.register(r,n)}},"./src/reducer/SpringReducer.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/redux/es/redux.js"),o=n("./src/reducer/index.ts");t.SpringReducer=function(e){return void 0===e&&(e="bioblocks"),r.combineReducers({category:o.ValueReducer("spring/category","",e),graphData:o.DataReducer("spring/graphData",{nodes:[]},e)})},t.createSpringReducer=function(e){void 0===e&&(e="bioblocks");var n=t.SpringReducer(e),r=e+"/spring";o.ReducerRegistry.register(r,n)}},"./src/reducer/ValueReducer.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/typesafe-actions/dist/index.umd.js"),o=n("./src/action/index.ts"),i=n("./src/reducer/index.ts");t.ValueReducer=function(e,t,n){void 0===n&&(n="bioblocks");var i=o.createValueActions(e,n);return function(e,n){switch(void 0===e&&(e=t),n.type){case r.getType(i.clear):return t;case r.getType(i.set):return n.payload;default:return e}}},t.createValueReducer=function(e,n,r){void 0===r&&(r="bioblocks");var o=t.ValueReducer(e,n,r),a=r+"/"+e;i.ReducerRegistry.register(a,o)}},"./src/reducer/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/reducer/registry/index.ts")),r(n("./src/reducer/BioblocksMiddleware.ts")),r(n("./src/reducer/ContainerReducer.ts")),r(n("./src/reducer/ObjectReducer.ts")),r(n("./src/reducer/DataReducer.ts")),r(n("./src/reducer/ResiduePairReducer.ts")),r(n("./src/reducer/SpringReducer.ts")),r(n("./src/reducer/ValueReducer.ts")),r(n("./src/reducer/BBStore.ts"))},"./src/reducer/registry/ReducerRegistry.ts":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=new(function(){function e(){this.reducers={},this.emitChange=null}return e.prototype.getReducers=function(){return r({},this.reducers)},e.prototype.register=function(e,t){var n;Object.keys(this.reducers).includes(e)?console.log("Reducer '"+e+" already exists, not replacing"):this.reducers=r({},this.reducers,((n={})[e]=t,n)),this.emitChange&&this.emitChange(this.getReducers())},e.prototype.setChangeListener=function(e){this.emitChange=e},e}());t.ReducerRegistry=o},"./src/reducer/registry/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/reducer/registry/ReducerRegistry.ts"))},"./src/selector/ContainerSelectors.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/immutable/dist/immutable.js");t.selectCurrentItems=function(e,t,n){return void 0===n&&(n="bioblocks"),e&&e[n+"/"+t]?e[n+"/"+t]:r.Set()}},"./src/selector/ObjectSelectors.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/immutable/dist/immutable.js");t.selectObject=function(e,t,n){return void 0===n&&(n="bioblocks"),e&&e[n+"/"+t]?e[n+"/"+t]:r.Map()}},"./src/selector/ResiduePairSelectors.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/immutable/dist/immutable.js");t.getResiduePairs=function(e,t){return void 0===t&&(t="bioblocks"),void 0!==e&&e[t+"/residuePair"]?e[t+"/residuePair"]:{candidates:r.Set(),hovered:r.Set(),locked:r.Map()}},t.getCandidates=function(e,n){return void 0===n&&(n="bioblocks"),t.getResiduePairs(e,n).candidates},t.getHovered=function(e,n){return void 0===n&&(n="bioblocks"),t.getResiduePairs(e,n).hovered},t.getLocked=function(e,n){return void 0===n&&(n="bioblocks"),t.getResiduePairs(e,n).locked}},"./src/selector/SpringSelectors.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/immutable/dist/immutable.js"),o=n("./node_modules/reselect/es/index.js");t.getSpring=function(e,t){return void 0===t&&(t="bioblocks"),void 0!==e&&e[t+"/spring"]?e[t+"/spring"]:{category:"",graphData:{nodes:[]}}},t.getGraphData=function(e,n){return void 0===n&&(n="bioblocks"),t.getSpring(e,n).graphData},t.getCategories=o.createSelector([t.getGraphData],function(e){var t=e&&e.nodes?e.nodes:[],n=r.Set(t.length>=1?Object.keys(t[0].labelForCategory):[]),o=new Map;return n.forEach(function(e){if(e){var n=r.Set(Array.from(t.map(function(t){return t.labelForCategory[e]})));o.set(e,n)}}),n}),t.getLabels=o.createSelector([t.getGraphData],function(e){var t=e&&e.nodes?e.nodes:[],n=r.Set(t.length>=1?Object.keys(t[0].labelForCategory):[]),o=r.Set();return n.forEach(function(e){e&&(o=o.merge(r.Set(Array.from(t.map(function(t){return t.labelForCategory[e]})))))}),o})},"./src/selector/ValueSelectors.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectCurrentValue=function(e,t,n,r){return void 0===n&&(n=null),void 0===r&&(r="bioblocks"),e&&e[r+"/"+t]?e[r+"/"+t]:n}},"./src/selector/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/selector/ContainerSelectors.ts")),r(n("./src/selector/ObjectSelectors.ts")),r(n("./src/selector/ResiduePairSelectors.ts")),r(n("./src/selector/SpringSelectors.ts")),r(n("./src/selector/ValueSelectors.ts"))},"./src/singlepage/UMAPVisualization.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var d=n("./node_modules/papaparse/papaparse.min.js"),p=n("./node_modules/react/index.js"),f=n("./node_modules/umap-js/dist/index.js"),h=n("./node_modules/umap-js/dist/umap.js"),m=n("./node_modules/semantic-ui-react/dist/es/index.js"),y=n("./src/component/index.ts"),g=n("./src/data/index.ts"),v=n("./src/helper/index.ts");function b(e,t,n){void 0===n&&(n=!1);var r=n?e.map(function(e,t){return t}):u(e);if(t>=e.length)return r;for(var o=new Array;o.length<t;){var i=Math.floor(Math.random()*r.length);o.push(r[i]),r.splice(i,1)}return o}t.subsample=b;var _=function(e){function t(t){var n=e.call(this,t)||this;return n.subsampledIndices=new Array,n.state={completeSampleAnnotations:{},errorMessages:[]},n}return o(t,e),t.prototype.componentDidMount=function(){this.prepareData()},t.prototype.componentDidUpdate=function(e,t){e.dataMatrix===this.props.dataMatrix&&e.numSamplesToShow===this.props.numSamplesToShow&&e.sampleNames===this.props.sampleNames&&e.categoricalAnnotations===this.props.categoricalAnnotations&&e.labelCategory===this.props.labelCategory||(console.log("UMAP T Preparing data"),this.prepareData(e.categoricalAnnotations===this.props.categoricalAnnotations))},t.prototype.render=function(){var e=this.props,t=e.dataMatrix,n=e.labelCategory,r=e.numIterationsBeforeReRender,o=c(e,["dataMatrix","labelCategory","numIterationsBeforeReRender"]),a=this.state,s=a.completeSampleAnnotations,l=a.errorMessages,u=new Array,d=new Array,f=new Array(new Array);if(this.subsampledIndices.length>0&&(f=this.subsampledIndices.map(function(e){return t[e]}),n&&s&&s[n])){var h=s[n];u=this.subsampledIndices.map(function(e){return h[e]}),d=this.subsampledIndices.map(function(e){var t=h[e];return t?t.name:"unannotated"})}return p.createElement(S,i({dataLabels:u,dataMatrix:f,errorMessages:l,tooltipNames:d,numIterationsBeforeReRender:r},o))},t.prototype.prepareData=function(e){void 0===e&&(e=!1);var t=this.props,n=t.categoricalAnnotations,r=t.sampleNames,o=t.dataMatrix,i=t.numSamplesToShow,a=(this.state,new Array);r&&o.length!==r.length&&a.push("The "+r.length+" sample names provided do not account for all "+o.length+" data matrix rows."),!1===e&&n&&Object.keys(n).forEach(function(e){n[e].label_list.length!==o.length&&a.push("Label category "+e+" does not provide labels for all "+o.length+" samples in the data matrix.")});var s=this.state.completeSampleAnnotations;!1===e&&(s={},n&&Object.keys(n).forEach(function(e){var t,r=n[e].label_list,o=n[e].label_colors;t=o&&0!==Object.keys(o).length?r.map(function(e){if(o[e])return{color:o[e],name:e}}):g.Marker.colors.autoColorFromStates(r),s[e]=t})),this.subsampledIndices&&this.subsampledIndices.length===i||(this.subsampledIndices=b(this.props.dataMatrix,i,!0)),this.setState({completeSampleAnnotations:s,errorMessages:a})},t.defaultProps={numIterationsBeforeReRender:1,numSamplesToShow:4e3},t}(p.Component);t.UMAPTranscriptionalContainer=_;var C=function(e){function t(t){var n=e.call(this,t)||this;return n.renderTaxonomyUpload=function(){return p.createElement(m.Popup,{trigger:p.createElement(m.Label,{as:"label",basic:!0,htmlFor:"upload-taxonomy"},p.createElement(m.Button,{icon:"upload",label:{basic:!0,content:"Upload Taxonomy File"},labelPosition:"right"}),p.createElement("input",{hidden:!0,id:"upload-taxonomy",multiple:!1,onChange:n.onTaxonomyUpload,required:!0,type:"file"})),content:p.createElement(p.Fragment,null,p.createElement("span",null,"A tab delimited file with 2 columns and optional headers:"),p.createElement("br",null),p.createElement("span",null,"- First column is sequence name."),p.createElement("br",null),p.createElement("span",null,"- Second column is how to group sequences."))})},n.onTaxonomyUpload=function(e){return a(n,void 0,void 0,function(){var t,n,r;return s(this,function(o){switch(o.label){case 0:return e.persist(),(t=e.target.files)?(n=t.item(0),r=this.parseTaxonomy,[4,v.readFileAsText(n)]):[2];case 1:return r.apply(this,[o.sent()]),[2]}})})},n.equalityHammingDistance=function(e,t){for(var n=0,r=0;r<e.length;r++)e[r]!==t[r]&&(n+=1);return n},n.setupSequenceAnnotation=function(e,t){n.setState({seqNameToTaxonomyMetadata:e.reduce(function(e,n){var r;return n.annotations.name&&n.annotations.metadata&&(e[n.annotations.name]=((r={})[t]=n.annotations.metadata[t],r)),e},{})})},n.state={labelCategory:"",randomSequencesDataMatrix:new Array(new Array),seqNameToTaxonomyMetadata:{},subsampledSequences:new Array},n}return o(t,e),t.prototype.componentDidMount=function(){this.prepareData()},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.allSequences,o=n.numSequencesToShow,i=n.labelCategory,a=n.taxonomyText;if(e.allSequences!==r||e.numSequencesToShow!==o||e.labelCategory!==i||e.taxonomyText!==a){var s=!0;e.allSequences.forEach(function(e,t){0===e.sequence.localeCompare(r[t].sequence)||(s=!1)}),s?a?this.parseTaxonomy(a):this.setupSequenceAnnotation(r,i):this.prepareData()}},t.prototype.render=function(){var e=this.props,t=e.numIterationsBeforeReRender,n=e.showUploadButton,r=c(e,["numIterationsBeforeReRender","showUploadButton"]),o=this.state,a=o.labelCategory,s=o.randomSequencesDataMatrix,l=o.seqNameToTaxonomyMetadata,u=o.subsampledSequences;if(u){var d=u.map(function(e){return e.annotations.name?e.annotations.name:""}),f=new Array;if(l){var h=u.map(function(e){if(e.annotations.name&&l[e.annotations.name])return l[e.annotations.name][a]});f=g.Marker.colors.autoColorFromStates(h)}return p.createElement(m.Grid,{centered:!0,padded:!0},p.createElement(m.Grid.Row,null,p.createElement(S,i({dataLabels:f,dataMatrix:s,distanceFn:this.equalityHammingDistance,errorMessages:[],numIterationsBeforeReRender:t,tooltipNames:d},r))),n&&p.createElement(m.Grid.Row,null,this.renderTaxonomyUpload()))}return null},t.prototype.prepareData=function(){var e=this.props,t=e.allSequences,n=e.numSequencesToShow,r=e.labelCategory,o=e.taxonomyText;o?this.parseTaxonomy(o):this.setupSequenceAnnotation(t,r),console.log("all "+t.length+" fasta sequences:",t);var i=this.state?this.state.subsampledSequences:void 0;i&&i.length===n||(i=b(this.props.allSequences,n)),console.log("random "+i.length+" fasta sequences:",i),this.setState({labelCategory:r,randomSequencesDataMatrix:i.map(function(e){return e.integerRepresentation(["-"])}),subsampledSequences:i})},t.prototype.parseTaxonomy=function(e){var t=this;if(e){var n=e.split("\n")[0].includes("seq_name");d.parse(e,{complete:function(e){console.log("Raw taxonomy contains "+e.data.length+" sequences:",e.data),t.setState({seqNameToTaxonomyMetadata:e.data.reduce(function(e,r){var o;if(n)e[r.seq_name]=r;else{var i=r;e[i[0]]=((o={seq_name:i[0]})[t.props.labelCategory]=i[1],o)}return e},{})})},header:n})}},t.defaultProps={labelCategory:"class",numIterationsBeforeReRender:1,numSequencesToShow:5e3,showUploadButton:!1},t}(p.Component);t.UMAPSequenceContainer=C;var S=function(e){function t(t){var n=e.call(this,t)||this;return n.getData=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=[]);var r;return r=e.reduce(function(r,o,i){var a=t[i],s=a||{color:"gray",name:"Unannotated"},c=s.color,l=s.name;return r[l]?(r[l].x=r[l].x.concat(o[0]),r[l].y=r[l].y.concat(o[1]),r[l].name=l+" ("+(r[l].x.length+1)+")","scatter3d"===r[l].type&&(r[l].z=r[l].z.concat(o[2]))):(r[l]={hoverinfo:"x+y+text",marker:{color:c||"gray"},mode:"markers",name:l+" (1)",text:n[i],type:"scattergl",x:[o[0]],y:[o[1]]},e.length>0&&e[0].length>2&&(r[l].type="scatter3d",r[l].z=[o[2]])),r},{}),Object.values(r).sort(function(e,t){return e.name.includes("Unannotated")||t.name.includes("Unannotated")?-1:e.name.localeCompare(t.name)}).reverse()},n.state={currentEpoch:void 0,plotlyData:new Array,ranges:{maxX:20,maxY:20,minX:-20,minY:-20},totalNumberEpochs:void 0,umapEmbedding:new Array(new Array)},n}return o(t,e),t.prototype.componentDidMount=function(){this.executeUMAP()},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.distanceFn,o=n.dataMatrix,i=n.dataLabels,a=n.tooltipNames;r!==e.distanceFn||o!==e.dataMatrix?this.executeUMAP():i===e.dataLabels&&a===e.tooltipNames||this.setState({plotlyData:this.getData(this.state.umapEmbedding,this.props.dataLabels,this.props.tooltipNames)})},t.prototype.render=function(){var e,t=this.props.iconSrc,n=this.state,r=n.currentEpoch,o=n.ranges,a=n.plotlyData,s=n.totalNumberEpochs,c=n.umapEmbedding;s&&r&&(e="epoch "+r+"/"+s);var l=document.getElementsByClassName("legend")[0],u=l?.75*l.getBBox().width:0;return p.createElement("div",null,p.createElement(y.ComponentCard,{componentName:"UMAP",expandedStyle:{height:"80vh",width:"calc("+u+"px + 80vh)"},dockItems:[{text:c.length+" sequences | "+(e||""),isLink:!1}],iconSrc:t,isDataReady:void 0!==e,width:u+525+"px"},p.createElement(y.PlotlyChart,{layout:i({},y.defaultPlotlyLayout,{dragmode:"zoom",legend:{itemdoubleclick:!1,traceorder:"reversed",x:1,y:1},margin:{b:20},showlegend:!0,xaxis:{autorange:!1,range:[o.minX,o.maxX]},yaxis:{autorange:!1,range:[o.minY,o.maxY]}}),data:a,showLoader:!0})))},t.prototype.executeUMAP=function(){var e=this,t=this.props,n=t.dataMatrix,r=t.distanceFn;console.log("dataMatrix",n),console.log("distanceFn",r),clearTimeout(this.timeout1),clearTimeout(this.timeout2);var o=performance.now();this.timeout1=setTimeout(function(){var t=new f.UMAP({distanceFn:r,minDist:.99,nComponents:2,nNeighbors:15,spread:1}),i=t.initializeFit(n);console.log("UMAP wants to do "+i+" epochs");var a=function(n){if(n%e.props.numIterationsBeforeReRender==0&&n<i){n%50==0&&console.log(n+" :: "+(performance.now()-o)/1e3+" sec");var r=t.getEmbedding();0===n&&console.log("embedding:",r);var s=e.state.ranges;r.forEach(function(e){s.maxX=Math.max(s.maxX,e[0]+5),s.minX=Math.min(s.minX,e[0]-5),s.maxY=Math.max(s.maxY,e[1]+5),s.minY=Math.min(s.minY,e[1]-5)}),e.setState({currentEpoch:n+1,plotlyData:e.getData(r,e.props.dataLabels,e.props.tooltipNames),ranges:s,totalNumberEpochs:i,umapEmbedding:r})}t.step(),n<=i&&(e.timeout2=setTimeout(function(){a(n+1)}))};a(0)})},t.defaultProps={distanceFn:h.euclidean,errorMessages:[],numIterationsBeforeReRender:1},t}(p.Component);t.UMAPVisualization=S},"./src/singlepage/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/singlepage/UMAPVisualization.tsx"))},0:function(e,t){},1:function(e,t){},2:function(e,t){},3:function(e,t){}});